/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/orders/route";
exports.ids = ["app/api/orders/route"];
exports.modules = {

/***/ "(rsc)/./app/api/orders/route.ts":
/*!*********************************!*\
  !*** ./app/api/orders/route.ts ***!
  \*********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DELETE: () => (/* binding */ DELETE),\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST),\n/* harmony export */   PUT: () => (/* binding */ PUT)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_database__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/database */ \"(rsc)/./lib/database.ts\");\n/* harmony import */ var _barrel_optimize_names_addDays_date_fns__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! __barrel_optimize__?names=addDays!=!date-fns */ \"(rsc)/./node_modules/date-fns/esm/addDays/index.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_lib_database__WEBPACK_IMPORTED_MODULE_1__]);\n_lib_database__WEBPACK_IMPORTED_MODULE_1__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\nasync function GET() {\n    try {\n        const pool = await (0,_lib_database__WEBPACK_IMPORTED_MODULE_1__.getDatabase)();\n        const result = await pool.query(`\n      SELECT o.*, \n             STRING_AGG(p.name, ',') as product_names,\n             STRING_AGG(p.id::text, ',') as product_ids\n      FROM orders o\n      LEFT JOIN order_products op ON o.id = op.order_id\n      LEFT JOIN products p ON op.product_id = p.id\n      GROUP BY o.id, o.order_id, o.claim_status, o.claim_timestamp, o.claim_count, o.expiration_date, o.one_time_use, o.created_by, o.created_at\n      ORDER BY o.created_at DESC\n    `);\n        const orders = result.rows;\n        // Parse product names and IDs\n        const ordersWithProducts = orders.map((order)=>{\n            const productNames = order.product_names ? order.product_names.split(',') : [];\n            const productIds = order.product_ids ? order.product_ids.split(',').map(Number) : [];\n            // Create products array with proper structure for frontend\n            const products = productNames.map((name, index)=>({\n                    id: productIds[index],\n                    name: name.trim()\n                }));\n            return {\n                ...order,\n                product_names: productNames,\n                product_ids: productIds,\n                products: products\n            };\n        });\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(ordersWithProducts);\n    } catch (error) {\n        console.error('Get orders error:', error);\n        // Return empty array if table doesn't exist yet\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json([]);\n    }\n}\nasync function POST(request) {\n    try {\n        const { order_id, product_ids, expiration_days, one_time_use, created_by } = await request.json();\n        if (!order_id || !product_ids || product_ids.length === 0) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: 'Order ID and at least one product are required'\n            }, {\n                status: 400\n            });\n        }\n        const pool = await (0,_lib_database__WEBPACK_IMPORTED_MODULE_1__.getDatabase)();\n        // Check if order already exists\n        const existingOrderResult = await pool.query('SELECT id FROM orders WHERE order_id = $1', [\n            order_id\n        ]);\n        if (existingOrderResult.rows.length > 0) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: 'Order ID already exists'\n            }, {\n                status: 400\n            });\n        }\n        // Verify all products exist\n        for (const productId of product_ids){\n            const productResult = await pool.query('SELECT id FROM products WHERE id = $1', [\n                productId\n            ]);\n            if (productResult.rows.length === 0) {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    error: `Product with ID ${productId} not found`\n                }, {\n                    status: 404\n                });\n            }\n        }\n        // Calculate expiration date\n        const expirationDate = expiration_days ? (0,_barrel_optimize_names_addDays_date_fns__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(new Date(), expiration_days).toISOString() : null;\n        // Create order\n        const orderResult = await pool.query(`\n      INSERT INTO orders (order_id, expiration_date, one_time_use, created_by)\n      VALUES ($1, $2, $3, $4)\n      RETURNING id\n    `, [\n            order_id,\n            expirationDate,\n            one_time_use ?? true,\n            created_by\n        ]);\n        const newOrderId = orderResult.rows[0].id;\n        // Add products to order\n        for (const productId of product_ids){\n            await pool.query(`\n        INSERT INTO order_products (order_id, product_id)\n        VALUES ($1, $2)\n      `, [\n                newOrderId,\n                productId\n            ]);\n        }\n        // Get the created order with product details\n        const newOrderResult = await pool.query(`\n      SELECT o.*, \n             STRING_AGG(p.name, ',') as product_names,\n             STRING_AGG(p.id::text, ',') as product_ids\n      FROM orders o\n      LEFT JOIN order_products op ON o.id = op.order_id\n      LEFT JOIN products p ON op.product_id = p.id\n      WHERE o.id = $1\n      GROUP BY o.id, o.order_id, o.claim_status, o.claim_timestamp, o.claim_count, o.expiration_date, o.one_time_use, o.created_by, o.created_at\n    `, [\n            newOrderId\n        ]);\n        const newOrder = newOrderResult.rows[0];\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            ...newOrder,\n            product_names: newOrder.product_names ? newOrder.product_names.split(',') : [],\n            product_ids: newOrder.product_ids ? newOrder.product_ids.split(',').map(Number) : []\n        }, {\n            status: 201\n        });\n    } catch (error) {\n        console.error('Create order error:', error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: 'Internal server error'\n        }, {\n            status: 500\n        });\n    }\n}\nasync function PUT(request) {\n    try {\n        const { id, order_id, product_ids, expiration_days, one_time_use } = await request.json();\n        if (!id || !order_id || !product_ids || product_ids.length === 0) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: 'ID, order ID and at least one product are required'\n            }, {\n                status: 400\n            });\n        }\n        const pool = await (0,_lib_database__WEBPACK_IMPORTED_MODULE_1__.getDatabase)();\n        // Check if order exists\n        const existingOrderResult = await pool.query('SELECT id, one_time_use, claim_count FROM orders WHERE id = $1', [\n            id\n        ]);\n        if (existingOrderResult.rows.length === 0) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: 'Order not found'\n            }, {\n                status: 404\n            });\n        }\n        const existingOrder = existingOrderResult.rows[0];\n        // Verify all products exist\n        for (const productId of product_ids){\n            const productResult = await pool.query('SELECT id FROM products WHERE id = $1', [\n                productId\n            ]);\n            if (productResult.rows.length === 0) {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    error: `Product with ID ${productId} not found`\n                }, {\n                    status: 404\n                });\n            }\n        }\n        // Calculate expiration date\n        const expirationDate = expiration_days ? (0,_barrel_optimize_names_addDays_date_fns__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(new Date(), expiration_days).toISOString() : null;\n        // If changing from multi-use to one-time use, reset claim count to allow one more claim\n        let newClaimCount = existingOrder.claim_count;\n        if (!existingOrder.one_time_use && one_time_use) {\n            newClaimCount = 0;\n        }\n        // Update order\n        await pool.query(`\n      UPDATE orders \n      SET order_id = $1, expiration_date = $2, one_time_use = $3, claim_count = $4\n      WHERE id = $5\n    `, [\n            order_id,\n            expirationDate,\n            one_time_use ?? true,\n            newClaimCount,\n            id\n        ]);\n        // Remove existing product associations\n        await pool.query('DELETE FROM order_products WHERE order_id = $1', [\n            id\n        ]);\n        // Add new product associations\n        for (const productId of product_ids){\n            await pool.query(`\n        INSERT INTO order_products (order_id, product_id)\n        VALUES ($1, $2)\n      `, [\n                id,\n                productId\n            ]);\n        }\n        // Get updated order with product details\n        const updatedOrderResult = await pool.query(`\n      SELECT o.*, \n             STRING_AGG(p.name, ',') as product_names,\n             STRING_AGG(p.id::text, ',') as product_ids\n      FROM orders o\n      LEFT JOIN order_products op ON o.id = op.order_id\n      LEFT JOIN products p ON op.product_id = p.id\n      WHERE o.id = $1\n      GROUP BY o.id, o.order_id, o.claim_status, o.claim_timestamp, o.claim_count, o.expiration_date, o.one_time_use, o.created_by, o.created_at\n    `, [\n            id\n        ]);\n        const updatedOrder = updatedOrderResult.rows[0];\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            ...updatedOrder,\n            product_names: updatedOrder.product_names ? updatedOrder.product_names.split(',') : [],\n            product_ids: updatedOrder.product_ids ? updatedOrder.product_ids.split(',').map(Number) : []\n        });\n    } catch (error) {\n        console.error('Update order error:', error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: 'Internal server error'\n        }, {\n            status: 500\n        });\n    }\n}\nasync function DELETE(request) {\n    try {\n        const { searchParams } = new URL(request.url);\n        const id = searchParams.get('id');\n        if (!id) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: 'Order ID is required'\n            }, {\n                status: 400\n            });\n        }\n        const pool = await (0,_lib_database__WEBPACK_IMPORTED_MODULE_1__.getDatabase)();\n        // Delete order (this will cascade delete order_products due to foreign key)\n        await pool.query('DELETE FROM orders WHERE id = $1', [\n            id\n        ]);\n        // Also explicitly delete order_products (in case cascade doesn't work)\n        await pool.query('DELETE FROM order_products WHERE order_id = $1', [\n            id\n        ]);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            message: 'Order deleted successfully'\n        });\n    } catch (error) {\n        console.error('Delete order error:', error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: 'Internal server error'\n        }, {\n            status: 500\n        });\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TUFBTTdCLE9BQU8sTUFBTUgsMERBQVdBO1FBRTlCLDRFQUE0RTtRQUM1RSxNQUFNRyxLQUFLRSxLQUFLLENBQUMsb0NBQW9DO1lBQUNlO1NBQUc7UUFFekQsdUVBQXVFO1FBQ3ZFLE1BQU1qQixLQUFLRSxLQUFLLENBQUMsa0RBQWtEO1lBQUNlO1NBQUc7UUFFdkUsT0FBT3JCLHFEQUFZQSxDQUFDdUIsSUFBSSxDQUFDO1lBQUVnQyxTQUFTO1FBQTZCO0lBQ25FLEVBQUUsT0FBTy9CLE9BQU87UUFDZEMsUUFBUUQsS0FBSyxDQUFDLHVCQUF1QkE7UUFDckMsT0FBT3hCLHFEQUFZQSxDQUFDdUIsSUFBSSxDQUFDO1lBQUVDLE9BQU87UUFBd0IsR0FBRztZQUFFUyxRQUFRO1FBQUk7SUFDN0U7QUFDRiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxJbWFuZ1xcRG9jdW1lbnRzXFxHaXRIdWJcXHNlbGYtY2xhaW0tbGlua1xcYXBwXFxhcGlcXG9yZGVyc1xccm91dGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJztcbmltcG9ydCB7IGdldERhdGFiYXNlIH0gZnJvbSAnQC9saWIvZGF0YWJhc2UnO1xuaW1wb3J0IHsgYWRkRGF5cyB9IGZyb20gJ2RhdGUtZm5zJztcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVCgpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBwb29sID0gYXdhaXQgZ2V0RGF0YWJhc2UoKTtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBwb29sLnF1ZXJ5KGBcbiAgICAgIFNFTEVDVCBvLiosIFxuICAgICAgICAgICAgIFNUUklOR19BR0cocC5uYW1lLCAnLCcpIGFzIHByb2R1Y3RfbmFtZXMsXG4gICAgICAgICAgICAgU1RSSU5HX0FHRyhwLmlkOjp0ZXh0LCAnLCcpIGFzIHByb2R1Y3RfaWRzXG4gICAgICBGUk9NIG9yZGVycyBvXG4gICAgICBMRUZUIEpPSU4gb3JkZXJfcHJvZHVjdHMgb3AgT04gby5pZCA9IG9wLm9yZGVyX2lkXG4gICAgICBMRUZUIEpPSU4gcHJvZHVjdHMgcCBPTiBvcC5wcm9kdWN0X2lkID0gcC5pZFxuICAgICAgR1JPVVAgQlkgby5pZCwgby5vcmRlcl9pZCwgby5jbGFpbV9zdGF0dXMsIG8uY2xhaW1fdGltZXN0YW1wLCBvLmNsYWltX2NvdW50LCBvLmV4cGlyYXRpb25fZGF0ZSwgby5vbmVfdGltZV91c2UsIG8uY3JlYXRlZF9ieSwgby5jcmVhdGVkX2F0XG4gICAgICBPUkRFUiBCWSBvLmNyZWF0ZWRfYXQgREVTQ1xuICAgIGApO1xuICAgIGNvbnN0IG9yZGVycyA9IHJlc3VsdC5yb3dzO1xuICAgIFxuICAgIC8vIFBhcnNlIHByb2R1Y3QgbmFtZXMgYW5kIElEc1xuICAgIGNvbnN0IG9yZGVyc1dpdGhQcm9kdWN0cyA9IG9yZGVycy5tYXAoKG9yZGVyOiBhbnkpID0+IHtcbiAgICAgIGNvbnN0IHByb2R1Y3ROYW1lcyA9IG9yZGVyLnByb2R1Y3RfbmFtZXMgPyBvcmRlci5wcm9kdWN0X25hbWVzLnNwbGl0KCcsJykgOiBbXTtcbiAgICAgIGNvbnN0IHByb2R1Y3RJZHMgPSBvcmRlci5wcm9kdWN0X2lkcyA/IG9yZGVyLnByb2R1Y3RfaWRzLnNwbGl0KCcsJykubWFwKE51bWJlcikgOiBbXTtcbiAgICAgIFxuICAgICAgLy8gQ3JlYXRlIHByb2R1Y3RzIGFycmF5IHdpdGggcHJvcGVyIHN0cnVjdHVyZSBmb3IgZnJvbnRlbmRcbiAgICAgIGNvbnN0IHByb2R1Y3RzID0gcHJvZHVjdE5hbWVzLm1hcCgobmFtZTogc3RyaW5nLCBpbmRleDogbnVtYmVyKSA9PiAoe1xuICAgICAgICBpZDogcHJvZHVjdElkc1tpbmRleF0sXG4gICAgICAgIG5hbWU6IG5hbWUudHJpbSgpXG4gICAgICB9KSk7XG4gICAgICBcbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLm9yZGVyLFxuICAgICAgICBwcm9kdWN0X25hbWVzOiBwcm9kdWN0TmFtZXMsXG4gICAgICAgIHByb2R1Y3RfaWRzOiBwcm9kdWN0SWRzLFxuICAgICAgICBwcm9kdWN0czogcHJvZHVjdHNcbiAgICAgIH07XG4gICAgfSk7XG4gICAgXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKG9yZGVyc1dpdGhQcm9kdWN0cyk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignR2V0IG9yZGVycyBlcnJvcjonLCBlcnJvcik7XG4gICAgLy8gUmV0dXJuIGVtcHR5IGFycmF5IGlmIHRhYmxlIGRvZXNuJ3QgZXhpc3QgeWV0XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFtdKTtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xuICB0cnkge1xuICAgIGNvbnN0IHsgb3JkZXJfaWQsIHByb2R1Y3RfaWRzLCBleHBpcmF0aW9uX2RheXMsIG9uZV90aW1lX3VzZSwgY3JlYXRlZF9ieSB9ID0gYXdhaXQgcmVxdWVzdC5qc29uKCk7XG4gICAgXG4gICAgaWYgKCFvcmRlcl9pZCB8fCAhcHJvZHVjdF9pZHMgfHwgcHJvZHVjdF9pZHMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ09yZGVyIElEIGFuZCBhdCBsZWFzdCBvbmUgcHJvZHVjdCBhcmUgcmVxdWlyZWQnIH0sIHsgc3RhdHVzOiA0MDAgfSk7XG4gICAgfVxuICAgIFxuICAgIGNvbnN0IHBvb2wgPSBhd2FpdCBnZXREYXRhYmFzZSgpO1xuICAgIFxuICAgIC8vIENoZWNrIGlmIG9yZGVyIGFscmVhZHkgZXhpc3RzXG4gICAgY29uc3QgZXhpc3RpbmdPcmRlclJlc3VsdCA9IGF3YWl0IHBvb2wucXVlcnkoJ1NFTEVDVCBpZCBGUk9NIG9yZGVycyBXSEVSRSBvcmRlcl9pZCA9ICQxJywgW29yZGVyX2lkXSk7XG4gICAgaWYgKGV4aXN0aW5nT3JkZXJSZXN1bHQucm93cy5sZW5ndGggPiAwKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ09yZGVyIElEIGFscmVhZHkgZXhpc3RzJyB9LCB7IHN0YXR1czogNDAwIH0pO1xuICAgIH1cbiAgICBcbiAgICAvLyBWZXJpZnkgYWxsIHByb2R1Y3RzIGV4aXN0XG4gICAgZm9yIChjb25zdCBwcm9kdWN0SWQgb2YgcHJvZHVjdF9pZHMpIHtcbiAgICAgIGNvbnN0IHByb2R1Y3RSZXN1bHQgPSBhd2FpdCBwb29sLnF1ZXJ5KCdTRUxFQ1QgaWQgRlJPTSBwcm9kdWN0cyBXSEVSRSBpZCA9ICQxJywgW3Byb2R1Y3RJZF0pO1xuICAgICAgaWYgKHByb2R1Y3RSZXN1bHQucm93cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6IGBQcm9kdWN0IHdpdGggSUQgJHtwcm9kdWN0SWR9IG5vdCBmb3VuZGAgfSwgeyBzdGF0dXM6IDQwNCB9KTtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8gQ2FsY3VsYXRlIGV4cGlyYXRpb24gZGF0ZVxuICAgIGNvbnN0IGV4cGlyYXRpb25EYXRlID0gZXhwaXJhdGlvbl9kYXlzIFxuICAgICAgPyBhZGREYXlzKG5ldyBEYXRlKCksIGV4cGlyYXRpb25fZGF5cykudG9JU09TdHJpbmcoKVxuICAgICAgOiBudWxsO1xuICAgIFxuICAgIC8vIENyZWF0ZSBvcmRlclxuICAgIGNvbnN0IG9yZGVyUmVzdWx0ID0gYXdhaXQgcG9vbC5xdWVyeShgXG4gICAgICBJTlNFUlQgSU5UTyBvcmRlcnMgKG9yZGVyX2lkLCBleHBpcmF0aW9uX2RhdGUsIG9uZV90aW1lX3VzZSwgY3JlYXRlZF9ieSlcbiAgICAgIFZBTFVFUyAoJDEsICQyLCAkMywgJDQpXG4gICAgICBSRVRVUk5JTkcgaWRcbiAgICBgLCBbb3JkZXJfaWQsIGV4cGlyYXRpb25EYXRlLCBvbmVfdGltZV91c2UgPz8gdHJ1ZSwgY3JlYXRlZF9ieV0pO1xuICAgIFxuICAgIGNvbnN0IG5ld09yZGVySWQgPSBvcmRlclJlc3VsdC5yb3dzWzBdLmlkO1xuICAgIFxuICAgIC8vIEFkZCBwcm9kdWN0cyB0byBvcmRlclxuICAgIGZvciAoY29uc3QgcHJvZHVjdElkIG9mIHByb2R1Y3RfaWRzKSB7XG4gICAgICBhd2FpdCBwb29sLnF1ZXJ5KGBcbiAgICAgICAgSU5TRVJUIElOVE8gb3JkZXJfcHJvZHVjdHMgKG9yZGVyX2lkLCBwcm9kdWN0X2lkKVxuICAgICAgICBWQUxVRVMgKCQxLCAkMilcbiAgICAgIGAsIFtuZXdPcmRlcklkLCBwcm9kdWN0SWRdKTtcbiAgICB9XG4gICAgXG4gICAgLy8gR2V0IHRoZSBjcmVhdGVkIG9yZGVyIHdpdGggcHJvZHVjdCBkZXRhaWxzXG4gICAgY29uc3QgbmV3T3JkZXJSZXN1bHQgPSBhd2FpdCBwb29sLnF1ZXJ5KGBcbiAgICAgIFNFTEVDVCBvLiosIFxuICAgICAgICAgICAgIFNUUklOR19BR0cocC5uYW1lLCAnLCcpIGFzIHByb2R1Y3RfbmFtZXMsXG4gICAgICAgICAgICAgU1RSSU5HX0FHRyhwLmlkOjp0ZXh0LCAnLCcpIGFzIHByb2R1Y3RfaWRzXG4gICAgICBGUk9NIG9yZGVycyBvXG4gICAgICBMRUZUIEpPSU4gb3JkZXJfcHJvZHVjdHMgb3AgT04gby5pZCA9IG9wLm9yZGVyX2lkXG4gICAgICBMRUZUIEpPSU4gcHJvZHVjdHMgcCBPTiBvcC5wcm9kdWN0X2lkID0gcC5pZFxuICAgICAgV0hFUkUgby5pZCA9ICQxXG4gICAgICBHUk9VUCBCWSBvLmlkLCBvLm9yZGVyX2lkLCBvLmNsYWltX3N0YXR1cywgby5jbGFpbV90aW1lc3RhbXAsIG8uY2xhaW1fY291bnQsIG8uZXhwaXJhdGlvbl9kYXRlLCBvLm9uZV90aW1lX3VzZSwgby5jcmVhdGVkX2J5LCBvLmNyZWF0ZWRfYXRcbiAgICBgLCBbbmV3T3JkZXJJZF0pO1xuICAgIFxuICAgIGNvbnN0IG5ld09yZGVyID0gbmV3T3JkZXJSZXN1bHQucm93c1swXTtcbiAgICBcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgLi4ubmV3T3JkZXIsXG4gICAgICBwcm9kdWN0X25hbWVzOiBuZXdPcmRlci5wcm9kdWN0X25hbWVzID8gbmV3T3JkZXIucHJvZHVjdF9uYW1lcy5zcGxpdCgnLCcpIDogW10sXG4gICAgICBwcm9kdWN0X2lkczogbmV3T3JkZXIucHJvZHVjdF9pZHMgPyBuZXdPcmRlci5wcm9kdWN0X2lkcy5zcGxpdCgnLCcpLm1hcChOdW1iZXIpIDogW11cbiAgICB9LCB7IHN0YXR1czogMjAxIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0NyZWF0ZSBvcmRlciBlcnJvcjonLCBlcnJvcik7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdJbnRlcm5hbCBzZXJ2ZXIgZXJyb3InIH0sIHsgc3RhdHVzOiA1MDAgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBVVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xuICB0cnkge1xuICAgIGNvbnN0IHsgaWQsIG9yZGVyX2lkLCBwcm9kdWN0X2lkcywgZXhwaXJhdGlvbl9kYXlzLCBvbmVfdGltZV91c2UgfSA9IGF3YWl0IHJlcXVlc3QuanNvbigpO1xuICAgIFxuXG4gICAgXG4gICAgaWYgKCFpZCB8fCAhb3JkZXJfaWQgfHwgIXByb2R1Y3RfaWRzIHx8IHByb2R1Y3RfaWRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdJRCwgb3JkZXIgSUQgYW5kIGF0IGxlYXN0IG9uZSBwcm9kdWN0IGFyZSByZXF1aXJlZCcgfSwgeyBzdGF0dXM6IDQwMCB9KTtcbiAgICB9XG4gICAgXG4gICAgY29uc3QgcG9vbCA9IGF3YWl0IGdldERhdGFiYXNlKCk7XG4gICAgXG4gICAgLy8gQ2hlY2sgaWYgb3JkZXIgZXhpc3RzXG4gICAgY29uc3QgZXhpc3RpbmdPcmRlclJlc3VsdCA9IGF3YWl0IHBvb2wucXVlcnkoJ1NFTEVDVCBpZCwgb25lX3RpbWVfdXNlLCBjbGFpbV9jb3VudCBGUk9NIG9yZGVycyBXSEVSRSBpZCA9ICQxJywgW2lkXSk7XG4gICAgaWYgKGV4aXN0aW5nT3JkZXJSZXN1bHQucm93cy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnT3JkZXIgbm90IGZvdW5kJyB9LCB7IHN0YXR1czogNDA0IH0pO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCBleGlzdGluZ09yZGVyID0gZXhpc3RpbmdPcmRlclJlc3VsdC5yb3dzWzBdO1xuXG4gICAgXG4gICAgLy8gVmVyaWZ5IGFsbCBwcm9kdWN0cyBleGlzdFxuICAgIGZvciAoY29uc3QgcHJvZHVjdElkIG9mIHByb2R1Y3RfaWRzKSB7XG4gICAgICBjb25zdCBwcm9kdWN0UmVzdWx0ID0gYXdhaXQgcG9vbC5xdWVyeSgnU0VMRUNUIGlkIEZST00gcHJvZHVjdHMgV0hFUkUgaWQgPSAkMScsIFtwcm9kdWN0SWRdKTtcbiAgICAgIGlmIChwcm9kdWN0UmVzdWx0LnJvd3MubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiBgUHJvZHVjdCB3aXRoIElEICR7cHJvZHVjdElkfSBub3QgZm91bmRgIH0sIHsgc3RhdHVzOiA0MDQgfSk7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIENhbGN1bGF0ZSBleHBpcmF0aW9uIGRhdGVcbiAgICBjb25zdCBleHBpcmF0aW9uRGF0ZSA9IGV4cGlyYXRpb25fZGF5cyBcbiAgICAgID8gYWRkRGF5cyhuZXcgRGF0ZSgpLCBleHBpcmF0aW9uX2RheXMpLnRvSVNPU3RyaW5nKClcbiAgICAgIDogbnVsbDtcbiAgICBcbiAgICAvLyBJZiBjaGFuZ2luZyBmcm9tIG11bHRpLXVzZSB0byBvbmUtdGltZSB1c2UsIHJlc2V0IGNsYWltIGNvdW50IHRvIGFsbG93IG9uZSBtb3JlIGNsYWltXG4gICAgbGV0IG5ld0NsYWltQ291bnQgPSBleGlzdGluZ09yZGVyLmNsYWltX2NvdW50O1xuICAgIGlmICghZXhpc3RpbmdPcmRlci5vbmVfdGltZV91c2UgJiYgb25lX3RpbWVfdXNlKSB7XG4gICAgICBuZXdDbGFpbUNvdW50ID0gMDtcblxuICAgIH1cbiAgICBcblxuICAgIFxuICAgIC8vIFVwZGF0ZSBvcmRlclxuICAgIGF3YWl0IHBvb2wucXVlcnkoYFxuICAgICAgVVBEQVRFIG9yZGVycyBcbiAgICAgIFNFVCBvcmRlcl9pZCA9ICQxLCBleHBpcmF0aW9uX2RhdGUgPSAkMiwgb25lX3RpbWVfdXNlID0gJDMsIGNsYWltX2NvdW50ID0gJDRcbiAgICAgIFdIRVJFIGlkID0gJDVcbiAgICBgLCBbb3JkZXJfaWQsIGV4cGlyYXRpb25EYXRlLCBvbmVfdGltZV91c2UgPz8gdHJ1ZSwgbmV3Q2xhaW1Db3VudCwgaWRdKTtcbiAgICBcbiAgICAvLyBSZW1vdmUgZXhpc3RpbmcgcHJvZHVjdCBhc3NvY2lhdGlvbnNcbiAgICBhd2FpdCBwb29sLnF1ZXJ5KCdERUxFVEUgRlJPTSBvcmRlcl9wcm9kdWN0cyBXSEVSRSBvcmRlcl9pZCA9ICQxJywgW2lkXSk7XG4gICAgXG4gICAgLy8gQWRkIG5ldyBwcm9kdWN0IGFzc29jaWF0aW9uc1xuICAgIGZvciAoY29uc3QgcHJvZHVjdElkIG9mIHByb2R1Y3RfaWRzKSB7XG4gICAgICBhd2FpdCBwb29sLnF1ZXJ5KGBcbiAgICAgICAgSU5TRVJUIElOVE8gb3JkZXJfcHJvZHVjdHMgKG9yZGVyX2lkLCBwcm9kdWN0X2lkKVxuICAgICAgICBWQUxVRVMgKCQxLCAkMilcbiAgICAgIGAsIFtpZCwgcHJvZHVjdElkXSk7XG4gICAgfVxuICAgIFxuICAgIC8vIEdldCB1cGRhdGVkIG9yZGVyIHdpdGggcHJvZHVjdCBkZXRhaWxzXG4gICAgY29uc3QgdXBkYXRlZE9yZGVyUmVzdWx0ID0gYXdhaXQgcG9vbC5xdWVyeShgXG4gICAgICBTRUxFQ1Qgby4qLCBcbiAgICAgICAgICAgICBTVFJJTkdfQUdHKHAubmFtZSwgJywnKSBhcyBwcm9kdWN0X25hbWVzLFxuICAgICAgICAgICAgIFNUUklOR19BR0cocC5pZDo6dGV4dCwgJywnKSBhcyBwcm9kdWN0X2lkc1xuICAgICAgRlJPTSBvcmRlcnMgb1xuICAgICAgTEVGVCBKT0lOIG9yZGVyX3Byb2R1Y3RzIG9wIE9OIG8uaWQgPSBvcC5vcmRlcl9pZFxuICAgICAgTEVGVCBKT0lOIHByb2R1Y3RzIHAgT04gb3AucHJvZHVjdF9pZCA9IHAuaWRcbiAgICAgIFdIRVJFIG8uaWQgPSAkMVxuICAgICAgR1JPVVAgQlkgby5pZCwgby5vcmRlcl9pZCwgby5jbGFpbV9zdGF0dXMsIG8uY2xhaW1fdGltZXN0YW1wLCBvLmNsYWltX2NvdW50LCBvLmV4cGlyYXRpb25fZGF0ZSwgby5vbmVfdGltZV91c2UsIG8uY3JlYXRlZF9ieSwgby5jcmVhdGVkX2F0XG4gICAgYCwgW2lkXSk7XG4gICAgXG4gICAgY29uc3QgdXBkYXRlZE9yZGVyID0gdXBkYXRlZE9yZGVyUmVzdWx0LnJvd3NbMF07XG4gICAgXG5cbiAgICBcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgLi4udXBkYXRlZE9yZGVyLFxuICAgICAgcHJvZHVjdF9uYW1lczogdXBkYXRlZE9yZGVyLnByb2R1Y3RfbmFtZXMgPyB1cGRhdGVkT3JkZXIucHJvZHVjdF9uYW1lcy5zcGxpdCgnLCcpIDogW10sXG4gICAgICBwcm9kdWN0X2lkczogdXBkYXRlZE9yZGVyLnByb2R1Y3RfaWRzID8gdXBkYXRlZE9yZGVyLnByb2R1Y3RfaWRzLnNwbGl0KCcsJykubWFwKE51bWJlcikgOiBbXVxuICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1VwZGF0ZSBvcmRlciBlcnJvcjonLCBlcnJvcik7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdJbnRlcm5hbCBzZXJ2ZXIgZXJyb3InIH0sIHsgc3RhdHVzOiA1MDAgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIERFTEVURShyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xuICB0cnkge1xuICAgIGNvbnN0IHsgc2VhcmNoUGFyYW1zIH0gPSBuZXcgVVJMKHJlcXVlc3QudXJsKTtcbiAgICBjb25zdCBpZCA9IHNlYXJjaFBhcmFtcy5nZXQoJ2lkJyk7XG4gICAgXG4gICAgaWYgKCFpZCkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdPcmRlciBJRCBpcyByZXF1aXJlZCcgfSwgeyBzdGF0dXM6IDQwMCB9KTtcbiAgICB9XG4gICAgXG4gICAgY29uc3QgcG9vbCA9IGF3YWl0IGdldERhdGFiYXNlKCk7XG4gICAgXG4gICAgLy8gRGVsZXRlIG9yZGVyICh0aGlzIHdpbGwgY2FzY2FkZSBkZWxldGUgb3JkZXJfcHJvZHVjdHMgZHVlIHRvIGZvcmVpZ24ga2V5KVxuICAgIGF3YWl0IHBvb2wucXVlcnkoJ0RFTEVURSBGUk9NIG9yZGVycyBXSEVSRSBpZCA9ICQxJywgW2lkXSk7XG4gICAgXG4gICAgLy8gQWxzbyBleHBsaWNpdGx5IGRlbGV0ZSBvcmRlcl9wcm9kdWN0cyAoaW4gY2FzZSBjYXNjYWRlIGRvZXNuJ3Qgd29yaylcbiAgICBhd2FpdCBwb29sLnF1ZXJ5KCdERUxFVEUgRlJPTSBvcmRlcl9wcm9kdWN0cyBXSEVSRSBvcmRlcl9pZCA9ICQxJywgW2lkXSk7XG4gICAgXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgbWVzc2FnZTogJ09yZGVyIGRlbGV0ZWQgc3VjY2Vzc2Z1bGx5JyB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdEZWxldGUgb3JkZXIgZXJyb3I6JywgZXJyb3IpO1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yJyB9LCB7IHN0YXR1czogNTAwIH0pO1xuICB9XG59XG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiZ2V0RGF0YWJhc2UiLCJhZGREYXlzIiwiR0VUIiwicG9vbCIsInJlc3VsdCIsInF1ZXJ5Iiwib3JkZXJzIiwicm93cyIsIm9yZGVyc1dpdGhQcm9kdWN0cyIsIm1hcCIsIm9yZGVyIiwicHJvZHVjdE5hbWVzIiwicHJvZHVjdF9uYW1lcyIsInNwbGl0IiwicHJvZHVjdElkcyIsInByb2R1Y3RfaWRzIiwiTnVtYmVyIiwicHJvZHVjdHMiLCJuYW1lIiwiaW5kZXgiLCJpZCIsInRyaW0iLCJqc29uIiwiZXJyb3IiLCJjb25zb2xlIiwiUE9TVCIsInJlcXVlc3QiLCJvcmRlcl9pZCIsImV4cGlyYXRpb25fZGF5cyIsIm9uZV90aW1lX3VzZSIsImNyZWF0ZWRfYnkiLCJsZW5ndGgiLCJzdGF0dXMiLCJleGlzdGluZ09yZGVyUmVzdWx0IiwicHJvZHVjdElkIiwicHJvZHVjdFJlc3VsdCIsImV4cGlyYXRpb25EYXRlIiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwib3JkZXJSZXN1bHQiLCJuZXdPcmRlcklkIiwibmV3T3JkZXJSZXN1bHQiLCJuZXdPcmRlciIsIlBVVCIsImV4aXN0aW5nT3JkZXIiLCJuZXdDbGFpbUNvdW50IiwiY2xhaW1fY291bnQiLCJ1cGRhdGVkT3JkZXJSZXN1bHQiLCJ1cGRhdGVkT3JkZXIiLCJERUxFVEUiLCJzZWFyY2hQYXJhbXMiLCJVUkwiLCJ1cmwiLCJnZXQiLCJtZXNzYWdlIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/orders/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/config.ts":
/*!***********************!*\
  !*** ./lib/config.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/**\n * Configuration utility for environment variables\n * Provides type-safe access to environment configuration\n */ class ConfigManager {\n    constructor(){\n        this.config = this.loadConfig();\n        this.validateConfig();\n    }\n    loadConfig() {\n        return {\n            jwtSecret: process.env.JWT_SECRET || this.getDefaultJwtSecret(),\n            databaseUrl: this.getDatabaseUrl(),\n            postgresConfig: this.getPostgresConfig(),\n            forceAdminPasswordChange: process.env.FORCE_ADMIN_PASSWORD_CHANGE === 'true',\n            defaultAdminUsername: process.env.DEFAULT_ADMIN_USERNAME || 'admin',\n            defaultAdminPassword: process.env.DEFAULT_ADMIN_PASSWORD || 'password',\n            passwordMinLength: parseInt(process.env.PASSWORD_MIN_LENGTH || '8'),\n            passwordMaxLength: parseInt(process.env.PASSWORD_MAX_LENGTH || '128'),\n            rateLimitWindowMs: parseInt(process.env.RATE_LIMIT_WINDOW_MS || '900000'),\n            rateLimitMaxRequests: parseInt(process.env.RATE_LIMIT_MAX_REQUESTS || '100'),\n            strictRateLimitWindowMs: parseInt(process.env.STRICT_RATE_LIMIT_WINDOW_MS || '900000'),\n            strictRateLimitMaxRequests: parseInt(process.env.STRICT_RATE_LIMIT_MAX_REQUESTS || '10'),\n            nodeEnv: \"development\" || 0,\n            port: parseInt(process.env.PORT || '3000'),\n            bcryptRounds: parseInt(process.env.BCRYPT_ROUNDS || '12'),\n            sessionTimeoutHours: parseInt(process.env.SESSION_TIMEOUT_HOURS || '24')\n        };\n    }\n    getDefaultJwtSecret() {\n        if (this.isProduction()) {\n            throw new Error('JWT_SECRET environment variable is required in production. ' + 'Generate a secure secret using: openssl rand -base64 32');\n        }\n        console.warn('⚠️  Using default JWT secret for development. Set JWT_SECRET in production!');\n        return 'dev-jwt-secret-change-for-production-use';\n    }\n    validateConfig() {\n        const errors = [];\n        // Validate JWT secret strength\n        if (this.config.jwtSecret.length < 32) {\n            errors.push('JWT_SECRET must be at least 32 characters long');\n        }\n        if (this.isProduction() && this.config.jwtSecret.includes('dev-') || this.config.jwtSecret.includes('change-') || this.config.jwtSecret === 'your-secret-key') {\n            errors.push('JWT_SECRET must be changed from default value in production');\n        }\n        // Validate numeric values\n        if (this.config.rateLimitWindowMs < 60000) {\n            errors.push('RATE_LIMIT_WINDOW_MS must be at least 60000 (1 minute)');\n        }\n        if (this.config.rateLimitMaxRequests < 10) {\n            errors.push('RATE_LIMIT_MAX_REQUESTS must be at least 10');\n        }\n        if (this.config.bcryptRounds < 10 || this.config.bcryptRounds > 15) {\n            errors.push('BCRYPT_ROUNDS must be between 10 and 15');\n        }\n        if (errors.length > 0) {\n            throw new Error(`Configuration validation failed:\\n${errors.join('\\n')}`);\n        }\n    }\n    isProduction() {\n        return this.config.nodeEnv === 'production';\n    }\n    isDevelopment() {\n        return this.config.nodeEnv === 'development';\n    }\n    get() {\n        return {\n            ...this.config\n        };\n    }\n    getJwtSecret() {\n        return this.config.jwtSecret;\n    }\n    getDatabaseUrl() {\n        return process.env.DATABASE_URL || '';\n    }\n    getPostgresConfig() {\n        return {\n            host: process.env.POSTGRES_HOST || 'localhost',\n            port: parseInt(process.env.POSTGRES_PORT || '5432'),\n            database: process.env.POSTGRES_DB || 'selfclaimlink',\n            user: process.env.POSTGRES_USER || 'postgres',\n            password: process.env.POSTGRES_PASSWORD || ''\n        };\n    }\n    shouldForceAdminPasswordChange() {\n        return this.config.forceAdminPasswordChange;\n    }\n    getRateLimitConfig() {\n        return {\n            windowMs: this.config.rateLimitWindowMs,\n            max: this.config.rateLimitMaxRequests\n        };\n    }\n    getBcryptRounds() {\n        return this.config.bcryptRounds;\n    }\n    getSessionTimeoutMs() {\n        return this.config.sessionTimeoutHours * 60 * 60 * 1000;\n    }\n    getDefaultAdminUsername() {\n        return this.config.defaultAdminUsername;\n    }\n    getDefaultAdminPassword() {\n        return this.config.defaultAdminPassword;\n    }\n    getPasswordMinLength() {\n        return this.config.passwordMinLength;\n    }\n    getPasswordMaxLength() {\n        return this.config.passwordMaxLength;\n    }\n    getStrictRateLimitConfig() {\n        return {\n            windowMs: this.config.strictRateLimitWindowMs,\n            max: this.config.strictRateLimitMaxRequests\n        };\n    }\n}\n// Export singleton instance\nconst config = new ConfigManager();\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (config);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0FBQ2Msb0JBQW9CO0lBQ3pDO0lBRU9xRCwwQkFBa0M7UUFDdkMsT0FBTyxJQUFJLENBQUNuRSxNQUFNLENBQUNnQixvQkFBb0I7SUFDekM7SUFFT29ELHVCQUErQjtRQUNwQyxPQUFPLElBQUksQ0FBQ3BFLE1BQU0sQ0FBQ2tCLGlCQUFpQjtJQUN0QztJQUVPbUQsdUJBQStCO1FBQ3BDLE9BQU8sSUFBSSxDQUFDckUsTUFBTSxDQUFDcUIsaUJBQWlCO0lBQ3RDO0lBRU9pRCwyQkFBOEQ7UUFDbkUsT0FBTztZQUNMUixVQUFVLElBQUksQ0FBQzlELE1BQU0sQ0FBQzJCLHVCQUF1QjtZQUM3Q29DLEtBQUssSUFBSSxDQUFDL0QsTUFBTSxDQUFDNkIsMEJBQTBCO1FBQzdDO0lBQ0Y7QUFDRjtBQUVBLDRCQUE0QjtBQUNyQixNQUFNN0IsU0FBUyxJQUFJRCxnQkFBZ0I7QUFDMUMsaUVBQWVDLE1BQU1BLEVBQUMiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcSW1hbmdcXERvY3VtZW50c1xcR2l0SHViXFxzZWxmLWNsYWltLWxpbmtcXGxpYlxcY29uZmlnLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29uZmlndXJhdGlvbiB1dGlsaXR5IGZvciBlbnZpcm9ubWVudCB2YXJpYWJsZXNcbiAqIFByb3ZpZGVzIHR5cGUtc2FmZSBhY2Nlc3MgdG8gZW52aXJvbm1lbnQgY29uZmlndXJhdGlvblxuICovXG5cbmV4cG9ydCBpbnRlcmZhY2UgQXBwQ29uZmlnIHtcbiAgand0U2VjcmV0OiBzdHJpbmc7XG4gIGRhdGFiYXNlVXJsOiBzdHJpbmc7XG4gIHBvc3RncmVzQ29uZmlnOiB7XG4gICAgaG9zdDogc3RyaW5nO1xuICAgIHBvcnQ6IG51bWJlcjtcbiAgICBkYXRhYmFzZTogc3RyaW5nO1xuICAgIHVzZXI6IHN0cmluZztcbiAgICBwYXNzd29yZDogc3RyaW5nO1xuICB9O1xuICBmb3JjZUFkbWluUGFzc3dvcmRDaGFuZ2U6IGJvb2xlYW47XG4gIGRlZmF1bHRBZG1pblVzZXJuYW1lOiBzdHJpbmc7XG4gIGRlZmF1bHRBZG1pblBhc3N3b3JkOiBzdHJpbmc7XG4gIHBhc3N3b3JkTWluTGVuZ3RoOiBudW1iZXI7XG4gIHBhc3N3b3JkTWF4TGVuZ3RoOiBudW1iZXI7XG4gIHJhdGVMaW1pdFdpbmRvd01zOiBudW1iZXI7XG4gIHJhdGVMaW1pdE1heFJlcXVlc3RzOiBudW1iZXI7XG4gIHN0cmljdFJhdGVMaW1pdFdpbmRvd01zOiBudW1iZXI7XG4gIHN0cmljdFJhdGVMaW1pdE1heFJlcXVlc3RzOiBudW1iZXI7XG4gIG5vZGVFbnY6IHN0cmluZztcbiAgcG9ydDogbnVtYmVyO1xuICBiY3J5cHRSb3VuZHM6IG51bWJlcjtcbiAgc2Vzc2lvblRpbWVvdXRIb3VyczogbnVtYmVyO1xufVxuXG5jbGFzcyBDb25maWdNYW5hZ2VyIHtcbiAgcHJpdmF0ZSBjb25maWc6IEFwcENvbmZpZztcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmNvbmZpZyA9IHRoaXMubG9hZENvbmZpZygpO1xuICAgIHRoaXMudmFsaWRhdGVDb25maWcoKTtcbiAgfVxuXG4gIHByaXZhdGUgbG9hZENvbmZpZygpOiBBcHBDb25maWcge1xuICAgIHJldHVybiB7XG4gICAgICBqd3RTZWNyZXQ6IHByb2Nlc3MuZW52LkpXVF9TRUNSRVQgfHwgdGhpcy5nZXREZWZhdWx0Snd0U2VjcmV0KCksXG4gICAgICBkYXRhYmFzZVVybDogdGhpcy5nZXREYXRhYmFzZVVybCgpLFxuICAgICAgcG9zdGdyZXNDb25maWc6IHRoaXMuZ2V0UG9zdGdyZXNDb25maWcoKSxcbiAgICAgIGZvcmNlQWRtaW5QYXNzd29yZENoYW5nZTogcHJvY2Vzcy5lbnYuRk9SQ0VfQURNSU5fUEFTU1dPUkRfQ0hBTkdFID09PSAndHJ1ZScsXG4gICAgICBkZWZhdWx0QWRtaW5Vc2VybmFtZTogcHJvY2Vzcy5lbnYuREVGQVVMVF9BRE1JTl9VU0VSTkFNRSB8fCAnYWRtaW4nLFxuICAgICAgZGVmYXVsdEFkbWluUGFzc3dvcmQ6IHByb2Nlc3MuZW52LkRFRkFVTFRfQURNSU5fUEFTU1dPUkQgfHwgJ3Bhc3N3b3JkJyxcbiAgICAgIHBhc3N3b3JkTWluTGVuZ3RoOiBwYXJzZUludChwcm9jZXNzLmVudi5QQVNTV09SRF9NSU5fTEVOR1RIIHx8ICc4JyksXG4gICAgICBwYXNzd29yZE1heExlbmd0aDogcGFyc2VJbnQocHJvY2Vzcy5lbnYuUEFTU1dPUkRfTUFYX0xFTkdUSCB8fCAnMTI4JyksXG4gICAgICByYXRlTGltaXRXaW5kb3dNczogcGFyc2VJbnQocHJvY2Vzcy5lbnYuUkFURV9MSU1JVF9XSU5ET1dfTVMgfHwgJzkwMDAwMCcpLFxuICAgICAgcmF0ZUxpbWl0TWF4UmVxdWVzdHM6IHBhcnNlSW50KHByb2Nlc3MuZW52LlJBVEVfTElNSVRfTUFYX1JFUVVFU1RTIHx8ICcxMDAnKSxcbiAgICAgIHN0cmljdFJhdGVMaW1pdFdpbmRvd01zOiBwYXJzZUludChwcm9jZXNzLmVudi5TVFJJQ1RfUkFURV9MSU1JVF9XSU5ET1dfTVMgfHwgJzkwMDAwMCcpLFxuICAgICAgc3RyaWN0UmF0ZUxpbWl0TWF4UmVxdWVzdHM6IHBhcnNlSW50KHByb2Nlc3MuZW52LlNUUklDVF9SQVRFX0xJTUlUX01BWF9SRVFVRVNUUyB8fCAnMTAnKSxcbiAgICAgIG5vZGVFbnY6IHByb2Nlc3MuZW52Lk5PREVfRU5WIHx8ICdkZXZlbG9wbWVudCcsXG4gICAgICBwb3J0OiBwYXJzZUludChwcm9jZXNzLmVudi5QT1JUIHx8ICczMDAwJyksXG4gICAgICBiY3J5cHRSb3VuZHM6IHBhcnNlSW50KHByb2Nlc3MuZW52LkJDUllQVF9ST1VORFMgfHwgJzEyJyksXG4gICAgICBzZXNzaW9uVGltZW91dEhvdXJzOiBwYXJzZUludChwcm9jZXNzLmVudi5TRVNTSU9OX1RJTUVPVVRfSE9VUlMgfHwgJzI0JylcbiAgICB9O1xuICB9XG5cbiAgcHJpdmF0ZSBnZXREZWZhdWx0Snd0U2VjcmV0KCk6IHN0cmluZyB7XG4gICAgaWYgKHRoaXMuaXNQcm9kdWN0aW9uKCkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgJ0pXVF9TRUNSRVQgZW52aXJvbm1lbnQgdmFyaWFibGUgaXMgcmVxdWlyZWQgaW4gcHJvZHVjdGlvbi4gJyArXG4gICAgICAgICdHZW5lcmF0ZSBhIHNlY3VyZSBzZWNyZXQgdXNpbmc6IG9wZW5zc2wgcmFuZCAtYmFzZTY0IDMyJ1xuICAgICAgKTtcbiAgICB9XG4gICAgY29uc29sZS53YXJuKCfimqDvuI8gIFVzaW5nIGRlZmF1bHQgSldUIHNlY3JldCBmb3IgZGV2ZWxvcG1lbnQuIFNldCBKV1RfU0VDUkVUIGluIHByb2R1Y3Rpb24hJyk7XG4gICAgcmV0dXJuICdkZXYtand0LXNlY3JldC1jaGFuZ2UtZm9yLXByb2R1Y3Rpb24tdXNlJztcbiAgfVxuXG4gIHByaXZhdGUgdmFsaWRhdGVDb25maWcoKTogdm9pZCB7XG4gICAgY29uc3QgZXJyb3JzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgLy8gVmFsaWRhdGUgSldUIHNlY3JldCBzdHJlbmd0aFxuICAgIGlmICh0aGlzLmNvbmZpZy5qd3RTZWNyZXQubGVuZ3RoIDwgMzIpIHtcbiAgICAgIGVycm9ycy5wdXNoKCdKV1RfU0VDUkVUIG11c3QgYmUgYXQgbGVhc3QgMzIgY2hhcmFjdGVycyBsb25nJyk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuaXNQcm9kdWN0aW9uKCkgJiYgdGhpcy5jb25maWcuand0U2VjcmV0LmluY2x1ZGVzKCdkZXYtJykgfHwgXG4gICAgICAgIHRoaXMuY29uZmlnLmp3dFNlY3JldC5pbmNsdWRlcygnY2hhbmdlLScpIHx8XG4gICAgICAgIHRoaXMuY29uZmlnLmp3dFNlY3JldCA9PT0gJ3lvdXItc2VjcmV0LWtleScpIHtcbiAgICAgIGVycm9ycy5wdXNoKCdKV1RfU0VDUkVUIG11c3QgYmUgY2hhbmdlZCBmcm9tIGRlZmF1bHQgdmFsdWUgaW4gcHJvZHVjdGlvbicpO1xuICAgIH1cblxuICAgIC8vIFZhbGlkYXRlIG51bWVyaWMgdmFsdWVzXG4gICAgaWYgKHRoaXMuY29uZmlnLnJhdGVMaW1pdFdpbmRvd01zIDwgNjAwMDApIHtcbiAgICAgIGVycm9ycy5wdXNoKCdSQVRFX0xJTUlUX1dJTkRPV19NUyBtdXN0IGJlIGF0IGxlYXN0IDYwMDAwICgxIG1pbnV0ZSknKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5jb25maWcucmF0ZUxpbWl0TWF4UmVxdWVzdHMgPCAxMCkge1xuICAgICAgZXJyb3JzLnB1c2goJ1JBVEVfTElNSVRfTUFYX1JFUVVFU1RTIG11c3QgYmUgYXQgbGVhc3QgMTAnKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5jb25maWcuYmNyeXB0Um91bmRzIDwgMTAgfHwgdGhpcy5jb25maWcuYmNyeXB0Um91bmRzID4gMTUpIHtcbiAgICAgIGVycm9ycy5wdXNoKCdCQ1JZUFRfUk9VTkRTIG11c3QgYmUgYmV0d2VlbiAxMCBhbmQgMTUnKTtcbiAgICB9XG5cbiAgICBpZiAoZXJyb3JzLmxlbmd0aCA+IDApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgQ29uZmlndXJhdGlvbiB2YWxpZGF0aW9uIGZhaWxlZDpcXG4ke2Vycm9ycy5qb2luKCdcXG4nKX1gKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgaXNQcm9kdWN0aW9uKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmNvbmZpZy5ub2RlRW52ID09PSAncHJvZHVjdGlvbic7XG4gIH1cblxuICBwdWJsaWMgaXNEZXZlbG9wbWVudCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5jb25maWcubm9kZUVudiA9PT0gJ2RldmVsb3BtZW50JztcbiAgfVxuXG4gIHB1YmxpYyBnZXQoKTogQXBwQ29uZmlnIHtcbiAgICByZXR1cm4geyAuLi50aGlzLmNvbmZpZyB9O1xuICB9XG5cbiAgcHVibGljIGdldEp3dFNlY3JldCgpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLmNvbmZpZy5qd3RTZWNyZXQ7XG4gIH1cblxuXG5cbiAgcHVibGljIGdldERhdGFiYXNlVXJsKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHByb2Nlc3MuZW52LkRBVEFCQVNFX1VSTCB8fCAnJztcbiAgfVxuXG4gIHB1YmxpYyBnZXRQb3N0Z3Jlc0NvbmZpZygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgaG9zdDogcHJvY2Vzcy5lbnYuUE9TVEdSRVNfSE9TVCB8fCAnbG9jYWxob3N0JyxcbiAgICAgIHBvcnQ6IHBhcnNlSW50KHByb2Nlc3MuZW52LlBPU1RHUkVTX1BPUlQgfHwgJzU0MzInKSxcbiAgICAgIGRhdGFiYXNlOiBwcm9jZXNzLmVudi5QT1NUR1JFU19EQiB8fCAnc2VsZmNsYWltbGluaycsXG4gICAgICB1c2VyOiBwcm9jZXNzLmVudi5QT1NUR1JFU19VU0VSIHx8ICdwb3N0Z3JlcycsXG4gICAgICBwYXNzd29yZDogcHJvY2Vzcy5lbnYuUE9TVEdSRVNfUEFTU1dPUkQgfHwgJydcbiAgICB9O1xuICB9XG5cbiAgcHVibGljIHNob3VsZEZvcmNlQWRtaW5QYXNzd29yZENoYW5nZSgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5jb25maWcuZm9yY2VBZG1pblBhc3N3b3JkQ2hhbmdlO1xuICB9XG5cbiAgcHVibGljIGdldFJhdGVMaW1pdENvbmZpZygpOiB7IHdpbmRvd01zOiBudW1iZXI7IG1heDogbnVtYmVyIH0ge1xuICAgIHJldHVybiB7XG4gICAgICB3aW5kb3dNczogdGhpcy5jb25maWcucmF0ZUxpbWl0V2luZG93TXMsXG4gICAgICBtYXg6IHRoaXMuY29uZmlnLnJhdGVMaW1pdE1heFJlcXVlc3RzLFxuICAgIH07XG4gIH1cblxuICBwdWJsaWMgZ2V0QmNyeXB0Um91bmRzKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuY29uZmlnLmJjcnlwdFJvdW5kcztcbiAgfVxuXG4gIHB1YmxpYyBnZXRTZXNzaW9uVGltZW91dE1zKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuY29uZmlnLnNlc3Npb25UaW1lb3V0SG91cnMgKiA2MCAqIDYwICogMTAwMDtcbiAgfVxuXG4gIHB1YmxpYyBnZXREZWZhdWx0QWRtaW5Vc2VybmFtZSgpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLmNvbmZpZy5kZWZhdWx0QWRtaW5Vc2VybmFtZTtcbiAgfVxuXG4gIHB1YmxpYyBnZXREZWZhdWx0QWRtaW5QYXNzd29yZCgpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLmNvbmZpZy5kZWZhdWx0QWRtaW5QYXNzd29yZDtcbiAgfVxuXG4gIHB1YmxpYyBnZXRQYXNzd29yZE1pbkxlbmd0aCgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLmNvbmZpZy5wYXNzd29yZE1pbkxlbmd0aDtcbiAgfVxuXG4gIHB1YmxpYyBnZXRQYXNzd29yZE1heExlbmd0aCgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLmNvbmZpZy5wYXNzd29yZE1heExlbmd0aDtcbiAgfVxuXG4gIHB1YmxpYyBnZXRTdHJpY3RSYXRlTGltaXRDb25maWcoKTogeyB3aW5kb3dNczogbnVtYmVyOyBtYXg6IG51bWJlciB9IHtcbiAgICByZXR1cm4ge1xuICAgICAgd2luZG93TXM6IHRoaXMuY29uZmlnLnN0cmljdFJhdGVMaW1pdFdpbmRvd01zLFxuICAgICAgbWF4OiB0aGlzLmNvbmZpZy5zdHJpY3RSYXRlTGltaXRNYXhSZXF1ZXN0cyxcbiAgICB9O1xuICB9XG59XG5cbi8vIEV4cG9ydCBzaW5nbGV0b24gaW5zdGFuY2VcbmV4cG9ydCBjb25zdCBjb25maWcgPSBuZXcgQ29uZmlnTWFuYWdlcigpO1xuZXhwb3J0IGRlZmF1bHQgY29uZmlnO1xuIl0sIm5hbWVzIjpbIkNvbmZpZ01hbmFnZXIiLCJjb25maWciLCJsb2FkQ29uZmlnIiwidmFsaWRhdGVDb25maWciLCJqd3RTZWNyZXQiLCJwcm9jZXNzIiwiZW52IiwiSldUX1NFQ1JFVCIsImdldERlZmF1bHRKd3RTZWNyZXQiLCJkYXRhYmFzZVVybCIsImdldERhdGFiYXNlVXJsIiwicG9zdGdyZXNDb25maWciLCJnZXRQb3N0Z3Jlc0NvbmZpZyIsImZvcmNlQWRtaW5QYXNzd29yZENoYW5nZSIsIkZPUkNFX0FETUlOX1BBU1NXT1JEX0NIQU5HRSIsImRlZmF1bHRBZG1pblVzZXJuYW1lIiwiREVGQVVMVF9BRE1JTl9VU0VSTkFNRSIsImRlZmF1bHRBZG1pblBhc3N3b3JkIiwiREVGQVVMVF9BRE1JTl9QQVNTV09SRCIsInBhc3N3b3JkTWluTGVuZ3RoIiwicGFyc2VJbnQiLCJQQVNTV09SRF9NSU5fTEVOR1RIIiwicGFzc3dvcmRNYXhMZW5ndGgiLCJQQVNTV09SRF9NQVhfTEVOR1RIIiwicmF0ZUxpbWl0V2luZG93TXMiLCJSQVRFX0xJTUlUX1dJTkRPV19NUyIsInJhdGVMaW1pdE1heFJlcXVlc3RzIiwiUkFURV9MSU1JVF9NQVhfUkVRVUVTVFMiLCJzdHJpY3RSYXRlTGltaXRXaW5kb3dNcyIsIlNUUklDVF9SQVRFX0xJTUlUX1dJTkRPV19NUyIsInN0cmljdFJhdGVMaW1pdE1heFJlcXVlc3RzIiwiU1RSSUNUX1JBVEVfTElNSVRfTUFYX1JFUVVFU1RTIiwibm9kZUVudiIsInBvcnQiLCJQT1JUIiwiYmNyeXB0Um91bmRzIiwiQkNSWVBUX1JPVU5EUyIsInNlc3Npb25UaW1lb3V0SG91cnMiLCJTRVNTSU9OX1RJTUVPVVRfSE9VUlMiLCJpc1Byb2R1Y3Rpb24iLCJFcnJvciIsImNvbnNvbGUiLCJ3YXJuIiwiZXJyb3JzIiwibGVuZ3RoIiwicHVzaCIsImluY2x1ZGVzIiwiam9pbiIsImlzRGV2ZWxvcG1lbnQiLCJnZXQiLCJnZXRKd3RTZWNyZXQiLCJEQVRBQkFTRV9VUkwiLCJob3N0IiwiUE9TVEdSRVNfSE9TVCIsIlBPU1RHUkVTX1BPUlQiLCJkYXRhYmFzZSIsIlBPU1RHUkVTX0RCIiwidXNlciIsIlBPU1RHUkVTX1VTRVIiLCJwYXNzd29yZCIsIlBPU1RHUkVTX1BBU1NXT1JEIiwic2hvdWxkRm9yY2VBZG1pblBhc3N3b3JkQ2hhbmdlIiwiZ2V0UmF0ZUxpbWl0Q29uZmlnIiwid2luZG93TXMiLCJtYXgiLCJnZXRCY3J5cHRSb3VuZHMiLCJnZXRTZXNzaW9uVGltZW91dE1zIiwiZ2V0RGVmYXVsdEFkbWluVXNlcm5hbWUiLCJnZXREZWZhdWx0QWRtaW5QYXNzd29yZCIsImdldFBhc3N3b3JkTWluTGVuZ3RoIiwiZ2V0UGFzc3dvcmRNYXhMZW5ndGgiLCJnZXRTdHJpY3RSYXRlTGltaXRDb25maWciXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/config.ts\n");

/***/ }),

/***/ "(rsc)/./lib/database.ts":
/*!*************************!*\
  !*** ./lib/database.ts ***!
  \*************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   closeDatabase: () => (/* binding */ closeDatabase),\n/* harmony export */   getAdminByUsername: () => (/* binding */ getAdminByUsername),\n/* harmony export */   getDatabase: () => (/* binding */ getDatabase),\n/* harmony export */   isAdminLocked: () => (/* binding */ isAdminLocked),\n/* harmony export */   recordFailedLogin: () => (/* binding */ recordFailedLogin),\n/* harmony export */   resetFailedLogins: () => (/* binding */ resetFailedLogins),\n/* harmony export */   updateAdminPassword: () => (/* binding */ updateAdminPassword)\n/* harmony export */ });\n/* harmony import */ var pg__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! pg */ \"pg\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! bcryptjs */ \"(rsc)/./node_modules/bcryptjs/index.js\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(bcryptjs__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./config */ \"(rsc)/./lib/config.ts\");\n/* harmony import */ var _logger__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./logger */ \"(rsc)/./lib/logger.ts\");\n/* harmony import */ var _errorHandler__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./errorHandler */ \"(rsc)/./lib/errorHandler.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([pg__WEBPACK_IMPORTED_MODULE_0__]);\npg__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n/**\n * PostgreSQL Database Layer\n * Production-ready database implementation\n */ \n\n\n\n\nlet pool = null;\nasync function getDatabase() {\n    if (pool) return pool;\n    const postgresConfig = _config__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getPostgresConfig();\n    pool = new pg__WEBPACK_IMPORTED_MODULE_0__.Pool({\n        host: postgresConfig.host,\n        port: postgresConfig.port,\n        database: postgresConfig.database,\n        user: postgresConfig.user,\n        password: postgresConfig.password,\n        max: 20,\n        idleTimeoutMillis: 30000,\n        connectionTimeoutMillis: 2000,\n        ssl:  false ? 0 : false\n    });\n    // Test connection\n    try {\n        const client = await pool.connect();\n        await client.query('SELECT NOW()');\n        client.release();\n        _logger__WEBPACK_IMPORTED_MODULE_3__.logger.info('PostgreSQL database connection established');\n    } catch (error) {\n        _logger__WEBPACK_IMPORTED_MODULE_3__.logger.error('Failed to connect to PostgreSQL:', {\n            error\n        });\n        throw new _errorHandler__WEBPACK_IMPORTED_MODULE_4__.DatabaseError('PostgreSQL connection failed');\n    }\n    // Initialize database schema\n    await initializeDatabase();\n    return pool;\n}\nasync function initializeDatabase() {\n    if (!pool) throw new _errorHandler__WEBPACK_IMPORTED_MODULE_4__.DatabaseError('Database pool not established');\n    const client = await pool.connect();\n    try {\n        // Create tables with proper PostgreSQL syntax\n        await client.query(`\n      CREATE TABLE IF NOT EXISTS products (\n        id SERIAL PRIMARY KEY,\n        name VARCHAR(255) NOT NULL,\n        description TEXT,\n        download_link TEXT NOT NULL,\n        image_url TEXT,\n        created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n      );\n    `);\n        await client.query(`\n      CREATE TABLE IF NOT EXISTS orders (\n        id SERIAL PRIMARY KEY,\n        order_id VARCHAR(255) UNIQUE NOT NULL,\n        claim_status VARCHAR(50) DEFAULT 'available',\n        claim_timestamp TIMESTAMP,\n        claim_count INTEGER DEFAULT 0,\n        expiration_date TIMESTAMP,\n        one_time_use BOOLEAN DEFAULT true,\n        created_by VARCHAR(255),\n        created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n      );\n    `);\n        await client.query(`\n      CREATE TABLE IF NOT EXISTS order_products (\n        id SERIAL PRIMARY KEY,\n        order_id INTEGER REFERENCES orders(id) ON DELETE CASCADE,\n        product_id INTEGER REFERENCES products(id) ON DELETE CASCADE,\n        created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n        UNIQUE(order_id, product_id)\n      );\n    `);\n        await client.query(`\n      CREATE TABLE IF NOT EXISTS admins (\n        id SERIAL PRIMARY KEY,\n        username VARCHAR(255) UNIQUE NOT NULL,\n        password_hash TEXT NOT NULL,\n        must_change_password BOOLEAN DEFAULT false,\n        failed_login_attempts INTEGER DEFAULT 0,\n        locked_until TIMESTAMP,\n        created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n        updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n      );\n    `);\n        await client.query(`\n      CREATE TABLE IF NOT EXISTS settings (\n        id SERIAL PRIMARY KEY,\n        key VARCHAR(255) UNIQUE NOT NULL,\n        value TEXT,\n        created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n        updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n      );\n    `);\n        _logger__WEBPACK_IMPORTED_MODULE_3__.logger.info('PostgreSQL database schema initialized successfully');\n        // Create default admin if not exists\n        await createDefaultAdmin(client);\n    } catch (error) {\n        _logger__WEBPACK_IMPORTED_MODULE_3__.logger.error('Database initialization failed:', {\n            error\n        });\n        throw new _errorHandler__WEBPACK_IMPORTED_MODULE_4__.DatabaseError('Failed to initialize database schema');\n    } finally{\n        client.release();\n    }\n}\nasync function createDefaultAdmin(client) {\n    try {\n        const defaultUsername = _config__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getDefaultAdminUsername();\n        // Check if admin already exists\n        const result = await client.query('SELECT id FROM admins WHERE username = $1', [\n            defaultUsername\n        ]);\n        if (result.rows.length === 0) {\n            const defaultPassword = _config__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getDefaultAdminPassword(); // This will force password change\n            const hashedPassword = await bcryptjs__WEBPACK_IMPORTED_MODULE_1___default().hash(defaultPassword, _config__WEBPACK_IMPORTED_MODULE_2__[\"default\"].get().bcryptRounds);\n            await client.query('INSERT INTO admins (username, password_hash, must_change_password) VALUES ($1, $2, $3)', [\n                defaultUsername,\n                hashedPassword,\n                true\n            ]);\n            _logger__WEBPACK_IMPORTED_MODULE_3__.logger.info(`Default admin '${defaultUsername}' created`);\n        }\n    } catch (error) {\n        _logger__WEBPACK_IMPORTED_MODULE_3__.logger.error('Failed to create default admin:', {\n            error\n        });\n        throw new _errorHandler__WEBPACK_IMPORTED_MODULE_4__.DatabaseError('Failed to create default admin');\n    }\n}\nasync function closeDatabase() {\n    if (pool) {\n        _logger__WEBPACK_IMPORTED_MODULE_3__.logger.info('Closing PostgreSQL database connection');\n        await pool.end();\n        pool = null;\n    }\n}\n/**\n * Get admin by username with security checks\n */ async function getAdminByUsername(username) {\n    try {\n        const pool = await getDatabase();\n        const result = await pool.query('SELECT * FROM admins WHERE username = $1', [\n            username\n        ]);\n        return result.rows[0] || null;\n    } catch (error) {\n        _logger__WEBPACK_IMPORTED_MODULE_3__.logger.error('Failed to get admin by username', {\n            username,\n            error\n        });\n        throw new _errorHandler__WEBPACK_IMPORTED_MODULE_4__.DatabaseError('Failed to retrieve admin user');\n    }\n}\n/**\n * Update admin password with security tracking\n */ async function updateAdminPassword(adminId, newPasswordHash) {\n    try {\n        const pool = await getDatabase();\n        await pool.query(`\n      UPDATE admins \n      SET password_hash = $1, \n          must_change_password = false,\n          updated_at = CURRENT_TIMESTAMP,\n          failed_login_attempts = 0,\n          locked_until = NULL\n      WHERE id = $2\n    `, [\n            newPasswordHash,\n            adminId\n        ]);\n        _logger__WEBPACK_IMPORTED_MODULE_3__.logger.info('Admin password updated', {\n            adminId\n        });\n    } catch (error) {\n        _logger__WEBPACK_IMPORTED_MODULE_3__.logger.error('Failed to update admin password', {\n            adminId,\n            error\n        });\n        throw new _errorHandler__WEBPACK_IMPORTED_MODULE_4__.DatabaseError('Failed to update password');\n    }\n}\n/**\n * Record failed login attempt\n */ async function recordFailedLogin(username) {\n    try {\n        const pool = await getDatabase();\n        const result = await pool.query(`\n      UPDATE admins \n      SET failed_login_attempts = failed_login_attempts + 1,\n          locked_until = CASE \n            WHEN failed_login_attempts >= 4 THEN NOW() + INTERVAL '30 minutes'\n            ELSE locked_until\n          END\n      WHERE username = $1\n    `, [\n            username\n        ]);\n        if (result.rowCount && result.rowCount > 0) {\n            _logger__WEBPACK_IMPORTED_MODULE_3__.logger.warn('Failed login attempt recorded', {\n                username\n            });\n        }\n    } catch (error) {\n        _logger__WEBPACK_IMPORTED_MODULE_3__.logger.error('Failed to record login attempt', {\n            username,\n            error\n        });\n    }\n}\n/**\n * Reset failed login attempts on successful login\n */ async function resetFailedLogins(username) {\n    try {\n        const pool = await getDatabase();\n        await pool.query(`\n      UPDATE admins \n      SET failed_login_attempts = 0,\n          locked_until = NULL\n      WHERE username = $1\n    `, [\n            username\n        ]);\n        _logger__WEBPACK_IMPORTED_MODULE_3__.logger.info('Failed login attempts reset', {\n            username\n        });\n    } catch (error) {\n        _logger__WEBPACK_IMPORTED_MODULE_3__.logger.error('Failed to reset login attempts', {\n            username,\n            error\n        });\n    }\n}\n/**\n * Check if admin account is locked\n */ async function isAdminLocked(username) {\n    try {\n        const pool = await getDatabase();\n        const result = await pool.query(`\n      SELECT locked_until \n      FROM admins \n      WHERE username = $1 AND locked_until > NOW()\n    `, [\n            username\n        ]);\n        return result.rows.length > 0;\n    } catch (error) {\n        _logger__WEBPACK_IMPORTED_MODULE_3__.logger.error('Failed to check admin lock status', {\n            username,\n            error\n        });\n        return false;\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0FBQyxDQUFDOzs7Ozs7OztJQVFqQyxDQUFDLEVBQUU7WUFBQ29CO1NBQVM7UUFFYixJQUFJWixPQUFPaUIsUUFBUSxJQUFJakIsT0FBT2lCLFFBQVEsR0FBRyxHQUFHO1lBQzFDNUMsMkNBQU1BLENBQUM2QyxJQUFJLENBQUMsaUNBQWlDO2dCQUFFTjtZQUFTO1FBQzFEO0lBQ0YsRUFBRSxPQUFPakIsT0FBTztRQUNkdEIsMkNBQU1BLENBQUNzQixLQUFLLENBQUMsa0NBQWtDO1lBQUVpQjtZQUFVakI7UUFBTTtJQUNuRTtBQUNGO0FBRUE7O0NBRUMsR0FDTSxlQUFld0Isa0JBQWtCUCxRQUFnQjtJQUN0RCxJQUFJO1FBQ0YsTUFBTXJDLE9BQU8sTUFBTUM7UUFDbkIsTUFBTUQsS0FBS2lCLEtBQUssQ0FBQyxDQUFDOzs7OztJQUtsQixDQUFDLEVBQUU7WUFBQ29CO1NBQVM7UUFFYnZDLDJDQUFNQSxDQUFDcUIsSUFBSSxDQUFDLCtCQUErQjtZQUFFa0I7UUFBUztJQUN4RCxFQUFFLE9BQU9qQixPQUFPO1FBQ2R0QiwyQ0FBTUEsQ0FBQ3NCLEtBQUssQ0FBQyxrQ0FBa0M7WUFBRWlCO1lBQVVqQjtRQUFNO0lBQ25FO0FBQ0Y7QUFFQTs7Q0FFQyxHQUNNLGVBQWV5QixjQUFjUixRQUFnQjtJQUNsRCxJQUFJO1FBQ0YsTUFBTXJDLE9BQU8sTUFBTUM7UUFDbkIsTUFBTXdCLFNBQVMsTUFBTXpCLEtBQUtpQixLQUFLLENBQUMsQ0FBQzs7OztJQUlqQyxDQUFDLEVBQUU7WUFBQ29CO1NBQVM7UUFFYixPQUFPWixPQUFPQyxJQUFJLENBQUNDLE1BQU0sR0FBRztJQUM5QixFQUFFLE9BQU9QLE9BQU87UUFDZHRCLDJDQUFNQSxDQUFDc0IsS0FBSyxDQUFDLHFDQUFxQztZQUFFaUI7WUFBVWpCO1FBQU07UUFDcEUsT0FBTztJQUNUO0FBQ0YiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcSW1hbmdcXERvY3VtZW50c1xcR2l0SHViXFxzZWxmLWNsYWltLWxpbmtcXGxpYlxcZGF0YWJhc2UudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBQb3N0Z3JlU1FMIERhdGFiYXNlIExheWVyXG4gKiBQcm9kdWN0aW9uLXJlYWR5IGRhdGFiYXNlIGltcGxlbWVudGF0aW9uXG4gKi9cblxuaW1wb3J0IHsgUG9vbCwgUG9vbENsaWVudCB9IGZyb20gJ3BnJztcbmltcG9ydCBiY3J5cHQgZnJvbSAnYmNyeXB0anMnO1xuaW1wb3J0IGNvbmZpZyBmcm9tICcuL2NvbmZpZyc7XG5pbXBvcnQgeyBsb2dnZXIgfSBmcm9tICcuL2xvZ2dlcic7XG5pbXBvcnQgeyBEYXRhYmFzZUVycm9yIH0gZnJvbSAnLi9lcnJvckhhbmRsZXInO1xuXG5sZXQgcG9vbDogUG9vbCB8IG51bGwgPSBudWxsO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0RGF0YWJhc2UoKTogUHJvbWlzZTxQb29sPiB7XG4gIGlmIChwb29sKSByZXR1cm4gcG9vbDtcbiAgXG4gIGNvbnN0IHBvc3RncmVzQ29uZmlnID0gY29uZmlnLmdldFBvc3RncmVzQ29uZmlnKCk7XG4gIFxuICBwb29sID0gbmV3IFBvb2woe1xuICAgIGhvc3Q6IHBvc3RncmVzQ29uZmlnLmhvc3QsXG4gICAgcG9ydDogcG9zdGdyZXNDb25maWcucG9ydCxcbiAgICBkYXRhYmFzZTogcG9zdGdyZXNDb25maWcuZGF0YWJhc2UsXG4gICAgdXNlcjogcG9zdGdyZXNDb25maWcudXNlcixcbiAgICBwYXNzd29yZDogcG9zdGdyZXNDb25maWcucGFzc3dvcmQsXG4gICAgbWF4OiAyMCxcbiAgICBpZGxlVGltZW91dE1pbGxpczogMzAwMDAsXG4gICAgY29ubmVjdGlvblRpbWVvdXRNaWxsaXM6IDIwMDAsXG4gICAgc3NsOiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nID8geyByZWplY3RVbmF1dGhvcml6ZWQ6IGZhbHNlIH0gOiBmYWxzZVxuICB9KTtcblxuICAvLyBUZXN0IGNvbm5lY3Rpb25cbiAgdHJ5IHtcbiAgICBjb25zdCBjbGllbnQgPSBhd2FpdCBwb29sLmNvbm5lY3QoKTtcbiAgICBhd2FpdCBjbGllbnQucXVlcnkoJ1NFTEVDVCBOT1coKScpO1xuICAgIGNsaWVudC5yZWxlYXNlKCk7XG4gICAgbG9nZ2VyLmluZm8oJ1Bvc3RncmVTUUwgZGF0YWJhc2UgY29ubmVjdGlvbiBlc3RhYmxpc2hlZCcpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGxvZ2dlci5lcnJvcignRmFpbGVkIHRvIGNvbm5lY3QgdG8gUG9zdGdyZVNRTDonLCB7IGVycm9yIH0pO1xuICAgIHRocm93IG5ldyBEYXRhYmFzZUVycm9yKCdQb3N0Z3JlU1FMIGNvbm5lY3Rpb24gZmFpbGVkJyk7XG4gIH1cblxuICAvLyBJbml0aWFsaXplIGRhdGFiYXNlIHNjaGVtYVxuICBhd2FpdCBpbml0aWFsaXplRGF0YWJhc2UoKTtcbiAgXG4gIHJldHVybiBwb29sO1xufVxuXG5hc3luYyBmdW5jdGlvbiBpbml0aWFsaXplRGF0YWJhc2UoKTogUHJvbWlzZTx2b2lkPiB7XG4gIGlmICghcG9vbCkgdGhyb3cgbmV3IERhdGFiYXNlRXJyb3IoJ0RhdGFiYXNlIHBvb2wgbm90IGVzdGFibGlzaGVkJyk7XG5cbiAgY29uc3QgY2xpZW50ID0gYXdhaXQgcG9vbC5jb25uZWN0KCk7XG4gIFxuICB0cnkge1xuICAgIC8vIENyZWF0ZSB0YWJsZXMgd2l0aCBwcm9wZXIgUG9zdGdyZVNRTCBzeW50YXhcbiAgICBhd2FpdCBjbGllbnQucXVlcnkoYFxuICAgICAgQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgcHJvZHVjdHMgKFxuICAgICAgICBpZCBTRVJJQUwgUFJJTUFSWSBLRVksXG4gICAgICAgIG5hbWUgVkFSQ0hBUigyNTUpIE5PVCBOVUxMLFxuICAgICAgICBkZXNjcmlwdGlvbiBURVhULFxuICAgICAgICBkb3dubG9hZF9saW5rIFRFWFQgTk9UIE5VTEwsXG4gICAgICAgIGltYWdlX3VybCBURVhULFxuICAgICAgICBjcmVhdGVkX2F0IFRJTUVTVEFNUCBERUZBVUxUIENVUlJFTlRfVElNRVNUQU1QXG4gICAgICApO1xuICAgIGApO1xuXG4gICAgYXdhaXQgY2xpZW50LnF1ZXJ5KGBcbiAgICAgIENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIG9yZGVycyAoXG4gICAgICAgIGlkIFNFUklBTCBQUklNQVJZIEtFWSxcbiAgICAgICAgb3JkZXJfaWQgVkFSQ0hBUigyNTUpIFVOSVFVRSBOT1QgTlVMTCxcbiAgICAgICAgY2xhaW1fc3RhdHVzIFZBUkNIQVIoNTApIERFRkFVTFQgJ2F2YWlsYWJsZScsXG4gICAgICAgIGNsYWltX3RpbWVzdGFtcCBUSU1FU1RBTVAsXG4gICAgICAgIGNsYWltX2NvdW50IElOVEVHRVIgREVGQVVMVCAwLFxuICAgICAgICBleHBpcmF0aW9uX2RhdGUgVElNRVNUQU1QLFxuICAgICAgICBvbmVfdGltZV91c2UgQk9PTEVBTiBERUZBVUxUIHRydWUsXG4gICAgICAgIGNyZWF0ZWRfYnkgVkFSQ0hBUigyNTUpLFxuICAgICAgICBjcmVhdGVkX2F0IFRJTUVTVEFNUCBERUZBVUxUIENVUlJFTlRfVElNRVNUQU1QXG4gICAgICApO1xuICAgIGApO1xuXG4gICAgYXdhaXQgY2xpZW50LnF1ZXJ5KGBcbiAgICAgIENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIG9yZGVyX3Byb2R1Y3RzIChcbiAgICAgICAgaWQgU0VSSUFMIFBSSU1BUlkgS0VZLFxuICAgICAgICBvcmRlcl9pZCBJTlRFR0VSIFJFRkVSRU5DRVMgb3JkZXJzKGlkKSBPTiBERUxFVEUgQ0FTQ0FERSxcbiAgICAgICAgcHJvZHVjdF9pZCBJTlRFR0VSIFJFRkVSRU5DRVMgcHJvZHVjdHMoaWQpIE9OIERFTEVURSBDQVNDQURFLFxuICAgICAgICBjcmVhdGVkX2F0IFRJTUVTVEFNUCBERUZBVUxUIENVUlJFTlRfVElNRVNUQU1QLFxuICAgICAgICBVTklRVUUob3JkZXJfaWQsIHByb2R1Y3RfaWQpXG4gICAgICApO1xuICAgIGApO1xuXG4gICAgYXdhaXQgY2xpZW50LnF1ZXJ5KGBcbiAgICAgIENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIGFkbWlucyAoXG4gICAgICAgIGlkIFNFUklBTCBQUklNQVJZIEtFWSxcbiAgICAgICAgdXNlcm5hbWUgVkFSQ0hBUigyNTUpIFVOSVFVRSBOT1QgTlVMTCxcbiAgICAgICAgcGFzc3dvcmRfaGFzaCBURVhUIE5PVCBOVUxMLFxuICAgICAgICBtdXN0X2NoYW5nZV9wYXNzd29yZCBCT09MRUFOIERFRkFVTFQgZmFsc2UsXG4gICAgICAgIGZhaWxlZF9sb2dpbl9hdHRlbXB0cyBJTlRFR0VSIERFRkFVTFQgMCxcbiAgICAgICAgbG9ja2VkX3VudGlsIFRJTUVTVEFNUCxcbiAgICAgICAgY3JlYXRlZF9hdCBUSU1FU1RBTVAgREVGQVVMVCBDVVJSRU5UX1RJTUVTVEFNUCxcbiAgICAgICAgdXBkYXRlZF9hdCBUSU1FU1RBTVAgREVGQVVMVCBDVVJSRU5UX1RJTUVTVEFNUFxuICAgICAgKTtcbiAgICBgKTtcblxuICAgIGF3YWl0IGNsaWVudC5xdWVyeShgXG4gICAgICBDUkVBVEUgVEFCTEUgSUYgTk9UIEVYSVNUUyBzZXR0aW5ncyAoXG4gICAgICAgIGlkIFNFUklBTCBQUklNQVJZIEtFWSxcbiAgICAgICAga2V5IFZBUkNIQVIoMjU1KSBVTklRVUUgTk9UIE5VTEwsXG4gICAgICAgIHZhbHVlIFRFWFQsXG4gICAgICAgIGNyZWF0ZWRfYXQgVElNRVNUQU1QIERFRkFVTFQgQ1VSUkVOVF9USU1FU1RBTVAsXG4gICAgICAgIHVwZGF0ZWRfYXQgVElNRVNUQU1QIERFRkFVTFQgQ1VSUkVOVF9USU1FU1RBTVBcbiAgICAgICk7XG4gICAgYCk7XG5cbiAgICBsb2dnZXIuaW5mbygnUG9zdGdyZVNRTCBkYXRhYmFzZSBzY2hlbWEgaW5pdGlhbGl6ZWQgc3VjY2Vzc2Z1bGx5Jyk7XG5cbiAgICAvLyBDcmVhdGUgZGVmYXVsdCBhZG1pbiBpZiBub3QgZXhpc3RzXG4gICAgYXdhaXQgY3JlYXRlRGVmYXVsdEFkbWluKGNsaWVudCk7XG4gICAgXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgbG9nZ2VyLmVycm9yKCdEYXRhYmFzZSBpbml0aWFsaXphdGlvbiBmYWlsZWQ6JywgeyBlcnJvciB9KTtcbiAgICB0aHJvdyBuZXcgRGF0YWJhc2VFcnJvcignRmFpbGVkIHRvIGluaXRpYWxpemUgZGF0YWJhc2Ugc2NoZW1hJyk7XG4gIH0gZmluYWxseSB7XG4gICAgY2xpZW50LnJlbGVhc2UoKTtcbiAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBjcmVhdGVEZWZhdWx0QWRtaW4oY2xpZW50OiBQb29sQ2xpZW50KTogUHJvbWlzZTx2b2lkPiB7XG4gIHRyeSB7XG4gICAgY29uc3QgZGVmYXVsdFVzZXJuYW1lID0gY29uZmlnLmdldERlZmF1bHRBZG1pblVzZXJuYW1lKCk7XG4gICAgXG4gICAgLy8gQ2hlY2sgaWYgYWRtaW4gYWxyZWFkeSBleGlzdHNcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjbGllbnQucXVlcnkoJ1NFTEVDVCBpZCBGUk9NIGFkbWlucyBXSEVSRSB1c2VybmFtZSA9ICQxJywgW2RlZmF1bHRVc2VybmFtZV0pO1xuICAgIFxuICAgIGlmIChyZXN1bHQucm93cy5sZW5ndGggPT09IDApIHtcbiAgICAgIGNvbnN0IGRlZmF1bHRQYXNzd29yZCA9IGNvbmZpZy5nZXREZWZhdWx0QWRtaW5QYXNzd29yZCgpOyAvLyBUaGlzIHdpbGwgZm9yY2UgcGFzc3dvcmQgY2hhbmdlXG4gICAgICBjb25zdCBoYXNoZWRQYXNzd29yZCA9IGF3YWl0IGJjcnlwdC5oYXNoKGRlZmF1bHRQYXNzd29yZCwgY29uZmlnLmdldCgpLmJjcnlwdFJvdW5kcyk7XG4gICAgICBcbiAgICAgIGF3YWl0IGNsaWVudC5xdWVyeShcbiAgICAgICAgJ0lOU0VSVCBJTlRPIGFkbWlucyAodXNlcm5hbWUsIHBhc3N3b3JkX2hhc2gsIG11c3RfY2hhbmdlX3Bhc3N3b3JkKSBWQUxVRVMgKCQxLCAkMiwgJDMpJyxcbiAgICAgICAgW2RlZmF1bHRVc2VybmFtZSwgaGFzaGVkUGFzc3dvcmQsIHRydWVdXG4gICAgICApO1xuICAgICAgXG4gICAgICBsb2dnZXIuaW5mbyhgRGVmYXVsdCBhZG1pbiAnJHtkZWZhdWx0VXNlcm5hbWV9JyBjcmVhdGVkYCk7XG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGxvZ2dlci5lcnJvcignRmFpbGVkIHRvIGNyZWF0ZSBkZWZhdWx0IGFkbWluOicsIHsgZXJyb3IgfSk7XG4gICAgdGhyb3cgbmV3IERhdGFiYXNlRXJyb3IoJ0ZhaWxlZCB0byBjcmVhdGUgZGVmYXVsdCBhZG1pbicpO1xuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjbG9zZURhdGFiYXNlKCkge1xuICBpZiAocG9vbCkge1xuICAgIGxvZ2dlci5pbmZvKCdDbG9zaW5nIFBvc3RncmVTUUwgZGF0YWJhc2UgY29ubmVjdGlvbicpO1xuICAgIGF3YWl0IHBvb2wuZW5kKCk7XG4gICAgcG9vbCA9IG51bGw7XG4gIH1cbn1cblxuLyoqXG4gKiBHZXQgYWRtaW4gYnkgdXNlcm5hbWUgd2l0aCBzZWN1cml0eSBjaGVja3NcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEFkbWluQnlVc2VybmFtZSh1c2VybmFtZTogc3RyaW5nKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgcG9vbCA9IGF3YWl0IGdldERhdGFiYXNlKCk7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcG9vbC5xdWVyeShcbiAgICAgICdTRUxFQ1QgKiBGUk9NIGFkbWlucyBXSEVSRSB1c2VybmFtZSA9ICQxJyxcbiAgICAgIFt1c2VybmFtZV1cbiAgICApO1xuICAgIHJldHVybiByZXN1bHQucm93c1swXSB8fCBudWxsO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGxvZ2dlci5lcnJvcignRmFpbGVkIHRvIGdldCBhZG1pbiBieSB1c2VybmFtZScsIHsgdXNlcm5hbWUsIGVycm9yIH0pO1xuICAgIHRocm93IG5ldyBEYXRhYmFzZUVycm9yKCdGYWlsZWQgdG8gcmV0cmlldmUgYWRtaW4gdXNlcicpO1xuICB9XG59XG5cbi8qKlxuICogVXBkYXRlIGFkbWluIHBhc3N3b3JkIHdpdGggc2VjdXJpdHkgdHJhY2tpbmdcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZUFkbWluUGFzc3dvcmQoYWRtaW5JZDogbnVtYmVyLCBuZXdQYXNzd29yZEhhc2g6IHN0cmluZykge1xuICB0cnkge1xuICAgIGNvbnN0IHBvb2wgPSBhd2FpdCBnZXREYXRhYmFzZSgpO1xuICAgIGF3YWl0IHBvb2wucXVlcnkoYFxuICAgICAgVVBEQVRFIGFkbWlucyBcbiAgICAgIFNFVCBwYXNzd29yZF9oYXNoID0gJDEsIFxuICAgICAgICAgIG11c3RfY2hhbmdlX3Bhc3N3b3JkID0gZmFsc2UsXG4gICAgICAgICAgdXBkYXRlZF9hdCA9IENVUlJFTlRfVElNRVNUQU1QLFxuICAgICAgICAgIGZhaWxlZF9sb2dpbl9hdHRlbXB0cyA9IDAsXG4gICAgICAgICAgbG9ja2VkX3VudGlsID0gTlVMTFxuICAgICAgV0hFUkUgaWQgPSAkMlxuICAgIGAsIFtuZXdQYXNzd29yZEhhc2gsIGFkbWluSWRdKTtcbiAgICBcbiAgICBsb2dnZXIuaW5mbygnQWRtaW4gcGFzc3dvcmQgdXBkYXRlZCcsIHsgYWRtaW5JZCB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBsb2dnZXIuZXJyb3IoJ0ZhaWxlZCB0byB1cGRhdGUgYWRtaW4gcGFzc3dvcmQnLCB7IGFkbWluSWQsIGVycm9yIH0pO1xuICAgIHRocm93IG5ldyBEYXRhYmFzZUVycm9yKCdGYWlsZWQgdG8gdXBkYXRlIHBhc3N3b3JkJyk7XG4gIH1cbn1cblxuLyoqXG4gKiBSZWNvcmQgZmFpbGVkIGxvZ2luIGF0dGVtcHRcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlY29yZEZhaWxlZExvZ2luKHVzZXJuYW1lOiBzdHJpbmcpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBwb29sID0gYXdhaXQgZ2V0RGF0YWJhc2UoKTtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBwb29sLnF1ZXJ5KGBcbiAgICAgIFVQREFURSBhZG1pbnMgXG4gICAgICBTRVQgZmFpbGVkX2xvZ2luX2F0dGVtcHRzID0gZmFpbGVkX2xvZ2luX2F0dGVtcHRzICsgMSxcbiAgICAgICAgICBsb2NrZWRfdW50aWwgPSBDQVNFIFxuICAgICAgICAgICAgV0hFTiBmYWlsZWRfbG9naW5fYXR0ZW1wdHMgPj0gNCBUSEVOIE5PVygpICsgSU5URVJWQUwgJzMwIG1pbnV0ZXMnXG4gICAgICAgICAgICBFTFNFIGxvY2tlZF91bnRpbFxuICAgICAgICAgIEVORFxuICAgICAgV0hFUkUgdXNlcm5hbWUgPSAkMVxuICAgIGAsIFt1c2VybmFtZV0pO1xuICAgIFxuICAgIGlmIChyZXN1bHQucm93Q291bnQgJiYgcmVzdWx0LnJvd0NvdW50ID4gMCkge1xuICAgICAgbG9nZ2VyLndhcm4oJ0ZhaWxlZCBsb2dpbiBhdHRlbXB0IHJlY29yZGVkJywgeyB1c2VybmFtZSB9KTtcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgbG9nZ2VyLmVycm9yKCdGYWlsZWQgdG8gcmVjb3JkIGxvZ2luIGF0dGVtcHQnLCB7IHVzZXJuYW1lLCBlcnJvciB9KTtcbiAgfVxufVxuXG4vKipcbiAqIFJlc2V0IGZhaWxlZCBsb2dpbiBhdHRlbXB0cyBvbiBzdWNjZXNzZnVsIGxvZ2luXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZXNldEZhaWxlZExvZ2lucyh1c2VybmFtZTogc3RyaW5nKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgcG9vbCA9IGF3YWl0IGdldERhdGFiYXNlKCk7XG4gICAgYXdhaXQgcG9vbC5xdWVyeShgXG4gICAgICBVUERBVEUgYWRtaW5zIFxuICAgICAgU0VUIGZhaWxlZF9sb2dpbl9hdHRlbXB0cyA9IDAsXG4gICAgICAgICAgbG9ja2VkX3VudGlsID0gTlVMTFxuICAgICAgV0hFUkUgdXNlcm5hbWUgPSAkMVxuICAgIGAsIFt1c2VybmFtZV0pO1xuICAgIFxuICAgIGxvZ2dlci5pbmZvKCdGYWlsZWQgbG9naW4gYXR0ZW1wdHMgcmVzZXQnLCB7IHVzZXJuYW1lIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGxvZ2dlci5lcnJvcignRmFpbGVkIHRvIHJlc2V0IGxvZ2luIGF0dGVtcHRzJywgeyB1c2VybmFtZSwgZXJyb3IgfSk7XG4gIH1cbn1cblxuLyoqXG4gKiBDaGVjayBpZiBhZG1pbiBhY2NvdW50IGlzIGxvY2tlZFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaXNBZG1pbkxvY2tlZCh1c2VybmFtZTogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XG4gIHRyeSB7XG4gICAgY29uc3QgcG9vbCA9IGF3YWl0IGdldERhdGFiYXNlKCk7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcG9vbC5xdWVyeShgXG4gICAgICBTRUxFQ1QgbG9ja2VkX3VudGlsIFxuICAgICAgRlJPTSBhZG1pbnMgXG4gICAgICBXSEVSRSB1c2VybmFtZSA9ICQxIEFORCBsb2NrZWRfdW50aWwgPiBOT1coKVxuICAgIGAsIFt1c2VybmFtZV0pO1xuICAgIFxuICAgIHJldHVybiByZXN1bHQucm93cy5sZW5ndGggPiAwO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGxvZ2dlci5lcnJvcignRmFpbGVkIHRvIGNoZWNrIGFkbWluIGxvY2sgc3RhdHVzJywgeyB1c2VybmFtZSwgZXJyb3IgfSk7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG4iXSwibmFtZXMiOlsiUG9vbCIsImJjcnlwdCIsImNvbmZpZyIsImxvZ2dlciIsIkRhdGFiYXNlRXJyb3IiLCJwb29sIiwiZ2V0RGF0YWJhc2UiLCJwb3N0Z3Jlc0NvbmZpZyIsImdldFBvc3RncmVzQ29uZmlnIiwiaG9zdCIsInBvcnQiLCJkYXRhYmFzZSIsInVzZXIiLCJwYXNzd29yZCIsIm1heCIsImlkbGVUaW1lb3V0TWlsbGlzIiwiY29ubmVjdGlvblRpbWVvdXRNaWxsaXMiLCJzc2wiLCJwcm9jZXNzIiwicmVqZWN0VW5hdXRob3JpemVkIiwiY2xpZW50IiwiY29ubmVjdCIsInF1ZXJ5IiwicmVsZWFzZSIsImluZm8iLCJlcnJvciIsImluaXRpYWxpemVEYXRhYmFzZSIsImNyZWF0ZURlZmF1bHRBZG1pbiIsImRlZmF1bHRVc2VybmFtZSIsImdldERlZmF1bHRBZG1pblVzZXJuYW1lIiwicmVzdWx0Iiwicm93cyIsImxlbmd0aCIsImRlZmF1bHRQYXNzd29yZCIsImdldERlZmF1bHRBZG1pblBhc3N3b3JkIiwiaGFzaGVkUGFzc3dvcmQiLCJoYXNoIiwiZ2V0IiwiYmNyeXB0Um91bmRzIiwiY2xvc2VEYXRhYmFzZSIsImVuZCIsImdldEFkbWluQnlVc2VybmFtZSIsInVzZXJuYW1lIiwidXBkYXRlQWRtaW5QYXNzd29yZCIsImFkbWluSWQiLCJuZXdQYXNzd29yZEhhc2giLCJyZWNvcmRGYWlsZWRMb2dpbiIsInJvd0NvdW50Iiwid2FybiIsInJlc2V0RmFpbGVkTG9naW5zIiwiaXNBZG1pbkxvY2tlZCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/database.ts\n");

/***/ }),

/***/ "(rsc)/./lib/errorHandler.ts":
/*!*****************************!*\
  !*** ./lib/errorHandler.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AppError: () => (/* binding */ AppError),\n/* harmony export */   AuthenticationError: () => (/* binding */ AuthenticationError),\n/* harmony export */   AuthorizationError: () => (/* binding */ AuthorizationError),\n/* harmony export */   ConflictError: () => (/* binding */ ConflictError),\n/* harmony export */   DatabaseError: () => (/* binding */ DatabaseError),\n/* harmony export */   ErrorCode: () => (/* binding */ ErrorCode),\n/* harmony export */   NotFoundError: () => (/* binding */ NotFoundError),\n/* harmony export */   createErrorResponse: () => (/* binding */ createErrorResponse),\n/* harmony export */   createSuccessResponse: () => (/* binding */ createSuccessResponse),\n/* harmony export */   validateOrThrow: () => (/* binding */ validateOrThrow),\n/* harmony export */   withDatabaseErrorHandling: () => (/* binding */ withDatabaseErrorHandling),\n/* harmony export */   withErrorHandler: () => (/* binding */ withErrorHandler)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _validation__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./validation */ \"(rsc)/./lib/validation.ts\");\n/* harmony import */ var _logger__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./logger */ \"(rsc)/./lib/logger.ts\");\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./config */ \"(rsc)/./lib/config.ts\");\n/**\n * Centralized error handling utilities\n * Provides consistent error responses and logging\n */ \n\n\n\nvar ErrorCode = /*#__PURE__*/ function(ErrorCode) {\n    ErrorCode[\"VALIDATION_ERROR\"] = \"VALIDATION_ERROR\";\n    ErrorCode[\"AUTHENTICATION_ERROR\"] = \"AUTHENTICATION_ERROR\";\n    ErrorCode[\"AUTHORIZATION_ERROR\"] = \"AUTHORIZATION_ERROR\";\n    ErrorCode[\"NOT_FOUND\"] = \"NOT_FOUND\";\n    ErrorCode[\"CONFLICT\"] = \"CONFLICT\";\n    ErrorCode[\"RATE_LIMIT_EXCEEDED\"] = \"RATE_LIMIT_EXCEEDED\";\n    ErrorCode[\"INTERNAL_ERROR\"] = \"INTERNAL_ERROR\";\n    ErrorCode[\"DATABASE_ERROR\"] = \"DATABASE_ERROR\";\n    ErrorCode[\"EXTERNAL_SERVICE_ERROR\"] = \"EXTERNAL_SERVICE_ERROR\";\n    return ErrorCode;\n}({});\nclass AppError extends Error {\n    constructor(code, message, statusCode = 500, details){\n        super(message), this.code = code, this.statusCode = statusCode, this.details = details;\n        this.name = 'AppError';\n    }\n}\nclass AuthenticationError extends AppError {\n    constructor(message = 'Authentication required'){\n        super(\"AUTHENTICATION_ERROR\", message, 401);\n    }\n}\nclass AuthorizationError extends AppError {\n    constructor(message = 'Insufficient permissions'){\n        super(\"AUTHORIZATION_ERROR\", message, 403);\n    }\n}\nclass NotFoundError extends AppError {\n    constructor(resource = 'Resource'){\n        super(\"NOT_FOUND\", `${resource} not found`, 404);\n    }\n}\nclass ConflictError extends AppError {\n    constructor(message = 'Resource conflict'){\n        super(\"CONFLICT\", message, 409);\n    }\n}\nclass DatabaseError extends AppError {\n    constructor(message = 'Database operation failed', details){\n        super(\"DATABASE_ERROR\", message, 500, details);\n    }\n}\n/**\n * Create standardized error response\n */ function createErrorResponse(error, requestId) {\n    const timestamp = new Date().toISOString();\n    const id = requestId || (0,_logger__WEBPACK_IMPORTED_MODULE_2__.generateRequestId)();\n    // Handle different error types\n    if (error instanceof _validation__WEBPACK_IMPORTED_MODULE_1__.ValidationError) {\n        const response = {\n            success: false,\n            error: {\n                code: \"VALIDATION_ERROR\",\n                message: 'Validation failed',\n                details: error.errors,\n                timestamp,\n                requestId: id\n            }\n        };\n        _logger__WEBPACK_IMPORTED_MODULE_2__.logger.warn('Validation error', {\n            requestId: id,\n            errors: error.errors\n        });\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(response, {\n            status: 400\n        });\n    }\n    if (error instanceof AppError) {\n        const response = {\n            success: false,\n            error: {\n                code: error.code,\n                message: error.message,\n                details: error.details,\n                timestamp,\n                requestId: id\n            }\n        };\n        _logger__WEBPACK_IMPORTED_MODULE_2__.logger.error(`Application error: ${error.message}`, {\n            requestId: id,\n            code: error.code,\n            details: error.details\n        });\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(response, {\n            status: error.statusCode\n        });\n    }\n    // Handle database errors\n    if (error.message.includes('database')) {\n        const response = {\n            success: false,\n            error: {\n                code: \"DATABASE_ERROR\",\n                message: 'Database operation failed',\n                timestamp,\n                requestId: id\n            }\n        };\n        _logger__WEBPACK_IMPORTED_MODULE_2__.logger.error('Database error', {\n            requestId: id,\n            originalError: error.message\n        });\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(response, {\n            status: 500\n        });\n    }\n    // Generic error handling\n    const response = {\n        success: false,\n        error: {\n            code: \"INTERNAL_ERROR\",\n            message: _config__WEBPACK_IMPORTED_MODULE_3__[\"default\"].isDevelopment() ? error.message : 'Internal server error',\n            timestamp,\n            requestId: id\n        }\n    };\n    _logger__WEBPACK_IMPORTED_MODULE_2__.logger.error('Unhandled error', {\n        requestId: id,\n        error\n    });\n    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(response, {\n        status: 500\n    });\n}\n/**\n * Async error handler wrapper for API routes\n */ function withErrorHandler(handler) {\n    return async (...args)=>{\n        const requestId = (0,_logger__WEBPACK_IMPORTED_MODULE_2__.generateRequestId)();\n        try {\n            _logger__WEBPACK_IMPORTED_MODULE_2__.logger.info('API request started', {\n                requestId\n            });\n            const response = await handler(...args);\n            _logger__WEBPACK_IMPORTED_MODULE_2__.logger.info('API request completed', {\n                requestId,\n                status: response.status\n            });\n            return response;\n        } catch (error) {\n            _logger__WEBPACK_IMPORTED_MODULE_2__.logger.error('API request failed', {\n                requestId,\n                error\n            });\n            return createErrorResponse(error, requestId);\n        }\n    };\n}\n/**\n * Success response helper\n */ function createSuccessResponse(data, status = 200) {\n    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n        success: true,\n        data,\n        timestamp: new Date().toISOString()\n    }, {\n        status\n    });\n}\n/**\n * Validation helper that throws AppError\n */ function validateOrThrow(validationFn, data) {\n    const result = validationFn(data);\n    if (!result.isValid) {\n        throw new _validation__WEBPACK_IMPORTED_MODULE_1__.ValidationError(result.errors);\n    }\n    return result.sanitizedData;\n}\n/**\n * Database operation wrapper with error handling\n */ async function withDatabaseErrorHandling(operation, operationName = 'Database operation') {\n    try {\n        return await operation();\n    } catch (error) {\n        _logger__WEBPACK_IMPORTED_MODULE_2__.logger.error(`${operationName} failed`, {\n            error\n        });\n        throw new DatabaseError(`${operationName} failed`, error);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0FFQyxHQUNNLFNBQVNVLGdCQUNkQyxZQUFzRixFQUN0RkYsSUFBUztJQUVULE1BQU1HLFNBQVNELGFBQWFGO0lBQzVCLElBQUksQ0FBQ0csT0FBT0MsT0FBTyxFQUFFO1FBQ25CLE1BQU0sSUFBSTNDLHdEQUFlQSxDQUFDMEMsT0FBT2YsTUFBTTtJQUN6QztJQUNBLE9BQU9lLE9BQU9FLGFBQWE7QUFDN0I7QUFFQTs7Q0FFQyxHQUNNLGVBQWVDLDBCQUNwQkMsU0FBMkIsRUFDM0JDLGdCQUF3QixvQkFBb0I7SUFFNUMsSUFBSTtRQUNGLE9BQU8sTUFBTUQ7SUFDZixFQUFFLE9BQU8zQixPQUFPO1FBQ2RsQiwyQ0FBTUEsQ0FBQ2tCLEtBQUssQ0FBQyxHQUFHNEIsY0FBYyxPQUFPLENBQUMsRUFBRTtZQUFFNUI7UUFBTTtRQUNoRCxNQUFNLElBQUlGLGNBQWMsR0FBRzhCLGNBQWMsT0FBTyxDQUFDLEVBQUU1QjtJQUNyRDtBQUNGIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXEltYW5nXFxEb2N1bWVudHNcXEdpdEh1Ylxcc2VsZi1jbGFpbS1saW5rXFxsaWJcXGVycm9ySGFuZGxlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENlbnRyYWxpemVkIGVycm9yIGhhbmRsaW5nIHV0aWxpdGllc1xuICogUHJvdmlkZXMgY29uc2lzdGVudCBlcnJvciByZXNwb25zZXMgYW5kIGxvZ2dpbmdcbiAqL1xuXG5pbXBvcnQgeyBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcic7XG5pbXBvcnQgeyBWYWxpZGF0aW9uRXJyb3IgfSBmcm9tICcuL3ZhbGlkYXRpb24nO1xuaW1wb3J0IHsgbG9nZ2VyLCBnZW5lcmF0ZVJlcXVlc3RJZCB9IGZyb20gJy4vbG9nZ2VyJztcbmltcG9ydCBjb25maWcgZnJvbSAnLi9jb25maWcnO1xuXG5leHBvcnQgZW51bSBFcnJvckNvZGUge1xuICBWQUxJREFUSU9OX0VSUk9SID0gJ1ZBTElEQVRJT05fRVJST1InLFxuICBBVVRIRU5USUNBVElPTl9FUlJPUiA9ICdBVVRIRU5USUNBVElPTl9FUlJPUicsXG4gIEFVVEhPUklaQVRJT05fRVJST1IgPSAnQVVUSE9SSVpBVElPTl9FUlJPUicsXG4gIE5PVF9GT1VORCA9ICdOT1RfRk9VTkQnLFxuICBDT05GTElDVCA9ICdDT05GTElDVCcsXG4gIFJBVEVfTElNSVRfRVhDRUVERUQgPSAnUkFURV9MSU1JVF9FWENFRURFRCcsXG4gIElOVEVSTkFMX0VSUk9SID0gJ0lOVEVSTkFMX0VSUk9SJyxcbiAgREFUQUJBU0VfRVJST1IgPSAnREFUQUJBU0VfRVJST1InLFxuICBFWFRFUk5BTF9TRVJWSUNFX0VSUk9SID0gJ0VYVEVSTkFMX1NFUlZJQ0VfRVJST1InXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRXJyb3JSZXNwb25zZSB7XG4gIHN1Y2Nlc3M6IGZhbHNlO1xuICBlcnJvcjoge1xuICAgIGNvZGU6IEVycm9yQ29kZTtcbiAgICBtZXNzYWdlOiBzdHJpbmc7XG4gICAgZGV0YWlscz86IGFueTtcbiAgICB0aW1lc3RhbXA6IHN0cmluZztcbiAgICByZXF1ZXN0SWQ/OiBzdHJpbmc7XG4gIH07XG59XG5cbmV4cG9ydCBjbGFzcyBBcHBFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgY29uc3RydWN0b3IoXG4gICAgcHVibGljIGNvZGU6IEVycm9yQ29kZSxcbiAgICBtZXNzYWdlOiBzdHJpbmcsXG4gICAgcHVibGljIHN0YXR1c0NvZGU6IG51bWJlciA9IDUwMCxcbiAgICBwdWJsaWMgZGV0YWlscz86IGFueVxuICApIHtcbiAgICBzdXBlcihtZXNzYWdlKTtcbiAgICB0aGlzLm5hbWUgPSAnQXBwRXJyb3InO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBBdXRoZW50aWNhdGlvbkVycm9yIGV4dGVuZHMgQXBwRXJyb3Ige1xuICBjb25zdHJ1Y3RvcihtZXNzYWdlOiBzdHJpbmcgPSAnQXV0aGVudGljYXRpb24gcmVxdWlyZWQnKSB7XG4gICAgc3VwZXIoRXJyb3JDb2RlLkFVVEhFTlRJQ0FUSU9OX0VSUk9SLCBtZXNzYWdlLCA0MDEpO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBBdXRob3JpemF0aW9uRXJyb3IgZXh0ZW5kcyBBcHBFcnJvciB7XG4gIGNvbnN0cnVjdG9yKG1lc3NhZ2U6IHN0cmluZyA9ICdJbnN1ZmZpY2llbnQgcGVybWlzc2lvbnMnKSB7XG4gICAgc3VwZXIoRXJyb3JDb2RlLkFVVEhPUklaQVRJT05fRVJST1IsIG1lc3NhZ2UsIDQwMyk7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIE5vdEZvdW5kRXJyb3IgZXh0ZW5kcyBBcHBFcnJvciB7XG4gIGNvbnN0cnVjdG9yKHJlc291cmNlOiBzdHJpbmcgPSAnUmVzb3VyY2UnKSB7XG4gICAgc3VwZXIoRXJyb3JDb2RlLk5PVF9GT1VORCwgYCR7cmVzb3VyY2V9IG5vdCBmb3VuZGAsIDQwNCk7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIENvbmZsaWN0RXJyb3IgZXh0ZW5kcyBBcHBFcnJvciB7XG4gIGNvbnN0cnVjdG9yKG1lc3NhZ2U6IHN0cmluZyA9ICdSZXNvdXJjZSBjb25mbGljdCcpIHtcbiAgICBzdXBlcihFcnJvckNvZGUuQ09ORkxJQ1QsIG1lc3NhZ2UsIDQwOSk7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIERhdGFiYXNlRXJyb3IgZXh0ZW5kcyBBcHBFcnJvciB7XG4gIGNvbnN0cnVjdG9yKG1lc3NhZ2U6IHN0cmluZyA9ICdEYXRhYmFzZSBvcGVyYXRpb24gZmFpbGVkJywgZGV0YWlscz86IGFueSkge1xuICAgIHN1cGVyKEVycm9yQ29kZS5EQVRBQkFTRV9FUlJPUiwgbWVzc2FnZSwgNTAwLCBkZXRhaWxzKTtcbiAgfVxufVxuXG5cblxuLyoqXG4gKiBDcmVhdGUgc3RhbmRhcmRpemVkIGVycm9yIHJlc3BvbnNlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVFcnJvclJlc3BvbnNlKFxuICBlcnJvcjogRXJyb3IgfCBBcHBFcnJvciB8IFZhbGlkYXRpb25FcnJvcixcbiAgcmVxdWVzdElkPzogc3RyaW5nXG4pOiBOZXh0UmVzcG9uc2Uge1xuICBjb25zdCB0aW1lc3RhbXAgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XG4gIGNvbnN0IGlkID0gcmVxdWVzdElkIHx8IGdlbmVyYXRlUmVxdWVzdElkKCk7XG5cbiAgLy8gSGFuZGxlIGRpZmZlcmVudCBlcnJvciB0eXBlc1xuICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBWYWxpZGF0aW9uRXJyb3IpIHtcbiAgICBjb25zdCByZXNwb25zZTogRXJyb3JSZXNwb25zZSA9IHtcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgZXJyb3I6IHtcbiAgICAgICAgY29kZTogRXJyb3JDb2RlLlZBTElEQVRJT05fRVJST1IsXG4gICAgICAgIG1lc3NhZ2U6ICdWYWxpZGF0aW9uIGZhaWxlZCcsXG4gICAgICAgIGRldGFpbHM6IGVycm9yLmVycm9ycyxcbiAgICAgICAgdGltZXN0YW1wLFxuICAgICAgICByZXF1ZXN0SWQ6IGlkXG4gICAgICB9XG4gICAgfTtcblxuICAgIGxvZ2dlci53YXJuKCdWYWxpZGF0aW9uIGVycm9yJywgeyByZXF1ZXN0SWQ6IGlkLCBlcnJvcnM6IGVycm9yLmVycm9ycyB9KTtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24ocmVzcG9uc2UsIHsgc3RhdHVzOiA0MDAgfSk7XG4gIH1cblxuICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBBcHBFcnJvcikge1xuICAgIGNvbnN0IHJlc3BvbnNlOiBFcnJvclJlc3BvbnNlID0ge1xuICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICBlcnJvcjoge1xuICAgICAgICBjb2RlOiBlcnJvci5jb2RlLFxuICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLFxuICAgICAgICBkZXRhaWxzOiBlcnJvci5kZXRhaWxzLFxuICAgICAgICB0aW1lc3RhbXAsXG4gICAgICAgIHJlcXVlc3RJZDogaWRcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgbG9nZ2VyLmVycm9yKGBBcHBsaWNhdGlvbiBlcnJvcjogJHtlcnJvci5tZXNzYWdlfWAsIHsgXG4gICAgICByZXF1ZXN0SWQ6IGlkLCBcbiAgICAgIGNvZGU6IGVycm9yLmNvZGUsIFxuICAgICAgZGV0YWlsczogZXJyb3IuZGV0YWlscyBcbiAgICB9KTtcbiAgICBcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24ocmVzcG9uc2UsIHsgc3RhdHVzOiBlcnJvci5zdGF0dXNDb2RlIH0pO1xuICB9XG5cbiAgLy8gSGFuZGxlIGRhdGFiYXNlIGVycm9yc1xuICBpZiAoZXJyb3IubWVzc2FnZS5pbmNsdWRlcygnZGF0YWJhc2UnKSkge1xuICAgIGNvbnN0IHJlc3BvbnNlOiBFcnJvclJlc3BvbnNlID0ge1xuICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICBlcnJvcjoge1xuICAgICAgICBjb2RlOiBFcnJvckNvZGUuREFUQUJBU0VfRVJST1IsXG4gICAgICAgIG1lc3NhZ2U6ICdEYXRhYmFzZSBvcGVyYXRpb24gZmFpbGVkJyxcbiAgICAgICAgdGltZXN0YW1wLFxuICAgICAgICByZXF1ZXN0SWQ6IGlkXG4gICAgICB9XG4gICAgfTtcblxuICAgIGxvZ2dlci5lcnJvcignRGF0YWJhc2UgZXJyb3InLCB7IHJlcXVlc3RJZDogaWQsIG9yaWdpbmFsRXJyb3I6IGVycm9yLm1lc3NhZ2UgfSk7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHJlc3BvbnNlLCB7IHN0YXR1czogNTAwIH0pO1xuICB9XG5cbiAgLy8gR2VuZXJpYyBlcnJvciBoYW5kbGluZ1xuICBjb25zdCByZXNwb25zZTogRXJyb3JSZXNwb25zZSA9IHtcbiAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICBlcnJvcjoge1xuICAgICAgY29kZTogRXJyb3JDb2RlLklOVEVSTkFMX0VSUk9SLFxuICAgICAgbWVzc2FnZTogY29uZmlnLmlzRGV2ZWxvcG1lbnQoKSA/IGVycm9yLm1lc3NhZ2UgOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yJyxcbiAgICAgIHRpbWVzdGFtcCxcbiAgICAgIHJlcXVlc3RJZDogaWRcbiAgICB9XG4gIH07XG5cbiAgbG9nZ2VyLmVycm9yKCdVbmhhbmRsZWQgZXJyb3InLCB7IHJlcXVlc3RJZDogaWQsIGVycm9yIH0pO1xuICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24ocmVzcG9uc2UsIHsgc3RhdHVzOiA1MDAgfSk7XG59XG5cbi8qKlxuICogQXN5bmMgZXJyb3IgaGFuZGxlciB3cmFwcGVyIGZvciBBUEkgcm91dGVzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB3aXRoRXJyb3JIYW5kbGVyPFQgZXh0ZW5kcyBhbnlbXT4oXG4gIGhhbmRsZXI6ICguLi5hcmdzOiBUKSA9PiBQcm9taXNlPE5leHRSZXNwb25zZT5cbikge1xuICByZXR1cm4gYXN5bmMgKC4uLmFyZ3M6IFQpOiBQcm9taXNlPE5leHRSZXNwb25zZT4gPT4ge1xuICAgIGNvbnN0IHJlcXVlc3RJZCA9IGdlbmVyYXRlUmVxdWVzdElkKCk7XG4gICAgXG4gICAgdHJ5IHtcbiAgICAgIGxvZ2dlci5pbmZvKCdBUEkgcmVxdWVzdCBzdGFydGVkJywgeyByZXF1ZXN0SWQgfSk7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGhhbmRsZXIoLi4uYXJncyk7XG4gICAgICBsb2dnZXIuaW5mbygnQVBJIHJlcXVlc3QgY29tcGxldGVkJywgeyByZXF1ZXN0SWQsIHN0YXR1czogcmVzcG9uc2Uuc3RhdHVzIH0pO1xuICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ0FQSSByZXF1ZXN0IGZhaWxlZCcsIHsgcmVxdWVzdElkLCBlcnJvciB9KTtcbiAgICAgIHJldHVybiBjcmVhdGVFcnJvclJlc3BvbnNlKGVycm9yIGFzIEVycm9yLCByZXF1ZXN0SWQpO1xuICAgIH1cbiAgfTtcbn1cblxuLyoqXG4gKiBTdWNjZXNzIHJlc3BvbnNlIGhlbHBlclxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlU3VjY2Vzc1Jlc3BvbnNlKGRhdGE6IGFueSwgc3RhdHVzOiBudW1iZXIgPSAyMDApOiBOZXh0UmVzcG9uc2Uge1xuICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgZGF0YSxcbiAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICB9LCB7IHN0YXR1cyB9KTtcbn1cblxuLyoqXG4gKiBWYWxpZGF0aW9uIGhlbHBlciB0aGF0IHRocm93cyBBcHBFcnJvclxuICovXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVPclRocm93PFQ+KFxuICB2YWxpZGF0aW9uRm46IChkYXRhOiBhbnkpID0+IHsgaXNWYWxpZDogYm9vbGVhbjsgZXJyb3JzOiBzdHJpbmdbXTsgc2FuaXRpemVkRGF0YT86IFQgfSxcbiAgZGF0YTogYW55XG4pOiBUIHtcbiAgY29uc3QgcmVzdWx0ID0gdmFsaWRhdGlvbkZuKGRhdGEpO1xuICBpZiAoIXJlc3VsdC5pc1ZhbGlkKSB7XG4gICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcihyZXN1bHQuZXJyb3JzKTtcbiAgfVxuICByZXR1cm4gcmVzdWx0LnNhbml0aXplZERhdGEgYXMgVDtcbn1cblxuLyoqXG4gKiBEYXRhYmFzZSBvcGVyYXRpb24gd3JhcHBlciB3aXRoIGVycm9yIGhhbmRsaW5nXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB3aXRoRGF0YWJhc2VFcnJvckhhbmRsaW5nPFQ+KFxuICBvcGVyYXRpb246ICgpID0+IFByb21pc2U8VD4sXG4gIG9wZXJhdGlvbk5hbWU6IHN0cmluZyA9ICdEYXRhYmFzZSBvcGVyYXRpb24nXG4pOiBQcm9taXNlPFQ+IHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gYXdhaXQgb3BlcmF0aW9uKCk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgbG9nZ2VyLmVycm9yKGAke29wZXJhdGlvbk5hbWV9IGZhaWxlZGAsIHsgZXJyb3IgfSk7XG4gICAgdGhyb3cgbmV3IERhdGFiYXNlRXJyb3IoYCR7b3BlcmF0aW9uTmFtZX0gZmFpbGVkYCwgZXJyb3IpO1xuICB9XG59XG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiVmFsaWRhdGlvbkVycm9yIiwibG9nZ2VyIiwiZ2VuZXJhdGVSZXF1ZXN0SWQiLCJjb25maWciLCJFcnJvckNvZGUiLCJBcHBFcnJvciIsIkVycm9yIiwiY29kZSIsIm1lc3NhZ2UiLCJzdGF0dXNDb2RlIiwiZGV0YWlscyIsIm5hbWUiLCJBdXRoZW50aWNhdGlvbkVycm9yIiwiQXV0aG9yaXphdGlvbkVycm9yIiwiTm90Rm91bmRFcnJvciIsInJlc291cmNlIiwiQ29uZmxpY3RFcnJvciIsIkRhdGFiYXNlRXJyb3IiLCJjcmVhdGVFcnJvclJlc3BvbnNlIiwiZXJyb3IiLCJyZXF1ZXN0SWQiLCJ0aW1lc3RhbXAiLCJEYXRlIiwidG9JU09TdHJpbmciLCJpZCIsInJlc3BvbnNlIiwic3VjY2VzcyIsImVycm9ycyIsIndhcm4iLCJqc29uIiwic3RhdHVzIiwiaW5jbHVkZXMiLCJvcmlnaW5hbEVycm9yIiwiaXNEZXZlbG9wbWVudCIsIndpdGhFcnJvckhhbmRsZXIiLCJoYW5kbGVyIiwiYXJncyIsImluZm8iLCJjcmVhdGVTdWNjZXNzUmVzcG9uc2UiLCJkYXRhIiwidmFsaWRhdGVPclRocm93IiwidmFsaWRhdGlvbkZuIiwicmVzdWx0IiwiaXNWYWxpZCIsInNhbml0aXplZERhdGEiLCJ3aXRoRGF0YWJhc2VFcnJvckhhbmRsaW5nIiwib3BlcmF0aW9uIiwib3BlcmF0aW9uTmFtZSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/errorHandler.ts\n");

/***/ }),

/***/ "(rsc)/./lib/logger.ts":
/*!***********************!*\
  !*** ./lib/logger.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LogLevel: () => (/* binding */ LogLevel),\n/* harmony export */   generateRequestId: () => (/* binding */ generateRequestId),\n/* harmony export */   logger: () => (/* binding */ logger),\n/* harmony export */   measurePerformance: () => (/* binding */ measurePerformance)\n/* harmony export */ });\n/* harmony import */ var winston__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! winston */ \"(rsc)/./node_modules/winston/lib/winston.js\");\n/* harmony import */ var winston__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(winston__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./config */ \"(rsc)/./lib/config.ts\");\n/**\n * Enhanced logging system with structured logging, performance monitoring, and error tracking\n */ \n\n// Log levels\nvar LogLevel = /*#__PURE__*/ function(LogLevel) {\n    LogLevel[\"ERROR\"] = \"error\";\n    LogLevel[\"WARN\"] = \"warn\";\n    LogLevel[\"INFO\"] = \"info\";\n    LogLevel[\"HTTP\"] = \"http\";\n    LogLevel[\"DEBUG\"] = \"debug\";\n    return LogLevel;\n}({});\nclass Logger {\n    constructor(){\n        this.isDevelopment = _config__WEBPACK_IMPORTED_MODULE_1__[\"default\"].isDevelopment();\n        this.winston = this.createWinstonLogger();\n    }\n    createWinstonLogger() {\n        const formats = [\n            winston__WEBPACK_IMPORTED_MODULE_0___default().format.timestamp(),\n            winston__WEBPACK_IMPORTED_MODULE_0___default().format.errors({\n                stack: true\n            }),\n            winston__WEBPACK_IMPORTED_MODULE_0___default().format.json()\n        ];\n        if (this.isDevelopment) {\n            formats.push(winston__WEBPACK_IMPORTED_MODULE_0___default().format.colorize(), winston__WEBPACK_IMPORTED_MODULE_0___default().format.simple());\n        }\n        return winston__WEBPACK_IMPORTED_MODULE_0___default().createLogger({\n            level: this.isDevelopment ? 'debug' : 'info',\n            format: winston__WEBPACK_IMPORTED_MODULE_0___default().format.combine(...formats),\n            defaultMeta: {\n                service: 'self-claim-link',\n                environment: \"development\" || 0\n            },\n            transports: [\n                // Console transport\n                new (winston__WEBPACK_IMPORTED_MODULE_0___default().transports).Console({\n                    format: this.isDevelopment ? winston__WEBPACK_IMPORTED_MODULE_0___default().format.combine(winston__WEBPACK_IMPORTED_MODULE_0___default().format.colorize(), winston__WEBPACK_IMPORTED_MODULE_0___default().format.simple()) : winston__WEBPACK_IMPORTED_MODULE_0___default().format.json()\n                }),\n                // File transports for production\n                ...this.isDevelopment ? [] : [\n                    new (winston__WEBPACK_IMPORTED_MODULE_0___default().transports).File({\n                        filename: 'logs/error.log',\n                        level: 'error',\n                        maxsize: 5242880,\n                        maxFiles: 5\n                    }),\n                    new (winston__WEBPACK_IMPORTED_MODULE_0___default().transports).File({\n                        filename: 'logs/combined.log',\n                        maxsize: 5242880,\n                        maxFiles: 10\n                    })\n                ]\n            ],\n            exceptionHandlers: [\n                new (winston__WEBPACK_IMPORTED_MODULE_0___default().transports).Console(),\n                ...this.isDevelopment ? [] : [\n                    new (winston__WEBPACK_IMPORTED_MODULE_0___default().transports).File({\n                        filename: 'logs/exceptions.log'\n                    })\n                ]\n            ],\n            rejectionHandlers: [\n                new (winston__WEBPACK_IMPORTED_MODULE_0___default().transports).Console(),\n                ...this.isDevelopment ? [] : [\n                    new (winston__WEBPACK_IMPORTED_MODULE_0___default().transports).File({\n                        filename: 'logs/rejections.log'\n                    })\n                ]\n            ]\n        });\n    }\n    // Core logging methods\n    error(message, context) {\n        this.winston.error(message, context);\n    }\n    warn(message, context) {\n        this.winston.warn(message, context);\n    }\n    info(message, context) {\n        this.winston.info(message, context);\n    }\n    http(message, context) {\n        this.winston.http(message, context);\n    }\n    debug(message, context) {\n        this.winston.debug(message, context);\n    }\n    // Business event logging\n    logBusinessEvent(event) {\n        this.info(`Business Event: ${event.event}`, {\n            eventType: 'business',\n            event: event.event,\n            data: event.data,\n            timestamp: event.timestamp || new Date()\n        });\n    }\n    // Performance monitoring\n    logPerformance(metrics) {\n        const level = metrics.success ? 'info' : 'warn';\n        this.winston.log(level, `Performance: ${metrics.operation}`, {\n            eventType: 'performance',\n            operation: metrics.operation,\n            duration: metrics.duration,\n            success: metrics.success,\n            metadata: metrics.metadata\n        });\n    }\n    // Database operation logging\n    logDatabaseOperation(operation, duration, success, error) {\n        const context = {\n            eventType: 'database',\n            operation,\n            duration,\n            success\n        };\n        if (error) {\n            context.error = error;\n        }\n        if (success) {\n            this.debug(`DB Operation: ${operation} (${duration}ms)`, context);\n        } else {\n            this.error(`DB Operation Failed: ${operation}`, context);\n        }\n    }\n    // API request/response logging\n    logApiRequest(method, url, context) {\n        this.http(`${method} ${url}`, {\n            eventType: 'api_request',\n            method,\n            url,\n            ...context\n        });\n    }\n    logApiResponse(method, url, statusCode, duration, context) {\n        const level = statusCode >= 400 ? 'warn' : 'info';\n        this.winston.log(level, `${method} ${url} ${statusCode} (${duration}ms)`, {\n            eventType: 'api_response',\n            method,\n            url,\n            statusCode,\n            duration,\n            ...context\n        });\n    }\n    // Security event logging\n    logSecurityEvent(event, context) {\n        this.warn(`Security Event: ${event}`, {\n            eventType: 'security',\n            event,\n            ...context\n        });\n    }\n    // Authentication logging\n    logAuth(event, context) {\n        const level = event === 'login_failure' ? 'warn' : 'info';\n        this.winston.log(level, `Auth: ${event}`, {\n            eventType: 'auth',\n            event,\n            ...context\n        });\n    }\n    // Claim operation logging\n    logClaimOperation(orderId, success, reason, context) {\n        this.logBusinessEvent({\n            event: success ? 'claim_success' : 'claim_failure',\n            data: {\n                orderId,\n                success,\n                reason,\n                ...context\n            }\n        });\n    }\n    // Product operation logging\n    logProductOperation(operation, productId, context) {\n        this.logBusinessEvent({\n            event: `product_${operation}`,\n            data: {\n                productId,\n                operation,\n                ...context\n            }\n        });\n    }\n    // Order operation logging\n    logOrderOperation(operation, orderId, context) {\n        this.logBusinessEvent({\n            event: `order_${operation}`,\n            data: {\n                orderId,\n                operation,\n                ...context\n            }\n        });\n    }\n}\n// Create singleton instance\nconst logger = new Logger();\n// Performance measurement utility\nfunction measurePerformance(operation, fn, metadata) {\n    const start = Date.now();\n    return fn().then((result)=>{\n        const duration = Date.now() - start;\n        logger.logPerformance({\n            operation,\n            duration,\n            success: true,\n            metadata\n        });\n        return result;\n    }).catch((error)=>{\n        const duration = Date.now() - start;\n        logger.logPerformance({\n            operation,\n            duration,\n            success: false,\n            metadata: {\n                ...metadata,\n                error: error.message\n            }\n        });\n        throw error;\n    });\n}\n// Request ID generation\nfunction generateRequestId() {\n    return `req_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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UUFDaEQ7UUFDQSxNQUFNRDtJQUNSO0FBQ0o7QUFFQSx3QkFBd0I7QUFDakIsU0FBU3lDO0lBQ2QsT0FBTyxDQUFDLElBQUksRUFBRTlCLEtBQUswQixHQUFHLEdBQUcsQ0FBQyxFQUFFSyxLQUFLQyxNQUFNLEdBQUdDLFFBQVEsQ0FBQyxJQUFJQyxNQUFNLENBQUMsR0FBRyxJQUFJO0FBQ3ZFIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXEltYW5nXFxEb2N1bWVudHNcXEdpdEh1Ylxcc2VsZi1jbGFpbS1saW5rXFxsaWJcXGxvZ2dlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEVuaGFuY2VkIGxvZ2dpbmcgc3lzdGVtIHdpdGggc3RydWN0dXJlZCBsb2dnaW5nLCBwZXJmb3JtYW5jZSBtb25pdG9yaW5nLCBhbmQgZXJyb3IgdHJhY2tpbmdcbiAqL1xuXG5pbXBvcnQgd2luc3RvbiBmcm9tICd3aW5zdG9uJztcbmltcG9ydCBjb25maWcgZnJvbSAnLi9jb25maWcnO1xuXG4vLyBMb2cgbGV2ZWxzXG5leHBvcnQgZW51bSBMb2dMZXZlbCB7XG4gIEVSUk9SID0gJ2Vycm9yJyxcbiAgV0FSTiA9ICd3YXJuJyxcbiAgSU5GTyA9ICdpbmZvJyxcbiAgSFRUUCA9ICdodHRwJyxcbiAgREVCVUcgPSAnZGVidWcnXG59XG5cbi8vIExvZyBjb250ZXh0IGludGVyZmFjZVxuZXhwb3J0IGludGVyZmFjZSBMb2dDb250ZXh0IHtcbiAgcmVxdWVzdElkPzogc3RyaW5nO1xuICB1c2VySWQ/OiBzdHJpbmc7XG4gIG9yZGVySWQ/OiBzdHJpbmc7XG4gIHByb2R1Y3RJZD86IHN0cmluZztcbiAgaXA/OiBzdHJpbmc7XG4gIHVzZXJBZ2VudD86IHN0cmluZztcbiAgbWV0aG9kPzogc3RyaW5nO1xuICB1cmw/OiBzdHJpbmc7XG4gIHN0YXR1c0NvZGU/OiBudW1iZXI7XG4gIGR1cmF0aW9uPzogbnVtYmVyO1xuICBlcnJvcj86IGFueTtcbiAgW2tleTogc3RyaW5nXTogYW55O1xufVxuXG4vLyBQZXJmb3JtYW5jZSBtZXRyaWNzIGludGVyZmFjZVxuZXhwb3J0IGludGVyZmFjZSBQZXJmb3JtYW5jZU1ldHJpY3Mge1xuICBvcGVyYXRpb246IHN0cmluZztcbiAgZHVyYXRpb246IG51bWJlcjtcbiAgc3VjY2VzczogYm9vbGVhbjtcbiAgbWV0YWRhdGE/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+O1xufVxuXG4vLyBCdXNpbmVzcyBldmVudCBpbnRlcmZhY2VcbmV4cG9ydCBpbnRlcmZhY2UgQnVzaW5lc3NFdmVudCB7XG4gIGV2ZW50OiBzdHJpbmc7XG4gIGRhdGE6IFJlY29yZDxzdHJpbmcsIGFueT47XG4gIHRpbWVzdGFtcD86IERhdGU7XG59XG5cbmNsYXNzIExvZ2dlciB7XG4gIHByaXZhdGUgd2luc3Rvbjogd2luc3Rvbi5Mb2dnZXI7XG4gIHByaXZhdGUgaXNEZXZlbG9wbWVudDogYm9vbGVhbjtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmlzRGV2ZWxvcG1lbnQgPSBjb25maWcuaXNEZXZlbG9wbWVudCgpO1xuICAgIHRoaXMud2luc3RvbiA9IHRoaXMuY3JlYXRlV2luc3RvbkxvZ2dlcigpO1xuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVXaW5zdG9uTG9nZ2VyKCk6IHdpbnN0b24uTG9nZ2VyIHtcbiAgICBjb25zdCBmb3JtYXRzID0gW1xuICAgICAgd2luc3Rvbi5mb3JtYXQudGltZXN0YW1wKCksXG4gICAgICB3aW5zdG9uLmZvcm1hdC5lcnJvcnMoeyBzdGFjazogdHJ1ZSB9KSxcbiAgICAgIHdpbnN0b24uZm9ybWF0Lmpzb24oKVxuICAgIF07XG5cbiAgICBpZiAodGhpcy5pc0RldmVsb3BtZW50KSB7XG4gICAgICBmb3JtYXRzLnB1c2goXG4gICAgICAgIHdpbnN0b24uZm9ybWF0LmNvbG9yaXplKCksXG4gICAgICAgIHdpbnN0b24uZm9ybWF0LnNpbXBsZSgpXG4gICAgICApO1xuICAgIH1cblxuICAgIHJldHVybiB3aW5zdG9uLmNyZWF0ZUxvZ2dlcih7XG4gICAgICBsZXZlbDogdGhpcy5pc0RldmVsb3BtZW50ID8gJ2RlYnVnJyA6ICdpbmZvJyxcbiAgICAgIGZvcm1hdDogd2luc3Rvbi5mb3JtYXQuY29tYmluZSguLi5mb3JtYXRzKSxcbiAgICAgIGRlZmF1bHRNZXRhOiB7XG4gICAgICAgIHNlcnZpY2U6ICdzZWxmLWNsYWltLWxpbmsnLFxuICAgICAgICBlbnZpcm9ubWVudDogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgfHwgJ2RldmVsb3BtZW50J1xuICAgICAgfSxcbiAgICAgIHRyYW5zcG9ydHM6IFtcbiAgICAgICAgLy8gQ29uc29sZSB0cmFuc3BvcnRcbiAgICAgICAgbmV3IHdpbnN0b24udHJhbnNwb3J0cy5Db25zb2xlKHtcbiAgICAgICAgICBmb3JtYXQ6IHRoaXMuaXNEZXZlbG9wbWVudCBcbiAgICAgICAgICAgID8gd2luc3Rvbi5mb3JtYXQuY29tYmluZShcbiAgICAgICAgICAgICAgICB3aW5zdG9uLmZvcm1hdC5jb2xvcml6ZSgpLFxuICAgICAgICAgICAgICAgIHdpbnN0b24uZm9ybWF0LnNpbXBsZSgpXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIDogd2luc3Rvbi5mb3JtYXQuanNvbigpXG4gICAgICAgIH0pLFxuICAgICAgICBcbiAgICAgICAgLy8gRmlsZSB0cmFuc3BvcnRzIGZvciBwcm9kdWN0aW9uXG4gICAgICAgIC4uLih0aGlzLmlzRGV2ZWxvcG1lbnQgPyBbXSA6IFtcbiAgICAgICAgICBuZXcgd2luc3Rvbi50cmFuc3BvcnRzLkZpbGUoe1xuICAgICAgICAgICAgZmlsZW5hbWU6ICdsb2dzL2Vycm9yLmxvZycsXG4gICAgICAgICAgICBsZXZlbDogJ2Vycm9yJyxcbiAgICAgICAgICAgIG1heHNpemU6IDUyNDI4ODAsIC8vIDVNQlxuICAgICAgICAgICAgbWF4RmlsZXM6IDVcbiAgICAgICAgICB9KSxcbiAgICAgICAgICBuZXcgd2luc3Rvbi50cmFuc3BvcnRzLkZpbGUoe1xuICAgICAgICAgICAgZmlsZW5hbWU6ICdsb2dzL2NvbWJpbmVkLmxvZycsXG4gICAgICAgICAgICBtYXhzaXplOiA1MjQyODgwLCAvLyA1TUJcbiAgICAgICAgICAgIG1heEZpbGVzOiAxMFxuICAgICAgICAgIH0pXG4gICAgICAgIF0pXG4gICAgICBdLFxuICAgICAgZXhjZXB0aW9uSGFuZGxlcnM6IFtcbiAgICAgICAgbmV3IHdpbnN0b24udHJhbnNwb3J0cy5Db25zb2xlKCksXG4gICAgICAgIC4uLih0aGlzLmlzRGV2ZWxvcG1lbnQgPyBbXSA6IFtcbiAgICAgICAgICBuZXcgd2luc3Rvbi50cmFuc3BvcnRzLkZpbGUoeyBmaWxlbmFtZTogJ2xvZ3MvZXhjZXB0aW9ucy5sb2cnIH0pXG4gICAgICAgIF0pXG4gICAgICBdLFxuICAgICAgcmVqZWN0aW9uSGFuZGxlcnM6IFtcbiAgICAgICAgbmV3IHdpbnN0b24udHJhbnNwb3J0cy5Db25zb2xlKCksXG4gICAgICAgIC4uLih0aGlzLmlzRGV2ZWxvcG1lbnQgPyBbXSA6IFtcbiAgICAgICAgICBuZXcgd2luc3Rvbi50cmFuc3BvcnRzLkZpbGUoeyBmaWxlbmFtZTogJ2xvZ3MvcmVqZWN0aW9ucy5sb2cnIH0pXG4gICAgICAgIF0pXG4gICAgICBdXG4gICAgfSk7XG4gIH1cblxuICAvLyBDb3JlIGxvZ2dpbmcgbWV0aG9kc1xuICBlcnJvcihtZXNzYWdlOiBzdHJpbmcsIGNvbnRleHQ/OiBMb2dDb250ZXh0KTogdm9pZCB7XG4gICAgdGhpcy53aW5zdG9uLmVycm9yKG1lc3NhZ2UsIGNvbnRleHQpO1xuICB9XG5cbiAgd2FybihtZXNzYWdlOiBzdHJpbmcsIGNvbnRleHQ/OiBMb2dDb250ZXh0KTogdm9pZCB7XG4gICAgdGhpcy53aW5zdG9uLndhcm4obWVzc2FnZSwgY29udGV4dCk7XG4gIH1cblxuICBpbmZvKG1lc3NhZ2U6IHN0cmluZywgY29udGV4dD86IExvZ0NvbnRleHQpOiB2b2lkIHtcbiAgICB0aGlzLndpbnN0b24uaW5mbyhtZXNzYWdlLCBjb250ZXh0KTtcbiAgfVxuXG4gIGh0dHAobWVzc2FnZTogc3RyaW5nLCBjb250ZXh0PzogTG9nQ29udGV4dCk6IHZvaWQge1xuICAgIHRoaXMud2luc3Rvbi5odHRwKG1lc3NhZ2UsIGNvbnRleHQpO1xuICB9XG5cbiAgZGVidWcobWVzc2FnZTogc3RyaW5nLCBjb250ZXh0PzogTG9nQ29udGV4dCk6IHZvaWQge1xuICAgIHRoaXMud2luc3Rvbi5kZWJ1ZyhtZXNzYWdlLCBjb250ZXh0KTtcbiAgfVxuXG4gIC8vIEJ1c2luZXNzIGV2ZW50IGxvZ2dpbmdcbiAgbG9nQnVzaW5lc3NFdmVudChldmVudDogQnVzaW5lc3NFdmVudCk6IHZvaWQge1xuICAgIHRoaXMuaW5mbyhgQnVzaW5lc3MgRXZlbnQ6ICR7ZXZlbnQuZXZlbnR9YCwge1xuICAgICAgZXZlbnRUeXBlOiAnYnVzaW5lc3MnLFxuICAgICAgZXZlbnQ6IGV2ZW50LmV2ZW50LFxuICAgICAgZGF0YTogZXZlbnQuZGF0YSxcbiAgICAgIHRpbWVzdGFtcDogZXZlbnQudGltZXN0YW1wIHx8IG5ldyBEYXRlKClcbiAgICB9KTtcbiAgfVxuXG4gIC8vIFBlcmZvcm1hbmNlIG1vbml0b3JpbmdcbiAgbG9nUGVyZm9ybWFuY2UobWV0cmljczogUGVyZm9ybWFuY2VNZXRyaWNzKTogdm9pZCB7XG4gICAgY29uc3QgbGV2ZWwgPSBtZXRyaWNzLnN1Y2Nlc3MgPyAnaW5mbycgOiAnd2Fybic7XG4gICAgdGhpcy53aW5zdG9uLmxvZyhsZXZlbCwgYFBlcmZvcm1hbmNlOiAke21ldHJpY3Mub3BlcmF0aW9ufWAsIHtcbiAgICAgIGV2ZW50VHlwZTogJ3BlcmZvcm1hbmNlJyxcbiAgICAgIG9wZXJhdGlvbjogbWV0cmljcy5vcGVyYXRpb24sXG4gICAgICBkdXJhdGlvbjogbWV0cmljcy5kdXJhdGlvbixcbiAgICAgIHN1Y2Nlc3M6IG1ldHJpY3Muc3VjY2VzcyxcbiAgICAgIG1ldGFkYXRhOiBtZXRyaWNzLm1ldGFkYXRhXG4gICAgfSk7XG4gIH1cblxuICAvLyBEYXRhYmFzZSBvcGVyYXRpb24gbG9nZ2luZ1xuICBsb2dEYXRhYmFzZU9wZXJhdGlvbihvcGVyYXRpb246IHN0cmluZywgZHVyYXRpb246IG51bWJlciwgc3VjY2VzczogYm9vbGVhbiwgZXJyb3I/OiBhbnkpOiB2b2lkIHtcbiAgICBjb25zdCBjb250ZXh0OiBMb2dDb250ZXh0ID0ge1xuICAgICAgZXZlbnRUeXBlOiAnZGF0YWJhc2UnLFxuICAgICAgb3BlcmF0aW9uLFxuICAgICAgZHVyYXRpb24sXG4gICAgICBzdWNjZXNzXG4gICAgfTtcblxuICAgIGlmIChlcnJvcikge1xuICAgICAgY29udGV4dC5lcnJvciA9IGVycm9yO1xuICAgIH1cblxuICAgIGlmIChzdWNjZXNzKSB7XG4gICAgICB0aGlzLmRlYnVnKGBEQiBPcGVyYXRpb246ICR7b3BlcmF0aW9ufSAoJHtkdXJhdGlvbn1tcylgLCBjb250ZXh0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5lcnJvcihgREIgT3BlcmF0aW9uIEZhaWxlZDogJHtvcGVyYXRpb259YCwgY29udGV4dCk7XG4gICAgfVxuICB9XG5cbiAgLy8gQVBJIHJlcXVlc3QvcmVzcG9uc2UgbG9nZ2luZ1xuICBsb2dBcGlSZXF1ZXN0KG1ldGhvZDogc3RyaW5nLCB1cmw6IHN0cmluZywgY29udGV4dD86IExvZ0NvbnRleHQpOiB2b2lkIHtcbiAgICB0aGlzLmh0dHAoYCR7bWV0aG9kfSAke3VybH1gLCB7XG4gICAgICBldmVudFR5cGU6ICdhcGlfcmVxdWVzdCcsXG4gICAgICBtZXRob2QsXG4gICAgICB1cmwsXG4gICAgICAuLi5jb250ZXh0XG4gICAgfSk7XG4gIH1cblxuICBsb2dBcGlSZXNwb25zZShtZXRob2Q6IHN0cmluZywgdXJsOiBzdHJpbmcsIHN0YXR1c0NvZGU6IG51bWJlciwgZHVyYXRpb246IG51bWJlciwgY29udGV4dD86IExvZ0NvbnRleHQpOiB2b2lkIHtcbiAgICBjb25zdCBsZXZlbCA9IHN0YXR1c0NvZGUgPj0gNDAwID8gJ3dhcm4nIDogJ2luZm8nO1xuICAgIHRoaXMud2luc3Rvbi5sb2cobGV2ZWwsIGAke21ldGhvZH0gJHt1cmx9ICR7c3RhdHVzQ29kZX0gKCR7ZHVyYXRpb259bXMpYCwge1xuICAgICAgZXZlbnRUeXBlOiAnYXBpX3Jlc3BvbnNlJyxcbiAgICAgIG1ldGhvZCxcbiAgICAgIHVybCxcbiAgICAgIHN0YXR1c0NvZGUsXG4gICAgICBkdXJhdGlvbixcbiAgICAgIC4uLmNvbnRleHRcbiAgICB9KTtcbiAgfVxuXG4gIC8vIFNlY3VyaXR5IGV2ZW50IGxvZ2dpbmdcbiAgbG9nU2VjdXJpdHlFdmVudChldmVudDogc3RyaW5nLCBjb250ZXh0PzogTG9nQ29udGV4dCk6IHZvaWQge1xuICAgIHRoaXMud2FybihgU2VjdXJpdHkgRXZlbnQ6ICR7ZXZlbnR9YCwge1xuICAgICAgZXZlbnRUeXBlOiAnc2VjdXJpdHknLFxuICAgICAgZXZlbnQsXG4gICAgICAuLi5jb250ZXh0XG4gICAgfSk7XG4gIH1cblxuICAvLyBBdXRoZW50aWNhdGlvbiBsb2dnaW5nXG4gIGxvZ0F1dGgoZXZlbnQ6ICdsb2dpbl9hdHRlbXB0JyB8ICdsb2dpbl9zdWNjZXNzJyB8ICdsb2dpbl9mYWlsdXJlJyB8ICdsb2dvdXQnLCBjb250ZXh0PzogTG9nQ29udGV4dCk6IHZvaWQge1xuICAgIGNvbnN0IGxldmVsID0gZXZlbnQgPT09ICdsb2dpbl9mYWlsdXJlJyA/ICd3YXJuJyA6ICdpbmZvJztcbiAgICB0aGlzLndpbnN0b24ubG9nKGxldmVsLCBgQXV0aDogJHtldmVudH1gLCB7XG4gICAgICBldmVudFR5cGU6ICdhdXRoJyxcbiAgICAgIGV2ZW50LFxuICAgICAgLi4uY29udGV4dFxuICAgIH0pO1xuICB9XG5cbiAgLy8gQ2xhaW0gb3BlcmF0aW9uIGxvZ2dpbmdcbiAgbG9nQ2xhaW1PcGVyYXRpb24ob3JkZXJJZDogc3RyaW5nLCBzdWNjZXNzOiBib29sZWFuLCByZWFzb24/OiBzdHJpbmcsIGNvbnRleHQ/OiBMb2dDb250ZXh0KTogdm9pZCB7XG4gICAgdGhpcy5sb2dCdXNpbmVzc0V2ZW50KHtcbiAgICAgIGV2ZW50OiBzdWNjZXNzID8gJ2NsYWltX3N1Y2Nlc3MnIDogJ2NsYWltX2ZhaWx1cmUnLFxuICAgICAgZGF0YToge1xuICAgICAgICBvcmRlcklkLFxuICAgICAgICBzdWNjZXNzLFxuICAgICAgICByZWFzb24sXG4gICAgICAgIC4uLmNvbnRleHRcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8vIFByb2R1Y3Qgb3BlcmF0aW9uIGxvZ2dpbmdcbiAgbG9nUHJvZHVjdE9wZXJhdGlvbihvcGVyYXRpb246ICdjcmVhdGUnIHwgJ3VwZGF0ZScgfCAnZGVsZXRlJywgcHJvZHVjdElkOiBzdHJpbmcsIGNvbnRleHQ/OiBMb2dDb250ZXh0KTogdm9pZCB7XG4gICAgdGhpcy5sb2dCdXNpbmVzc0V2ZW50KHtcbiAgICAgIGV2ZW50OiBgcHJvZHVjdF8ke29wZXJhdGlvbn1gLFxuICAgICAgZGF0YToge1xuICAgICAgICBwcm9kdWN0SWQsXG4gICAgICAgIG9wZXJhdGlvbixcbiAgICAgICAgLi4uY29udGV4dFxuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLy8gT3JkZXIgb3BlcmF0aW9uIGxvZ2dpbmdcbiAgbG9nT3JkZXJPcGVyYXRpb24ob3BlcmF0aW9uOiAnY3JlYXRlJyB8ICd1cGRhdGUnIHwgJ2RlbGV0ZScsIG9yZGVySWQ6IHN0cmluZywgY29udGV4dD86IExvZ0NvbnRleHQpOiB2b2lkIHtcbiAgICB0aGlzLmxvZ0J1c2luZXNzRXZlbnQoe1xuICAgICAgZXZlbnQ6IGBvcmRlcl8ke29wZXJhdGlvbn1gLFxuICAgICAgZGF0YToge1xuICAgICAgICBvcmRlcklkLFxuICAgICAgICBvcGVyYXRpb24sXG4gICAgICAgIC4uLmNvbnRleHRcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuXG4vLyBDcmVhdGUgc2luZ2xldG9uIGluc3RhbmNlXG5leHBvcnQgY29uc3QgbG9nZ2VyID0gbmV3IExvZ2dlcigpO1xuXG4vLyBQZXJmb3JtYW5jZSBtZWFzdXJlbWVudCB1dGlsaXR5XG5leHBvcnQgZnVuY3Rpb24gbWVhc3VyZVBlcmZvcm1hbmNlPFQ+KFxuICBvcGVyYXRpb246IHN0cmluZyxcbiAgZm46ICgpID0+IFByb21pc2U8VD4sXG4gIG1ldGFkYXRhPzogUmVjb3JkPHN0cmluZywgYW55PlxuKTogUHJvbWlzZTxUPiB7XG4gIGNvbnN0IHN0YXJ0ID0gRGF0ZS5ub3coKTtcbiAgXG4gIHJldHVybiBmbigpXG4gICAgLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgICAgY29uc3QgZHVyYXRpb24gPSBEYXRlLm5vdygpIC0gc3RhcnQ7XG4gICAgICBsb2dnZXIubG9nUGVyZm9ybWFuY2Uoe1xuICAgICAgICBvcGVyYXRpb24sXG4gICAgICAgIGR1cmF0aW9uLFxuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBtZXRhZGF0YVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgY29uc3QgZHVyYXRpb24gPSBEYXRlLm5vdygpIC0gc3RhcnQ7XG4gICAgICBsb2dnZXIubG9nUGVyZm9ybWFuY2Uoe1xuICAgICAgICBvcGVyYXRpb24sXG4gICAgICAgIGR1cmF0aW9uLFxuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgbWV0YWRhdGE6IHsgLi4ubWV0YWRhdGEsIGVycm9yOiBlcnJvci5tZXNzYWdlIH1cbiAgICAgIH0pO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfSk7XG59XG5cbi8vIFJlcXVlc3QgSUQgZ2VuZXJhdGlvblxuZXhwb3J0IGZ1bmN0aW9uIGdlbmVyYXRlUmVxdWVzdElkKCk6IHN0cmluZyB7XG4gIHJldHVybiBgcmVxXyR7RGF0ZS5ub3coKX1fJHtNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwgOSl9YDtcbn1cbiJdLCJuYW1lcyI6WyJ3aW5zdG9uIiwiY29uZmlnIiwiTG9nTGV2ZWwiLCJMb2dnZXIiLCJpc0RldmVsb3BtZW50IiwiY3JlYXRlV2luc3RvbkxvZ2dlciIsImZvcm1hdHMiLCJmb3JtYXQiLCJ0aW1lc3RhbXAiLCJlcnJvcnMiLCJzdGFjayIsImpzb24iLCJwdXNoIiwiY29sb3JpemUiLCJzaW1wbGUiLCJjcmVhdGVMb2dnZXIiLCJsZXZlbCIsImNvbWJpbmUiLCJkZWZhdWx0TWV0YSIsInNlcnZpY2UiLCJlbnZpcm9ubWVudCIsInByb2Nlc3MiLCJ0cmFuc3BvcnRzIiwiQ29uc29sZSIsIkZpbGUiLCJmaWxlbmFtZSIsIm1heHNpemUiLCJtYXhGaWxlcyIsImV4Y2VwdGlvbkhhbmRsZXJzIiwicmVqZWN0aW9uSGFuZGxlcnMiLCJlcnJvciIsIm1lc3NhZ2UiLCJjb250ZXh0Iiwid2FybiIsImluZm8iLCJodHRwIiwiZGVidWciLCJsb2dCdXNpbmVzc0V2ZW50IiwiZXZlbnQiLCJldmVudFR5cGUiLCJkYXRhIiwiRGF0ZSIsImxvZ1BlcmZvcm1hbmNlIiwibWV0cmljcyIsInN1Y2Nlc3MiLCJsb2ciLCJvcGVyYXRpb24iLCJkdXJhdGlvbiIsIm1ldGFkYXRhIiwibG9nRGF0YWJhc2VPcGVyYXRpb24iLCJsb2dBcGlSZXF1ZXN0IiwibWV0aG9kIiwidXJsIiwibG9nQXBpUmVzcG9uc2UiLCJzdGF0dXNDb2RlIiwibG9nU2VjdXJpdHlFdmVudCIsImxvZ0F1dGgiLCJsb2dDbGFpbU9wZXJhdGlvbiIsIm9yZGVySWQiLCJyZWFzb24iLCJsb2dQcm9kdWN0T3BlcmF0aW9uIiwicHJvZHVjdElkIiwibG9nT3JkZXJPcGVyYXRpb24iLCJsb2dnZXIiLCJtZWFzdXJlUGVyZm9ybWFuY2UiLCJmbiIsInN0YXJ0Iiwibm93IiwidGhlbiIsInJlc3VsdCIsImNhdGNoIiwiZ2VuZXJhdGVSZXF1ZXN0SWQiLCJNYXRoIiwicmFuZG9tIiwidG9TdHJpbmciLCJzdWJzdHIiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/logger.ts\n");

/***/ }),

/***/ "(rsc)/./lib/validation.ts":
/*!***************************!*\
  !*** ./lib/validation.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ValidationError: () => (/* binding */ ValidationError),\n/* harmony export */   sanitizeString: () => (/* binding */ sanitizeString),\n/* harmony export */   validateAdminCredentials: () => (/* binding */ validateAdminCredentials),\n/* harmony export */   validateOrderData: () => (/* binding */ validateOrderData),\n/* harmony export */   validateOrderId: () => (/* binding */ validateOrderId),\n/* harmony export */   validateProductData: () => (/* binding */ validateProductData),\n/* harmony export */   validateRequest: () => (/* binding */ validateRequest),\n/* harmony export */   validateSettingsData: () => (/* binding */ validateSettingsData)\n/* harmony export */ });\n/**\n * Input validation and sanitization utilities\n * Provides comprehensive validation for all API endpoints\n */ class ValidationError extends Error {\n    constructor(errors){\n        super(`Validation failed: ${errors.join(', ')}`), this.errors = errors;\n        this.name = 'ValidationError';\n    }\n}\n/**\n * Sanitize string input by removing potentially dangerous characters\n */ function sanitizeString(input, maxLength = 255) {\n    if (typeof input !== 'string') {\n        throw new ValidationError([\n            'Input must be a string'\n        ]);\n    }\n    return input.trim().slice(0, maxLength).replace(/[<>'\"&]/g, '') // Remove basic XSS characters\n    .replace(/\\0/g, ''); // Remove null bytes\n}\n/**\n * Validate and sanitize order ID\n */ function validateOrderId(orderId) {\n    const errors = [];\n    if (!orderId) {\n        errors.push('Order ID is required');\n        return {\n            isValid: false,\n            errors\n        };\n    }\n    if (typeof orderId !== 'string') {\n        errors.push('Order ID must be a string');\n        return {\n            isValid: false,\n            errors\n        };\n    }\n    const sanitized = sanitizeString(orderId, 50);\n    if (sanitized.length < 3) {\n        errors.push('Order ID must be at least 3 characters long');\n    }\n    if (sanitized.length > 50) {\n        errors.push('Order ID must be less than 50 characters');\n    }\n    if (!/^[a-zA-Z0-9\\-_]+$/.test(sanitized)) {\n        errors.push('Order ID can only contain letters, numbers, hyphens, and underscores');\n    }\n    return {\n        isValid: errors.length === 0,\n        errors,\n        sanitizedData: sanitized\n    };\n}\n/**\n * Validate admin credentials\n */ function validateAdminCredentials(data) {\n    const { username, password } = data;\n    const errors = [];\n    let sanitizedData = {};\n    // Validate username\n    if (!username) {\n        errors.push('Username is required');\n    } else if (typeof username !== 'string') {\n        errors.push('Username must be a string');\n    } else {\n        const sanitizedUsername = sanitizeString(username, 50);\n        if (sanitizedUsername.length < 3) {\n            errors.push('Username must be at least 3 characters long');\n        }\n        if (sanitizedUsername.length > 50) {\n            errors.push('Username must be less than 50 characters');\n        }\n        if (!/^[a-zA-Z0-9_]+$/.test(sanitizedUsername)) {\n            errors.push('Username can only contain letters, numbers, and underscores');\n        }\n        sanitizedData.username = sanitizedUsername;\n    }\n    // Validate password (for authentication - only check if provided, no complexity rules)\n    if (!password) {\n        errors.push('Password is required');\n    } else if (typeof password !== 'string') {\n        errors.push('Password must be a string');\n    } else {\n        // For authentication, accept any password that was previously set\n        // Password complexity rules are only enforced during password creation/change\n        sanitizedData.password = password;\n    }\n    return {\n        isValid: errors.length === 0,\n        errors,\n        sanitizedData\n    };\n}\n/**\n * Validate product data\n */ function validateProductData(data) {\n    const errors = [];\n    let sanitizedData = {};\n    // Validate name\n    if (!data.name) {\n        errors.push('Product name is required');\n    } else if (typeof data.name !== 'string') {\n        errors.push('Product name must be a string');\n    } else {\n        const sanitizedName = sanitizeString(data.name, 100);\n        if (sanitizedName.length < 2) {\n            errors.push('Product name must be at least 2 characters long');\n        }\n        sanitizedData.name = sanitizedName;\n    }\n    // Validate description (optional)\n    if (data.description !== undefined && data.description !== null) {\n        if (typeof data.description !== 'string') {\n            errors.push('Product description must be a string');\n        } else {\n            sanitizedData.description = sanitizeString(data.description, 500);\n        }\n    }\n    // Validate download_link\n    if (!data.download_link) {\n        errors.push('Download link is required');\n    } else if (typeof data.download_link !== 'string') {\n        errors.push('Download link must be a string');\n    } else {\n        const urlPattern = /^https?:\\/\\/.+/;\n        if (!urlPattern.test(data.download_link)) {\n            errors.push('Download link must be a valid HTTP/HTTPS URL');\n        }\n        if (data.download_link.length > 500) {\n            errors.push('Download link must be less than 500 characters');\n        }\n        sanitizedData.download_link = data.download_link.trim();\n    }\n    // Validate image_url (optional)\n    if (data.image_url !== undefined && data.image_url !== null && data.image_url !== '') {\n        if (typeof data.image_url !== 'string') {\n            errors.push('Image URL must be a string');\n        } else {\n            const urlPattern = /^https?:\\/\\/.+/;\n            if (!urlPattern.test(data.image_url)) {\n                errors.push('Image URL must be a valid HTTP/HTTPS URL');\n            }\n            if (data.image_url.length > 500) {\n                errors.push('Image URL must be less than 500 characters');\n            }\n            sanitizedData.image_url = data.image_url.trim();\n        }\n    }\n    return {\n        isValid: errors.length === 0,\n        errors,\n        sanitizedData\n    };\n}\n/**\n * Validate order creation data\n */ function validateOrderData(data) {\n    const errors = [];\n    let sanitizedData = {};\n    // Validate order_id\n    const orderIdValidation = validateOrderId(data.order_id);\n    if (!orderIdValidation.isValid) {\n        errors.push(...orderIdValidation.errors);\n    } else {\n        sanitizedData.order_id = orderIdValidation.sanitizedData;\n    }\n    // Validate product_ids\n    if (!data.product_ids) {\n        errors.push('Product IDs are required');\n    } else if (!Array.isArray(data.product_ids)) {\n        errors.push('Product IDs must be an array');\n    } else if (data.product_ids.length === 0) {\n        errors.push('At least one product ID is required');\n    } else {\n        const validProductIds = [];\n        data.product_ids.forEach((id, index)=>{\n            if (typeof id !== 'number' || !Number.isInteger(id) || id <= 0) {\n                errors.push(`Product ID at index ${index} must be a positive integer`);\n            } else {\n                validProductIds.push(id);\n            }\n        });\n        sanitizedData.product_ids = validProductIds;\n    }\n    // Validate expiration_days\n    if (data.expiration_days !== undefined) {\n        if (typeof data.expiration_days !== 'number' || !Number.isInteger(data.expiration_days)) {\n            errors.push('Expiration days must be an integer');\n        } else if (data.expiration_days < 1 || data.expiration_days > 365) {\n            errors.push('Expiration days must be between 1 and 365');\n        } else {\n            sanitizedData.expiration_days = data.expiration_days;\n        }\n    }\n    // Validate one_time_use\n    if (data.one_time_use !== undefined) {\n        if (typeof data.one_time_use !== 'boolean') {\n            errors.push('One-time use must be a boolean');\n        } else {\n            sanitizedData.one_time_use = data.one_time_use;\n        }\n    }\n    // Validate created_by (optional)\n    if (data.created_by !== undefined && data.created_by !== null) {\n        if (typeof data.created_by !== 'string') {\n            errors.push('Created by must be a string');\n        } else {\n            sanitizedData.created_by = sanitizeString(data.created_by, 50);\n        }\n    }\n    return {\n        isValid: errors.length === 0,\n        errors,\n        sanitizedData\n    };\n}\n/**\n * Validate settings data\n */ function validateSettingsData(data) {\n    const errors = [];\n    let sanitizedData = {};\n    if (!data || typeof data !== 'object') {\n        errors.push('Settings data must be an object');\n        return {\n            isValid: false,\n            errors\n        };\n    }\n    // Validate each setting\n    Object.keys(data).forEach((key)=>{\n        const sanitizedKey = sanitizeString(key, 50);\n        const value = data[key];\n        if (!/^[a-zA-Z0-9_]+$/.test(sanitizedKey)) {\n            errors.push(`Setting key \"${key}\" can only contain letters, numbers, and underscores`);\n            return;\n        }\n        if (typeof value !== 'string' && typeof value !== 'number' && typeof value !== 'boolean') {\n            errors.push(`Setting value for \"${key}\" must be a string, number, or boolean`);\n            return;\n        }\n        if (typeof value === 'string') {\n            sanitizedData[sanitizedKey] = sanitizeString(value, 100);\n        } else {\n            sanitizedData[sanitizedKey] = value;\n        }\n    });\n    return {\n        isValid: errors.length === 0,\n        errors,\n        sanitizedData\n    };\n}\n/**\n * Middleware function to validate request body\n */ function validateRequest(validationFn) {\n    return (data)=>{\n        const result = validationFn(data);\n        if (!result.isValid) {\n            throw new ValidationError(result.errors);\n        }\n        return result.sanitizedData;\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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akM7UUFDTixNQUFNa0MsU0FBU0QsYUFBYWpDO1FBQzVCLElBQUksQ0FBQ2tDLE9BQU94QyxPQUFPLEVBQUU7WUFDbkIsTUFBTSxJQUFJZCxnQkFBZ0JzRCxPQUFPcEQsTUFBTTtRQUN6QztRQUNBLE9BQU9vRCxPQUFPcEMsYUFBYTtJQUM3QjtBQUNGIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXEltYW5nXFxEb2N1bWVudHNcXEdpdEh1Ylxcc2VsZi1jbGFpbS1saW5rXFxsaWJcXHZhbGlkYXRpb24udHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBJbnB1dCB2YWxpZGF0aW9uIGFuZCBzYW5pdGl6YXRpb24gdXRpbGl0aWVzXG4gKiBQcm92aWRlcyBjb21wcmVoZW5zaXZlIHZhbGlkYXRpb24gZm9yIGFsbCBBUEkgZW5kcG9pbnRzXG4gKi9cblxuZXhwb3J0IGludGVyZmFjZSBWYWxpZGF0aW9uUmVzdWx0IHtcbiAgaXNWYWxpZDogYm9vbGVhbjtcbiAgZXJyb3JzOiBzdHJpbmdbXTtcbiAgc2FuaXRpemVkRGF0YT86IGFueTtcbn1cblxuZXhwb3J0IGNsYXNzIFZhbGlkYXRpb25FcnJvciBleHRlbmRzIEVycm9yIHtcbiAgY29uc3RydWN0b3IocHVibGljIGVycm9yczogc3RyaW5nW10pIHtcbiAgICBzdXBlcihgVmFsaWRhdGlvbiBmYWlsZWQ6ICR7ZXJyb3JzLmpvaW4oJywgJyl9YCk7XG4gICAgdGhpcy5uYW1lID0gJ1ZhbGlkYXRpb25FcnJvcic7XG4gIH1cbn1cblxuLyoqXG4gKiBTYW5pdGl6ZSBzdHJpbmcgaW5wdXQgYnkgcmVtb3ZpbmcgcG90ZW50aWFsbHkgZGFuZ2Vyb3VzIGNoYXJhY3RlcnNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNhbml0aXplU3RyaW5nKGlucHV0OiBzdHJpbmcsIG1heExlbmd0aDogbnVtYmVyID0gMjU1KTogc3RyaW5nIHtcbiAgaWYgKHR5cGVvZiBpbnB1dCAhPT0gJ3N0cmluZycpIHtcbiAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKFsnSW5wdXQgbXVzdCBiZSBhIHN0cmluZyddKTtcbiAgfVxuICBcbiAgcmV0dXJuIGlucHV0XG4gICAgLnRyaW0oKVxuICAgIC5zbGljZSgwLCBtYXhMZW5ndGgpXG4gICAgLnJlcGxhY2UoL1s8PidcIiZdL2csICcnKSAvLyBSZW1vdmUgYmFzaWMgWFNTIGNoYXJhY3RlcnNcbiAgICAucmVwbGFjZSgvXFwwL2csICcnKTsgLy8gUmVtb3ZlIG51bGwgYnl0ZXNcbn1cblxuLyoqXG4gKiBWYWxpZGF0ZSBhbmQgc2FuaXRpemUgb3JkZXIgSURcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlT3JkZXJJZChvcmRlcklkOiBhbnkpOiBWYWxpZGF0aW9uUmVzdWx0IHtcbiAgY29uc3QgZXJyb3JzOiBzdHJpbmdbXSA9IFtdO1xuICBcbiAgaWYgKCFvcmRlcklkKSB7XG4gICAgZXJyb3JzLnB1c2goJ09yZGVyIElEIGlzIHJlcXVpcmVkJyk7XG4gICAgcmV0dXJuIHsgaXNWYWxpZDogZmFsc2UsIGVycm9ycyB9O1xuICB9XG4gIFxuICBpZiAodHlwZW9mIG9yZGVySWQgIT09ICdzdHJpbmcnKSB7XG4gICAgZXJyb3JzLnB1c2goJ09yZGVyIElEIG11c3QgYmUgYSBzdHJpbmcnKTtcbiAgICByZXR1cm4geyBpc1ZhbGlkOiBmYWxzZSwgZXJyb3JzIH07XG4gIH1cbiAgXG4gIGNvbnN0IHNhbml0aXplZCA9IHNhbml0aXplU3RyaW5nKG9yZGVySWQsIDUwKTtcbiAgXG4gIGlmIChzYW5pdGl6ZWQubGVuZ3RoIDwgMykge1xuICAgIGVycm9ycy5wdXNoKCdPcmRlciBJRCBtdXN0IGJlIGF0IGxlYXN0IDMgY2hhcmFjdGVycyBsb25nJyk7XG4gIH1cbiAgXG4gIGlmIChzYW5pdGl6ZWQubGVuZ3RoID4gNTApIHtcbiAgICBlcnJvcnMucHVzaCgnT3JkZXIgSUQgbXVzdCBiZSBsZXNzIHRoYW4gNTAgY2hhcmFjdGVycycpO1xuICB9XG4gIFxuICBpZiAoIS9eW2EtekEtWjAtOVxcLV9dKyQvLnRlc3Qoc2FuaXRpemVkKSkge1xuICAgIGVycm9ycy5wdXNoKCdPcmRlciBJRCBjYW4gb25seSBjb250YWluIGxldHRlcnMsIG51bWJlcnMsIGh5cGhlbnMsIGFuZCB1bmRlcnNjb3JlcycpO1xuICB9XG4gIFxuICByZXR1cm4ge1xuICAgIGlzVmFsaWQ6IGVycm9ycy5sZW5ndGggPT09IDAsXG4gICAgZXJyb3JzLFxuICAgIHNhbml0aXplZERhdGE6IHNhbml0aXplZFxuICB9O1xufVxuXG4vKipcbiAqIFZhbGlkYXRlIGFkbWluIGNyZWRlbnRpYWxzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZUFkbWluQ3JlZGVudGlhbHMoZGF0YTogYW55KTogVmFsaWRhdGlvblJlc3VsdCB7XG4gIGNvbnN0IHsgdXNlcm5hbWUsIHBhc3N3b3JkIH0gPSBkYXRhO1xuICBjb25zdCBlcnJvcnM6IHN0cmluZ1tdID0gW107XG4gIGxldCBzYW5pdGl6ZWREYXRhOiBhbnkgPSB7fTtcbiAgXG4gIC8vIFZhbGlkYXRlIHVzZXJuYW1lXG4gIGlmICghdXNlcm5hbWUpIHtcbiAgICBlcnJvcnMucHVzaCgnVXNlcm5hbWUgaXMgcmVxdWlyZWQnKTtcbiAgfSBlbHNlIGlmICh0eXBlb2YgdXNlcm5hbWUgIT09ICdzdHJpbmcnKSB7XG4gICAgZXJyb3JzLnB1c2goJ1VzZXJuYW1lIG11c3QgYmUgYSBzdHJpbmcnKTtcbiAgfSBlbHNlIHtcbiAgICBjb25zdCBzYW5pdGl6ZWRVc2VybmFtZSA9IHNhbml0aXplU3RyaW5nKHVzZXJuYW1lLCA1MCk7XG4gICAgaWYgKHNhbml0aXplZFVzZXJuYW1lLmxlbmd0aCA8IDMpIHtcbiAgICAgIGVycm9ycy5wdXNoKCdVc2VybmFtZSBtdXN0IGJlIGF0IGxlYXN0IDMgY2hhcmFjdGVycyBsb25nJyk7XG4gICAgfVxuICAgIGlmIChzYW5pdGl6ZWRVc2VybmFtZS5sZW5ndGggPiA1MCkge1xuICAgICAgZXJyb3JzLnB1c2goJ1VzZXJuYW1lIG11c3QgYmUgbGVzcyB0aGFuIDUwIGNoYXJhY3RlcnMnKTtcbiAgICB9XG4gICAgaWYgKCEvXlthLXpBLVowLTlfXSskLy50ZXN0KHNhbml0aXplZFVzZXJuYW1lKSkge1xuICAgICAgZXJyb3JzLnB1c2goJ1VzZXJuYW1lIGNhbiBvbmx5IGNvbnRhaW4gbGV0dGVycywgbnVtYmVycywgYW5kIHVuZGVyc2NvcmVzJyk7XG4gICAgfVxuICAgIHNhbml0aXplZERhdGEudXNlcm5hbWUgPSBzYW5pdGl6ZWRVc2VybmFtZTtcbiAgfVxuICBcbiAgLy8gVmFsaWRhdGUgcGFzc3dvcmQgKGZvciBhdXRoZW50aWNhdGlvbiAtIG9ubHkgY2hlY2sgaWYgcHJvdmlkZWQsIG5vIGNvbXBsZXhpdHkgcnVsZXMpXG4gIGlmICghcGFzc3dvcmQpIHtcbiAgICBlcnJvcnMucHVzaCgnUGFzc3dvcmQgaXMgcmVxdWlyZWQnKTtcbiAgfSBlbHNlIGlmICh0eXBlb2YgcGFzc3dvcmQgIT09ICdzdHJpbmcnKSB7XG4gICAgZXJyb3JzLnB1c2goJ1Bhc3N3b3JkIG11c3QgYmUgYSBzdHJpbmcnKTtcbiAgfSBlbHNlIHtcbiAgICAvLyBGb3IgYXV0aGVudGljYXRpb24sIGFjY2VwdCBhbnkgcGFzc3dvcmQgdGhhdCB3YXMgcHJldmlvdXNseSBzZXRcbiAgICAvLyBQYXNzd29yZCBjb21wbGV4aXR5IHJ1bGVzIGFyZSBvbmx5IGVuZm9yY2VkIGR1cmluZyBwYXNzd29yZCBjcmVhdGlvbi9jaGFuZ2VcbiAgICBzYW5pdGl6ZWREYXRhLnBhc3N3b3JkID0gcGFzc3dvcmQ7XG4gIH1cbiAgXG4gIHJldHVybiB7XG4gICAgaXNWYWxpZDogZXJyb3JzLmxlbmd0aCA9PT0gMCxcbiAgICBlcnJvcnMsXG4gICAgc2FuaXRpemVkRGF0YVxuICB9O1xufVxuXG4vKipcbiAqIFZhbGlkYXRlIHByb2R1Y3QgZGF0YVxuICovXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVQcm9kdWN0RGF0YShkYXRhOiBhbnkpOiBWYWxpZGF0aW9uUmVzdWx0IHtcbiAgY29uc3QgZXJyb3JzOiBzdHJpbmdbXSA9IFtdO1xuICBsZXQgc2FuaXRpemVkRGF0YTogYW55ID0ge307XG4gIFxuICAvLyBWYWxpZGF0ZSBuYW1lXG4gIGlmICghZGF0YS5uYW1lKSB7XG4gICAgZXJyb3JzLnB1c2goJ1Byb2R1Y3QgbmFtZSBpcyByZXF1aXJlZCcpO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBkYXRhLm5hbWUgIT09ICdzdHJpbmcnKSB7XG4gICAgZXJyb3JzLnB1c2goJ1Byb2R1Y3QgbmFtZSBtdXN0IGJlIGEgc3RyaW5nJyk7XG4gIH0gZWxzZSB7XG4gICAgY29uc3Qgc2FuaXRpemVkTmFtZSA9IHNhbml0aXplU3RyaW5nKGRhdGEubmFtZSwgMTAwKTtcbiAgICBpZiAoc2FuaXRpemVkTmFtZS5sZW5ndGggPCAyKSB7XG4gICAgICBlcnJvcnMucHVzaCgnUHJvZHVjdCBuYW1lIG11c3QgYmUgYXQgbGVhc3QgMiBjaGFyYWN0ZXJzIGxvbmcnKTtcbiAgICB9XG4gICAgc2FuaXRpemVkRGF0YS5uYW1lID0gc2FuaXRpemVkTmFtZTtcbiAgfVxuICBcbiAgLy8gVmFsaWRhdGUgZGVzY3JpcHRpb24gKG9wdGlvbmFsKVxuICBpZiAoZGF0YS5kZXNjcmlwdGlvbiAhPT0gdW5kZWZpbmVkICYmIGRhdGEuZGVzY3JpcHRpb24gIT09IG51bGwpIHtcbiAgICBpZiAodHlwZW9mIGRhdGEuZGVzY3JpcHRpb24gIT09ICdzdHJpbmcnKSB7XG4gICAgICBlcnJvcnMucHVzaCgnUHJvZHVjdCBkZXNjcmlwdGlvbiBtdXN0IGJlIGEgc3RyaW5nJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNhbml0aXplZERhdGEuZGVzY3JpcHRpb24gPSBzYW5pdGl6ZVN0cmluZyhkYXRhLmRlc2NyaXB0aW9uLCA1MDApO1xuICAgIH1cbiAgfVxuICBcbiAgLy8gVmFsaWRhdGUgZG93bmxvYWRfbGlua1xuICBpZiAoIWRhdGEuZG93bmxvYWRfbGluaykge1xuICAgIGVycm9ycy5wdXNoKCdEb3dubG9hZCBsaW5rIGlzIHJlcXVpcmVkJyk7XG4gIH0gZWxzZSBpZiAodHlwZW9mIGRhdGEuZG93bmxvYWRfbGluayAhPT0gJ3N0cmluZycpIHtcbiAgICBlcnJvcnMucHVzaCgnRG93bmxvYWQgbGluayBtdXN0IGJlIGEgc3RyaW5nJyk7XG4gIH0gZWxzZSB7XG4gICAgY29uc3QgdXJsUGF0dGVybiA9IC9eaHR0cHM/OlxcL1xcLy4rLztcbiAgICBpZiAoIXVybFBhdHRlcm4udGVzdChkYXRhLmRvd25sb2FkX2xpbmspKSB7XG4gICAgICBlcnJvcnMucHVzaCgnRG93bmxvYWQgbGluayBtdXN0IGJlIGEgdmFsaWQgSFRUUC9IVFRQUyBVUkwnKTtcbiAgICB9XG4gICAgaWYgKGRhdGEuZG93bmxvYWRfbGluay5sZW5ndGggPiA1MDApIHtcbiAgICAgIGVycm9ycy5wdXNoKCdEb3dubG9hZCBsaW5rIG11c3QgYmUgbGVzcyB0aGFuIDUwMCBjaGFyYWN0ZXJzJyk7XG4gICAgfVxuICAgIHNhbml0aXplZERhdGEuZG93bmxvYWRfbGluayA9IGRhdGEuZG93bmxvYWRfbGluay50cmltKCk7XG4gIH1cbiAgXG4gIC8vIFZhbGlkYXRlIGltYWdlX3VybCAob3B0aW9uYWwpXG4gIGlmIChkYXRhLmltYWdlX3VybCAhPT0gdW5kZWZpbmVkICYmIGRhdGEuaW1hZ2VfdXJsICE9PSBudWxsICYmIGRhdGEuaW1hZ2VfdXJsICE9PSAnJykge1xuICAgIGlmICh0eXBlb2YgZGF0YS5pbWFnZV91cmwgIT09ICdzdHJpbmcnKSB7XG4gICAgICBlcnJvcnMucHVzaCgnSW1hZ2UgVVJMIG11c3QgYmUgYSBzdHJpbmcnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgdXJsUGF0dGVybiA9IC9eaHR0cHM/OlxcL1xcLy4rLztcbiAgICAgIGlmICghdXJsUGF0dGVybi50ZXN0KGRhdGEuaW1hZ2VfdXJsKSkge1xuICAgICAgICBlcnJvcnMucHVzaCgnSW1hZ2UgVVJMIG11c3QgYmUgYSB2YWxpZCBIVFRQL0hUVFBTIFVSTCcpO1xuICAgICAgfVxuICAgICAgaWYgKGRhdGEuaW1hZ2VfdXJsLmxlbmd0aCA+IDUwMCkge1xuICAgICAgICBlcnJvcnMucHVzaCgnSW1hZ2UgVVJMIG11c3QgYmUgbGVzcyB0aGFuIDUwMCBjaGFyYWN0ZXJzJyk7XG4gICAgICB9XG4gICAgICBzYW5pdGl6ZWREYXRhLmltYWdlX3VybCA9IGRhdGEuaW1hZ2VfdXJsLnRyaW0oKTtcbiAgICB9XG4gIH1cbiAgXG4gIHJldHVybiB7XG4gICAgaXNWYWxpZDogZXJyb3JzLmxlbmd0aCA9PT0gMCxcbiAgICBlcnJvcnMsXG4gICAgc2FuaXRpemVkRGF0YVxuICB9O1xufVxuXG4vKipcbiAqIFZhbGlkYXRlIG9yZGVyIGNyZWF0aW9uIGRhdGFcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlT3JkZXJEYXRhKGRhdGE6IGFueSk6IFZhbGlkYXRpb25SZXN1bHQge1xuICBjb25zdCBlcnJvcnM6IHN0cmluZ1tdID0gW107XG4gIGxldCBzYW5pdGl6ZWREYXRhOiBhbnkgPSB7fTtcbiAgXG4gIC8vIFZhbGlkYXRlIG9yZGVyX2lkXG4gIGNvbnN0IG9yZGVySWRWYWxpZGF0aW9uID0gdmFsaWRhdGVPcmRlcklkKGRhdGEub3JkZXJfaWQpO1xuICBpZiAoIW9yZGVySWRWYWxpZGF0aW9uLmlzVmFsaWQpIHtcbiAgICBlcnJvcnMucHVzaCguLi5vcmRlcklkVmFsaWRhdGlvbi5lcnJvcnMpO1xuICB9IGVsc2Uge1xuICAgIHNhbml0aXplZERhdGEub3JkZXJfaWQgPSBvcmRlcklkVmFsaWRhdGlvbi5zYW5pdGl6ZWREYXRhO1xuICB9XG4gIFxuICAvLyBWYWxpZGF0ZSBwcm9kdWN0X2lkc1xuICBpZiAoIWRhdGEucHJvZHVjdF9pZHMpIHtcbiAgICBlcnJvcnMucHVzaCgnUHJvZHVjdCBJRHMgYXJlIHJlcXVpcmVkJyk7XG4gIH0gZWxzZSBpZiAoIUFycmF5LmlzQXJyYXkoZGF0YS5wcm9kdWN0X2lkcykpIHtcbiAgICBlcnJvcnMucHVzaCgnUHJvZHVjdCBJRHMgbXVzdCBiZSBhbiBhcnJheScpO1xuICB9IGVsc2UgaWYgKGRhdGEucHJvZHVjdF9pZHMubGVuZ3RoID09PSAwKSB7XG4gICAgZXJyb3JzLnB1c2goJ0F0IGxlYXN0IG9uZSBwcm9kdWN0IElEIGlzIHJlcXVpcmVkJyk7XG4gIH0gZWxzZSB7XG4gICAgY29uc3QgdmFsaWRQcm9kdWN0SWRzOiBudW1iZXJbXSA9IFtdO1xuICAgIGRhdGEucHJvZHVjdF9pZHMuZm9yRWFjaCgoaWQ6IGFueSwgaW5kZXg6IG51bWJlcikgPT4ge1xuICAgICAgaWYgKHR5cGVvZiBpZCAhPT0gJ251bWJlcicgfHwgIU51bWJlci5pc0ludGVnZXIoaWQpIHx8IGlkIDw9IDApIHtcbiAgICAgICAgZXJyb3JzLnB1c2goYFByb2R1Y3QgSUQgYXQgaW5kZXggJHtpbmRleH0gbXVzdCBiZSBhIHBvc2l0aXZlIGludGVnZXJgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhbGlkUHJvZHVjdElkcy5wdXNoKGlkKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBzYW5pdGl6ZWREYXRhLnByb2R1Y3RfaWRzID0gdmFsaWRQcm9kdWN0SWRzO1xuICB9XG4gIFxuICAvLyBWYWxpZGF0ZSBleHBpcmF0aW9uX2RheXNcbiAgaWYgKGRhdGEuZXhwaXJhdGlvbl9kYXlzICE9PSB1bmRlZmluZWQpIHtcbiAgICBpZiAodHlwZW9mIGRhdGEuZXhwaXJhdGlvbl9kYXlzICE9PSAnbnVtYmVyJyB8fCAhTnVtYmVyLmlzSW50ZWdlcihkYXRhLmV4cGlyYXRpb25fZGF5cykpIHtcbiAgICAgIGVycm9ycy5wdXNoKCdFeHBpcmF0aW9uIGRheXMgbXVzdCBiZSBhbiBpbnRlZ2VyJyk7XG4gICAgfSBlbHNlIGlmIChkYXRhLmV4cGlyYXRpb25fZGF5cyA8IDEgfHwgZGF0YS5leHBpcmF0aW9uX2RheXMgPiAzNjUpIHtcbiAgICAgIGVycm9ycy5wdXNoKCdFeHBpcmF0aW9uIGRheXMgbXVzdCBiZSBiZXR3ZWVuIDEgYW5kIDM2NScpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzYW5pdGl6ZWREYXRhLmV4cGlyYXRpb25fZGF5cyA9IGRhdGEuZXhwaXJhdGlvbl9kYXlzO1xuICAgIH1cbiAgfVxuICBcbiAgLy8gVmFsaWRhdGUgb25lX3RpbWVfdXNlXG4gIGlmIChkYXRhLm9uZV90aW1lX3VzZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgaWYgKHR5cGVvZiBkYXRhLm9uZV90aW1lX3VzZSAhPT0gJ2Jvb2xlYW4nKSB7XG4gICAgICBlcnJvcnMucHVzaCgnT25lLXRpbWUgdXNlIG11c3QgYmUgYSBib29sZWFuJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNhbml0aXplZERhdGEub25lX3RpbWVfdXNlID0gZGF0YS5vbmVfdGltZV91c2U7XG4gICAgfVxuICB9XG4gIFxuICAvLyBWYWxpZGF0ZSBjcmVhdGVkX2J5IChvcHRpb25hbClcbiAgaWYgKGRhdGEuY3JlYXRlZF9ieSAhPT0gdW5kZWZpbmVkICYmIGRhdGEuY3JlYXRlZF9ieSAhPT0gbnVsbCkge1xuICAgIGlmICh0eXBlb2YgZGF0YS5jcmVhdGVkX2J5ICE9PSAnc3RyaW5nJykge1xuICAgICAgZXJyb3JzLnB1c2goJ0NyZWF0ZWQgYnkgbXVzdCBiZSBhIHN0cmluZycpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzYW5pdGl6ZWREYXRhLmNyZWF0ZWRfYnkgPSBzYW5pdGl6ZVN0cmluZyhkYXRhLmNyZWF0ZWRfYnksIDUwKTtcbiAgICB9XG4gIH1cbiAgXG4gIHJldHVybiB7XG4gICAgaXNWYWxpZDogZXJyb3JzLmxlbmd0aCA9PT0gMCxcbiAgICBlcnJvcnMsXG4gICAgc2FuaXRpemVkRGF0YVxuICB9O1xufVxuXG4vKipcbiAqIFZhbGlkYXRlIHNldHRpbmdzIGRhdGFcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlU2V0dGluZ3NEYXRhKGRhdGE6IGFueSk6IFZhbGlkYXRpb25SZXN1bHQge1xuICBjb25zdCBlcnJvcnM6IHN0cmluZ1tdID0gW107XG4gIGxldCBzYW5pdGl6ZWREYXRhOiBhbnkgPSB7fTtcbiAgXG4gIGlmICghZGF0YSB8fCB0eXBlb2YgZGF0YSAhPT0gJ29iamVjdCcpIHtcbiAgICBlcnJvcnMucHVzaCgnU2V0dGluZ3MgZGF0YSBtdXN0IGJlIGFuIG9iamVjdCcpO1xuICAgIHJldHVybiB7IGlzVmFsaWQ6IGZhbHNlLCBlcnJvcnMgfTtcbiAgfVxuICBcbiAgLy8gVmFsaWRhdGUgZWFjaCBzZXR0aW5nXG4gIE9iamVjdC5rZXlzKGRhdGEpLmZvckVhY2goa2V5ID0+IHtcbiAgICBjb25zdCBzYW5pdGl6ZWRLZXkgPSBzYW5pdGl6ZVN0cmluZyhrZXksIDUwKTtcbiAgICBjb25zdCB2YWx1ZSA9IGRhdGFba2V5XTtcbiAgICBcbiAgICBpZiAoIS9eW2EtekEtWjAtOV9dKyQvLnRlc3Qoc2FuaXRpemVkS2V5KSkge1xuICAgICAgZXJyb3JzLnB1c2goYFNldHRpbmcga2V5IFwiJHtrZXl9XCIgY2FuIG9ubHkgY29udGFpbiBsZXR0ZXJzLCBudW1iZXJzLCBhbmQgdW5kZXJzY29yZXNgKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgXG4gICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ3N0cmluZycgJiYgdHlwZW9mIHZhbHVlICE9PSAnbnVtYmVyJyAmJiB0eXBlb2YgdmFsdWUgIT09ICdib29sZWFuJykge1xuICAgICAgZXJyb3JzLnB1c2goYFNldHRpbmcgdmFsdWUgZm9yIFwiJHtrZXl9XCIgbXVzdCBiZSBhIHN0cmluZywgbnVtYmVyLCBvciBib29sZWFuYCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIFxuICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICBzYW5pdGl6ZWREYXRhW3Nhbml0aXplZEtleV0gPSBzYW5pdGl6ZVN0cmluZyh2YWx1ZSwgMTAwKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2FuaXRpemVkRGF0YVtzYW5pdGl6ZWRLZXldID0gdmFsdWU7XG4gICAgfVxuICB9KTtcbiAgXG4gIHJldHVybiB7XG4gICAgaXNWYWxpZDogZXJyb3JzLmxlbmd0aCA9PT0gMCxcbiAgICBlcnJvcnMsXG4gICAgc2FuaXRpemVkRGF0YVxuICB9O1xufVxuXG4vKipcbiAqIE1pZGRsZXdhcmUgZnVuY3Rpb24gdG8gdmFsaWRhdGUgcmVxdWVzdCBib2R5XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZVJlcXVlc3QodmFsaWRhdGlvbkZuOiAoZGF0YTogYW55KSA9PiBWYWxpZGF0aW9uUmVzdWx0KSB7XG4gIHJldHVybiAoZGF0YTogYW55KSA9PiB7XG4gICAgY29uc3QgcmVzdWx0ID0gdmFsaWRhdGlvbkZuKGRhdGEpO1xuICAgIGlmICghcmVzdWx0LmlzVmFsaWQpIHtcbiAgICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IocmVzdWx0LmVycm9ycyk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQuc2FuaXRpemVkRGF0YTtcbiAgfTtcbn1cbiJdLCJuYW1lcyI6WyJWYWxpZGF0aW9uRXJyb3IiLCJFcnJvciIsImVycm9ycyIsImpvaW4iLCJuYW1lIiwic2FuaXRpemVTdHJpbmciLCJpbnB1dCIsIm1heExlbmd0aCIsInRyaW0iLCJzbGljZSIsInJlcGxhY2UiLCJ2YWxpZGF0ZU9yZGVySWQiLCJvcmRlcklkIiwicHVzaCIsImlzVmFsaWQiLCJzYW5pdGl6ZWQiLCJsZW5ndGgiLCJ0ZXN0Iiwic2FuaXRpemVkRGF0YSIsInZhbGlkYXRlQWRtaW5DcmVkZW50aWFscyIsImRhdGEiLCJ1c2VybmFtZSIsInBhc3N3b3JkIiwic2FuaXRpemVkVXNlcm5hbWUiLCJ2YWxpZGF0ZVByb2R1Y3REYXRhIiwic2FuaXRpemVkTmFtZSIsImRlc2NyaXB0aW9uIiwidW5kZWZpbmVkIiwiZG93bmxvYWRfbGluayIsInVybFBhdHRlcm4iLCJpbWFnZV91cmwiLCJ2YWxpZGF0ZU9yZGVyRGF0YSIsIm9yZGVySWRWYWxpZGF0aW9uIiwib3JkZXJfaWQiLCJwcm9kdWN0X2lkcyIsIkFycmF5IiwiaXNBcnJheSIsInZhbGlkUHJvZHVjdElkcyIsImZvckVhY2giLCJpZCIsImluZGV4IiwiTnVtYmVyIiwiaXNJbnRlZ2VyIiwiZXhwaXJhdGlvbl9kYXlzIiwib25lX3RpbWVfdXNlIiwiY3JlYXRlZF9ieSIsInZhbGlkYXRlU2V0dGluZ3NEYXRhIiwiT2JqZWN0Iiwia2V5cyIsImtleSIsInNhbml0aXplZEtleSIsInZhbHVlIiwidmFsaWRhdGVSZXF1ZXN0IiwidmFsaWRhdGlvbkZuIiwicmVzdWx0Il0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/validation.ts\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Forders%2Froute&page=%2Fapi%2Forders%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Forders%2Froute.ts&appDir=C%3A%5CUsers%5CImang%5CDocuments%5CGitHub%5Cself-claim-link%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CImang%5CDocuments%5CGitHub%5Cself-claim-link&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!":
/*!*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Forders%2Froute&page=%2Fapi%2Forders%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Forders%2Froute.ts&appDir=C%3A%5CUsers%5CImang%5CDocuments%5CGitHub%5Cself-claim-link%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CImang%5CDocuments%5CGitHub%5Cself-claim-link&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=! ***!
  \*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   handler: () => (/* binding */ handler),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next/dist/server/request-meta */ \"(rsc)/./node_modules/next/dist/server/request-meta.js\");\n/* harmony import */ var next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! next/dist/server/lib/trace/tracer */ \"(rsc)/./node_modules/next/dist/server/lib/trace/tracer.js\");\n/* harmony import */ var next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! next/dist/shared/lib/router/utils/app-paths */ \"next/dist/shared/lib/router/utils/app-paths\");\n/* harmony import */ var next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! next/dist/server/base-http/node */ \"(rsc)/./node_modules/next/dist/server/base-http/node.js\");\n/* harmony import */ var next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! next/dist/server/web/spec-extension/adapters/next-request */ \"(rsc)/./node_modules/next/dist/server/web/spec-extension/adapters/next-request.js\");\n/* harmony import */ var next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! next/dist/server/lib/trace/constants */ \"(rsc)/./node_modules/next/dist/server/lib/trace/constants.js\");\n/* harmony import */ var next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! next/dist/server/instrumentation/utils */ \"(rsc)/./node_modules/next/dist/server/instrumentation/utils.js\");\n/* harmony import */ var next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! next/dist/server/send-response */ \"(rsc)/./node_modules/next/dist/server/send-response.js\");\n/* harmony import */ var next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! next/dist/server/web/utils */ \"(rsc)/./node_modules/next/dist/server/web/utils.js\");\n/* harmony import */ var next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__);\n/* harmony import */ var next_dist_server_lib_cache_control__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! next/dist/server/lib/cache-control */ \"(rsc)/./node_modules/next/dist/server/lib/cache-control.js\");\n/* harmony import */ var next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! next/dist/lib/constants */ \"(rsc)/./node_modules/next/dist/lib/constants.js\");\n/* harmony import */ var next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__);\n/* harmony import */ var next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! next/dist/shared/lib/no-fallback-error.external */ \"next/dist/shared/lib/no-fallback-error.external\");\n/* harmony import */ var next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__);\n/* harmony import */ var next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! next/dist/server/response-cache */ \"(rsc)/./node_modules/next/dist/server/response-cache/index.js\");\n/* harmony import */ var next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__);\n/* harmony import */ var C_Users_Imang_Documents_GitHub_self_claim_link_app_api_orders_route_ts__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./app/api/orders/route.ts */ \"(rsc)/./app/api/orders/route.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([C_Users_Imang_Documents_GitHub_self_claim_link_app_api_orders_route_ts__WEBPACK_IMPORTED_MODULE_16__]);\nC_Users_Imang_Documents_GitHub_self_claim_link_app_api_orders_route_ts__WEBPACK_IMPORTED_MODULE_16__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"standalone\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/orders/route\",\n        pathname: \"/api/orders\",\n        filename: \"route\",\n        bundlePath: \"app/api/orders/route\"\n    },\n    distDir: \".next\" || 0,\n    projectDir:  false || '',\n    resolvedPagePath: \"C:\\\\Users\\\\Imang\\\\Documents\\\\GitHub\\\\self-claim-link\\\\app\\\\api\\\\orders\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_Imang_Documents_GitHub_self_claim_link_app_api_orders_route_ts__WEBPACK_IMPORTED_MODULE_16__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\nasync function handler(req, res, ctx) {\n    var _nextConfig_experimental;\n    let srcPage = \"/api/orders/route\";\n    // turbopack doesn't normalize `/index` in the page name\n    // so we need to to process dynamic routes properly\n    // TODO: fix turbopack providing differing value from webpack\n    if (false) {} else if (srcPage === '/index') {\n        // we always normalize /index specifically\n        srcPage = '/';\n    }\n    const multiZoneDraftMode = \"false\";\n    const prepareResult = await routeModule.prepare(req, res, {\n        srcPage,\n        multiZoneDraftMode\n    });\n    if (!prepareResult) {\n        res.statusCode = 400;\n        res.end('Bad Request');\n        ctx.waitUntil == null ? void 0 : ctx.waitUntil.call(ctx, Promise.resolve());\n        return null;\n    }\n    const { buildId, params, nextConfig, isDraftMode, prerenderManifest, routerServerContext, isOnDemandRevalidate, revalidateOnlyGenerated, resolvedPathname } = prepareResult;\n    const normalizedSrcPage = (0,next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5__.normalizeAppPath)(srcPage);\n    let isIsr = Boolean(prerenderManifest.dynamicRoutes[normalizedSrcPage] || prerenderManifest.routes[resolvedPathname]);\n    if (isIsr && !isDraftMode) {\n        const isPrerendered = Boolean(prerenderManifest.routes[resolvedPathname]);\n        const prerenderInfo = prerenderManifest.dynamicRoutes[normalizedSrcPage];\n        if (prerenderInfo) {\n            if (prerenderInfo.fallback === false && !isPrerendered) {\n                throw new next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__.NoFallbackError();\n            }\n        }\n    }\n    let cacheKey = null;\n    if (isIsr && !routeModule.isDev && !isDraftMode) {\n        cacheKey = resolvedPathname;\n        // ensure /index and / is normalized to one key\n        cacheKey = cacheKey === '/index' ? '/' : cacheKey;\n    }\n    const supportsDynamicResponse = // If we're in development, we always support dynamic HTML\n    routeModule.isDev === true || // If this is not SSG or does not have static paths, then it supports\n    // dynamic HTML.\n    !isIsr;\n    // This is a revalidation request if the request is for a static\n    // page and it is not being resumed from a postponed render and\n    // it is not a dynamic RSC request then it is a revalidation\n    // request.\n    const isRevalidate = isIsr && !supportsDynamicResponse;\n    const method = req.method || 'GET';\n    const tracer = (0,next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__.getTracer)();\n    const activeSpan = tracer.getActiveScopeSpan();\n    const context = {\n        params,\n        prerenderManifest,\n        renderOpts: {\n            experimental: {\n                dynamicIO: Boolean(nextConfig.experimental.dynamicIO),\n                authInterrupts: Boolean(nextConfig.experimental.authInterrupts)\n            },\n            supportsDynamicResponse,\n            incrementalCache: (0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'incrementalCache'),\n            cacheLifeProfiles: (_nextConfig_experimental = nextConfig.experimental) == null ? void 0 : _nextConfig_experimental.cacheLife,\n            isRevalidate,\n            waitUntil: ctx.waitUntil,\n            onClose: (cb)=>{\n                res.on('close', cb);\n            },\n            onAfterTaskError: undefined,\n            onInstrumentationRequestError: (error, _request, errorContext)=>routeModule.onRequestError(req, error, errorContext, routerServerContext)\n        },\n        sharedContext: {\n            buildId\n        }\n    };\n    const nodeNextReq = new next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__.NodeNextRequest(req);\n    const nodeNextRes = new next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__.NodeNextResponse(res);\n    const nextReq = next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__.NextRequestAdapter.fromNodeNextRequest(nodeNextReq, (0,next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__.signalFromNodeResponse)(res));\n    try {\n        const invokeRouteModule = async (span)=>{\n            return routeModule.handle(nextReq, context).finally(()=>{\n                if (!span) return;\n                span.setAttributes({\n                    'http.status_code': res.statusCode,\n                    'next.rsc': false\n                });\n                const rootSpanAttributes = tracer.getRootSpanAttributes();\n                // We were unable to get attributes, probably OTEL is not enabled\n                if (!rootSpanAttributes) {\n                    return;\n                }\n                if (rootSpanAttributes.get('next.span_type') !== next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__.BaseServerSpan.handleRequest) {\n                    console.warn(`Unexpected root span type '${rootSpanAttributes.get('next.span_type')}'. Please report this Next.js issue https://github.com/vercel/next.js`);\n                    return;\n                }\n                const route = rootSpanAttributes.get('next.route');\n                if (route) {\n                    const name = `${method} ${route}`;\n                    span.setAttributes({\n                        'next.route': route,\n                        'http.route': route,\n                        'next.span_name': name\n                    });\n                    span.updateName(name);\n                } else {\n                    span.updateName(`${method} ${req.url}`);\n                }\n            });\n        };\n        const handleResponse = async (currentSpan)=>{\n            var _cacheEntry_value;\n            const responseGenerator = async ({ previousCacheEntry })=>{\n                try {\n                    if (!(0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'minimalMode') && isOnDemandRevalidate && revalidateOnlyGenerated && !previousCacheEntry) {\n                        res.statusCode = 404;\n                        // on-demand revalidate always sets this header\n                        res.setHeader('x-nextjs-cache', 'REVALIDATED');\n                        res.end('This page could not be found');\n                        return null;\n                    }\n                    const response = await invokeRouteModule(currentSpan);\n                    req.fetchMetrics = context.renderOpts.fetchMetrics;\n                    let pendingWaitUntil = context.renderOpts.pendingWaitUntil;\n                    // Attempt using provided waitUntil if available\n                    // if it's not we fallback to sendResponse's handling\n                    if (pendingWaitUntil) {\n                        if (ctx.waitUntil) {\n                            ctx.waitUntil(pendingWaitUntil);\n                            pendingWaitUntil = undefined;\n                        }\n                    }\n                    const cacheTags = context.renderOpts.collectedTags;\n                    // If the request is for a static response, we can cache it so long\n                    // as it's not edge.\n                    if (isIsr) {\n                        const blob = await response.blob();\n                        // Copy the headers from the response.\n                        const headers = (0,next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__.toNodeOutgoingHttpHeaders)(response.headers);\n                        if (cacheTags) {\n                            headers[next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.NEXT_CACHE_TAGS_HEADER] = cacheTags;\n                        }\n                        if (!headers['content-type'] && blob.type) {\n                            headers['content-type'] = blob.type;\n                        }\n                        const revalidate = typeof context.renderOpts.collectedRevalidate === 'undefined' || context.renderOpts.collectedRevalidate >= next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.INFINITE_CACHE ? false : context.renderOpts.collectedRevalidate;\n                        const expire = typeof context.renderOpts.collectedExpire === 'undefined' || context.renderOpts.collectedExpire >= next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.INFINITE_CACHE ? undefined : context.renderOpts.collectedExpire;\n                        // Create the cache entry for the response.\n                        const cacheEntry = {\n                            value: {\n                                kind: next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__.CachedRouteKind.APP_ROUTE,\n                                status: response.status,\n                                body: Buffer.from(await blob.arrayBuffer()),\n                                headers\n                            },\n                            cacheControl: {\n                                revalidate,\n                                expire\n                            }\n                        };\n                        return cacheEntry;\n                    } else {\n                        // send response without caching if not ISR\n                        await (0,next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__.sendResponse)(nodeNextReq, nodeNextRes, response, context.renderOpts.pendingWaitUntil);\n                        return null;\n                    }\n                } catch (err) {\n                    // if this is a background revalidate we need to report\n                    // the request error here as it won't be bubbled\n                    if (previousCacheEntry == null ? void 0 : previousCacheEntry.isStale) {\n                        await routeModule.onRequestError(req, err, {\n                            routerKind: 'App Router',\n                            routePath: srcPage,\n                            routeType: 'route',\n                            revalidateReason: (0,next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_9__.getRevalidateReason)({\n                                isRevalidate,\n                                isOnDemandRevalidate\n                            })\n                        }, routerServerContext);\n                    }\n                    throw err;\n                }\n            };\n            const cacheEntry = await routeModule.handleResponse({\n                req,\n                nextConfig,\n                cacheKey,\n                routeKind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n                isFallback: false,\n                prerenderManifest,\n                isRoutePPREnabled: false,\n                isOnDemandRevalidate,\n                revalidateOnlyGenerated,\n                responseGenerator,\n                waitUntil: ctx.waitUntil\n            });\n            // we don't create a cacheEntry for ISR\n            if (!isIsr) {\n                return null;\n            }\n            if ((cacheEntry == null ? void 0 : (_cacheEntry_value = cacheEntry.value) == null ? void 0 : _cacheEntry_value.kind) !== next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__.CachedRouteKind.APP_ROUTE) {\n                var _cacheEntry_value1;\n                throw Object.defineProperty(new Error(`Invariant: app-route received invalid cache entry ${cacheEntry == null ? void 0 : (_cacheEntry_value1 = cacheEntry.value) == null ? void 0 : _cacheEntry_value1.kind}`), \"__NEXT_ERROR_CODE\", {\n                    value: \"E701\",\n                    enumerable: false,\n                    configurable: true\n                });\n            }\n            if (!(0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'minimalMode')) {\n                res.setHeader('x-nextjs-cache', isOnDemandRevalidate ? 'REVALIDATED' : cacheEntry.isMiss ? 'MISS' : cacheEntry.isStale ? 'STALE' : 'HIT');\n            }\n            // Draft mode should never be cached\n            if (isDraftMode) {\n                res.setHeader('Cache-Control', 'private, no-cache, no-store, max-age=0, must-revalidate');\n            }\n            const headers = (0,next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__.fromNodeOutgoingHttpHeaders)(cacheEntry.value.headers);\n            if (!((0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'minimalMode') && isIsr)) {\n                headers.delete(next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.NEXT_CACHE_TAGS_HEADER);\n            }\n            // If cache control is already set on the response we don't\n            // override it to allow users to customize it via next.config\n            if (cacheEntry.cacheControl && !res.getHeader('Cache-Control') && !headers.get('Cache-Control')) {\n                headers.set('Cache-Control', (0,next_dist_server_lib_cache_control__WEBPACK_IMPORTED_MODULE_12__.getCacheControlHeader)(cacheEntry.cacheControl));\n            }\n            await (0,next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__.sendResponse)(nodeNextReq, nodeNextRes, new Response(cacheEntry.value.body, {\n                headers,\n                status: cacheEntry.value.status || 200\n            }));\n            return null;\n        };\n        // TODO: activeSpan code path is for when wrapped by\n        // next-server can be removed when this is no longer used\n        if (activeSpan) {\n            await handleResponse(activeSpan);\n        } else {\n            await tracer.withPropagatedContext(req.headers, ()=>tracer.trace(next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__.BaseServerSpan.handleRequest, {\n                    spanName: `${method} ${req.url}`,\n                    kind: next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__.SpanKind.SERVER,\n                    attributes: {\n                        'http.method': method,\n                        'http.target': req.url\n                    }\n                }, handleResponse));\n        }\n    } catch (err) {\n        // if we aren't wrapped by base-server handle here\n        if (!activeSpan && !(err instanceof next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__.NoFallbackError)) {\n            await routeModule.onRequestError(req, err, {\n                routerKind: 'App Router',\n                routePath: normalizedSrcPage,\n                routeType: 'route',\n                revalidateReason: (0,next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_9__.getRevalidateReason)({\n                    isRevalidate,\n                    isOnDemandRevalidate\n                })\n            });\n        }\n        // rethrow so that we can handle serving error page\n        // If this is during static generation, throw the error again.\n        if (isIsr) throw err;\n        // Otherwise, send a 500 response.\n        await (0,next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__.sendResponse)(nodeNextReq, nodeNextRes, new Response(null, {\n            status: 500\n        }));\n        return null;\n    }\n}\n\n//# sourceMappingURL=app-route.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIvaW5kZXguanM/bmFtZT1hcHAlMkZhcGklMkZvcmRlcnMlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRm9yZGVycyUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRm9yZGVycyUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNJbWFuZyU1Q0RvY3VtZW50cyU1Q0dpdEh1YiU1Q3NlbGYtY2xhaW0tbGluayU1Q2FwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9QyUzQSU1Q1VzZXJzJTVDSW1hbmclNUNEb2N1bWVudHMlNUNHaXRIdWIlNUNzZWxmLWNsYWltLWxpbmsmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9c3RhbmRhbG9uZSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEJmlzR2xvYmFsTm90Rm91bmRFbmFibGVkPSEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBK0Y7QUFDdkM7QUFDcUI7QUFDZDtBQUNTO0FBQ087QUFDSztBQUNtQztBQUNqRDtBQUNPO0FBQ2Y7QUFDc0M7QUFDekI7QUFDTTtBQUNDO0FBQ2hCO0FBQzJDO0FBQzdHO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qix5R0FBbUI7QUFDM0M7QUFDQSxjQUFjLGtFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLGFBQWEsT0FBb0MsSUFBSSxDQUFFO0FBQ3ZELGdCQUFnQixNQUF1QztBQUN2RDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLHNEQUFzRDtBQUM5RDtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUMwRjtBQUNuRjtBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLEtBQXFCLEVBQUUsRUFFMUIsQ0FBQztBQUNOO0FBQ0E7QUFDQTtBQUNBLCtCQUErQixPQUF3QztBQUN2RTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxvSkFBb0o7QUFDaEssOEJBQThCLDZGQUFnQjtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsNkZBQWU7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsNEVBQVM7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLDhCQUE4Qiw2RUFBYztBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsNEVBQWU7QUFDM0MsNEJBQTRCLDZFQUFnQjtBQUM1QyxvQkFBb0IseUdBQWtCLGtDQUFrQyxpSEFBc0I7QUFDOUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlFQUFpRSxnRkFBYztBQUMvRSwrREFBK0QseUNBQXlDO0FBQ3hHO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLFFBQVEsRUFBRSxNQUFNO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0Esa0JBQWtCO0FBQ2xCLHVDQUF1QyxRQUFRLEVBQUUsUUFBUTtBQUN6RDtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSwrQ0FBK0Msb0JBQW9CO0FBQ25FO0FBQ0EseUJBQXlCLDZFQUFjO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0Msc0ZBQXlCO0FBQ2pFO0FBQ0Esb0NBQW9DLDRFQUFzQjtBQUMxRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNKQUFzSixvRUFBYztBQUNwSywwSUFBMEksb0VBQWM7QUFDeEo7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDLDZFQUFlO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0I7QUFDdEI7QUFDQSw4QkFBOEIsNkVBQVk7QUFDMUM7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE4QywyRkFBbUI7QUFDakU7QUFDQTtBQUNBLDZCQUE2QjtBQUM3Qix5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixrRUFBUztBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFJQUFxSSw2RUFBZTtBQUNwSjtBQUNBLDJHQUEyRyxpSEFBaUg7QUFDNU47QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsaUJBQWlCLDZFQUFjO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0Qix3RkFBMkI7QUFDdkQsa0JBQWtCLDZFQUFjO0FBQ2hDLCtCQUErQiw0RUFBc0I7QUFDckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkMsMEZBQXFCO0FBQ2xFO0FBQ0Esa0JBQWtCLDZFQUFZO0FBQzlCO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWLDZFQUE2RSxnRkFBYztBQUMzRixpQ0FBaUMsUUFBUSxFQUFFLFFBQVE7QUFDbkQsMEJBQTBCLHVFQUFRO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsTUFBTTtBQUNOO0FBQ0EsNENBQTRDLDZGQUFlO0FBQzNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLDJGQUFtQjtBQUNyRDtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyw2RUFBWTtBQUMxQjtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7O0FBRUEscUMiLCJzb3VyY2VzIjpbIiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgeyBnZXRSZXF1ZXN0TWV0YSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JlcXVlc3QtbWV0YVwiO1xuaW1wb3J0IHsgZ2V0VHJhY2VyLCBTcGFuS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi90cmFjZS90cmFjZXJcIjtcbmltcG9ydCB7IG5vcm1hbGl6ZUFwcFBhdGggfSBmcm9tIFwibmV4dC9kaXN0L3NoYXJlZC9saWIvcm91dGVyL3V0aWxzL2FwcC1wYXRoc1wiO1xuaW1wb3J0IHsgTm9kZU5leHRSZXF1ZXN0LCBOb2RlTmV4dFJlc3BvbnNlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvYmFzZS1odHRwL25vZGVcIjtcbmltcG9ydCB7IE5leHRSZXF1ZXN0QWRhcHRlciwgc2lnbmFsRnJvbU5vZGVSZXNwb25zZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3dlYi9zcGVjLWV4dGVuc2lvbi9hZGFwdGVycy9uZXh0LXJlcXVlc3RcIjtcbmltcG9ydCB7IEJhc2VTZXJ2ZXJTcGFuIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3RyYWNlL2NvbnN0YW50c1wiO1xuaW1wb3J0IHsgZ2V0UmV2YWxpZGF0ZVJlYXNvbiB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2luc3RydW1lbnRhdGlvbi91dGlsc1wiO1xuaW1wb3J0IHsgc2VuZFJlc3BvbnNlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvc2VuZC1yZXNwb25zZVwiO1xuaW1wb3J0IHsgZnJvbU5vZGVPdXRnb2luZ0h0dHBIZWFkZXJzLCB0b05vZGVPdXRnb2luZ0h0dHBIZWFkZXJzIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvd2ViL3V0aWxzXCI7XG5pbXBvcnQgeyBnZXRDYWNoZUNvbnRyb2xIZWFkZXIgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvY2FjaGUtY29udHJvbFwiO1xuaW1wb3J0IHsgSU5GSU5JVEVfQ0FDSEUsIE5FWFRfQ0FDSEVfVEFHU19IRUFERVIgfSBmcm9tIFwibmV4dC9kaXN0L2xpYi9jb25zdGFudHNcIjtcbmltcG9ydCB7IE5vRmFsbGJhY2tFcnJvciB9IGZyb20gXCJuZXh0L2Rpc3Qvc2hhcmVkL2xpYi9uby1mYWxsYmFjay1lcnJvci5leHRlcm5hbFwiO1xuaW1wb3J0IHsgQ2FjaGVkUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcmVzcG9uc2UtY2FjaGVcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCJDOlxcXFxVc2Vyc1xcXFxJbWFuZ1xcXFxEb2N1bWVudHNcXFxcR2l0SHViXFxcXHNlbGYtY2xhaW0tbGlua1xcXFxhcHBcXFxcYXBpXFxcXG9yZGVyc1xcXFxyb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJzdGFuZGFsb25lXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL29yZGVycy9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL29yZGVyc1wiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvb3JkZXJzL3JvdXRlXCJcbiAgICB9LFxuICAgIGRpc3REaXI6IHByb2Nlc3MuZW52Ll9fTkVYVF9SRUxBVElWRV9ESVNUX0RJUiB8fCAnJyxcbiAgICBwcm9qZWN0RGlyOiBwcm9jZXNzLmVudi5fX05FWFRfUkVMQVRJVkVfUFJPSkVDVF9ESVIgfHwgJycsXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCJDOlxcXFxVc2Vyc1xcXFxJbWFuZ1xcXFxEb2N1bWVudHNcXFxcR2l0SHViXFxcXHNlbGYtY2xhaW0tbGlua1xcXFxhcHBcXFxcYXBpXFxcXG9yZGVyc1xcXFxyb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHdvcmtBc3luY1N0b3JhZ2UsIHdvcmtVbml0QXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHdvcmtBc3luY1N0b3JhZ2UsXG4gICAgICAgIHdvcmtVbml0QXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgd29ya0FzeW5jU3RvcmFnZSwgd29ya1VuaXRBc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBwYXRjaEZldGNoLCAgfTtcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKHJlcSwgcmVzLCBjdHgpIHtcbiAgICB2YXIgX25leHRDb25maWdfZXhwZXJpbWVudGFsO1xuICAgIGxldCBzcmNQYWdlID0gXCIvYXBpL29yZGVycy9yb3V0ZVwiO1xuICAgIC8vIHR1cmJvcGFjayBkb2Vzbid0IG5vcm1hbGl6ZSBgL2luZGV4YCBpbiB0aGUgcGFnZSBuYW1lXG4gICAgLy8gc28gd2UgbmVlZCB0byB0byBwcm9jZXNzIGR5bmFtaWMgcm91dGVzIHByb3Blcmx5XG4gICAgLy8gVE9ETzogZml4IHR1cmJvcGFjayBwcm92aWRpbmcgZGlmZmVyaW5nIHZhbHVlIGZyb20gd2VicGFja1xuICAgIGlmIChwcm9jZXNzLmVudi5UVVJCT1BBQ0spIHtcbiAgICAgICAgc3JjUGFnZSA9IHNyY1BhZ2UucmVwbGFjZSgvXFwvaW5kZXgkLywgJycpIHx8ICcvJztcbiAgICB9IGVsc2UgaWYgKHNyY1BhZ2UgPT09ICcvaW5kZXgnKSB7XG4gICAgICAgIC8vIHdlIGFsd2F5cyBub3JtYWxpemUgL2luZGV4IHNwZWNpZmljYWxseVxuICAgICAgICBzcmNQYWdlID0gJy8nO1xuICAgIH1cbiAgICBjb25zdCBtdWx0aVpvbmVEcmFmdE1vZGUgPSBwcm9jZXNzLmVudi5fX05FWFRfTVVMVElfWk9ORV9EUkFGVF9NT0RFO1xuICAgIGNvbnN0IHByZXBhcmVSZXN1bHQgPSBhd2FpdCByb3V0ZU1vZHVsZS5wcmVwYXJlKHJlcSwgcmVzLCB7XG4gICAgICAgIHNyY1BhZ2UsXG4gICAgICAgIG11bHRpWm9uZURyYWZ0TW9kZVxuICAgIH0pO1xuICAgIGlmICghcHJlcGFyZVJlc3VsdCkge1xuICAgICAgICByZXMuc3RhdHVzQ29kZSA9IDQwMDtcbiAgICAgICAgcmVzLmVuZCgnQmFkIFJlcXVlc3QnKTtcbiAgICAgICAgY3R4LndhaXRVbnRpbCA9PSBudWxsID8gdm9pZCAwIDogY3R4LndhaXRVbnRpbC5jYWxsKGN0eCwgUHJvbWlzZS5yZXNvbHZlKCkpO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgY29uc3QgeyBidWlsZElkLCBwYXJhbXMsIG5leHRDb25maWcsIGlzRHJhZnRNb2RlLCBwcmVyZW5kZXJNYW5pZmVzdCwgcm91dGVyU2VydmVyQ29udGV4dCwgaXNPbkRlbWFuZFJldmFsaWRhdGUsIHJldmFsaWRhdGVPbmx5R2VuZXJhdGVkLCByZXNvbHZlZFBhdGhuYW1lIH0gPSBwcmVwYXJlUmVzdWx0O1xuICAgIGNvbnN0IG5vcm1hbGl6ZWRTcmNQYWdlID0gbm9ybWFsaXplQXBwUGF0aChzcmNQYWdlKTtcbiAgICBsZXQgaXNJc3IgPSBCb29sZWFuKHByZXJlbmRlck1hbmlmZXN0LmR5bmFtaWNSb3V0ZXNbbm9ybWFsaXplZFNyY1BhZ2VdIHx8IHByZXJlbmRlck1hbmlmZXN0LnJvdXRlc1tyZXNvbHZlZFBhdGhuYW1lXSk7XG4gICAgaWYgKGlzSXNyICYmICFpc0RyYWZ0TW9kZSkge1xuICAgICAgICBjb25zdCBpc1ByZXJlbmRlcmVkID0gQm9vbGVhbihwcmVyZW5kZXJNYW5pZmVzdC5yb3V0ZXNbcmVzb2x2ZWRQYXRobmFtZV0pO1xuICAgICAgICBjb25zdCBwcmVyZW5kZXJJbmZvID0gcHJlcmVuZGVyTWFuaWZlc3QuZHluYW1pY1JvdXRlc1tub3JtYWxpemVkU3JjUGFnZV07XG4gICAgICAgIGlmIChwcmVyZW5kZXJJbmZvKSB7XG4gICAgICAgICAgICBpZiAocHJlcmVuZGVySW5mby5mYWxsYmFjayA9PT0gZmFsc2UgJiYgIWlzUHJlcmVuZGVyZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm9GYWxsYmFja0Vycm9yKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgbGV0IGNhY2hlS2V5ID0gbnVsbDtcbiAgICBpZiAoaXNJc3IgJiYgIXJvdXRlTW9kdWxlLmlzRGV2ICYmICFpc0RyYWZ0TW9kZSkge1xuICAgICAgICBjYWNoZUtleSA9IHJlc29sdmVkUGF0aG5hbWU7XG4gICAgICAgIC8vIGVuc3VyZSAvaW5kZXggYW5kIC8gaXMgbm9ybWFsaXplZCB0byBvbmUga2V5XG4gICAgICAgIGNhY2hlS2V5ID0gY2FjaGVLZXkgPT09ICcvaW5kZXgnID8gJy8nIDogY2FjaGVLZXk7XG4gICAgfVxuICAgIGNvbnN0IHN1cHBvcnRzRHluYW1pY1Jlc3BvbnNlID0gLy8gSWYgd2UncmUgaW4gZGV2ZWxvcG1lbnQsIHdlIGFsd2F5cyBzdXBwb3J0IGR5bmFtaWMgSFRNTFxuICAgIHJvdXRlTW9kdWxlLmlzRGV2ID09PSB0cnVlIHx8IC8vIElmIHRoaXMgaXMgbm90IFNTRyBvciBkb2VzIG5vdCBoYXZlIHN0YXRpYyBwYXRocywgdGhlbiBpdCBzdXBwb3J0c1xuICAgIC8vIGR5bmFtaWMgSFRNTC5cbiAgICAhaXNJc3I7XG4gICAgLy8gVGhpcyBpcyBhIHJldmFsaWRhdGlvbiByZXF1ZXN0IGlmIHRoZSByZXF1ZXN0IGlzIGZvciBhIHN0YXRpY1xuICAgIC8vIHBhZ2UgYW5kIGl0IGlzIG5vdCBiZWluZyByZXN1bWVkIGZyb20gYSBwb3N0cG9uZWQgcmVuZGVyIGFuZFxuICAgIC8vIGl0IGlzIG5vdCBhIGR5bmFtaWMgUlNDIHJlcXVlc3QgdGhlbiBpdCBpcyBhIHJldmFsaWRhdGlvblxuICAgIC8vIHJlcXVlc3QuXG4gICAgY29uc3QgaXNSZXZhbGlkYXRlID0gaXNJc3IgJiYgIXN1cHBvcnRzRHluYW1pY1Jlc3BvbnNlO1xuICAgIGNvbnN0IG1ldGhvZCA9IHJlcS5tZXRob2QgfHwgJ0dFVCc7XG4gICAgY29uc3QgdHJhY2VyID0gZ2V0VHJhY2VyKCk7XG4gICAgY29uc3QgYWN0aXZlU3BhbiA9IHRyYWNlci5nZXRBY3RpdmVTY29wZVNwYW4oKTtcbiAgICBjb25zdCBjb250ZXh0ID0ge1xuICAgICAgICBwYXJhbXMsXG4gICAgICAgIHByZXJlbmRlck1hbmlmZXN0LFxuICAgICAgICByZW5kZXJPcHRzOiB7XG4gICAgICAgICAgICBleHBlcmltZW50YWw6IHtcbiAgICAgICAgICAgICAgICBkeW5hbWljSU86IEJvb2xlYW4obmV4dENvbmZpZy5leHBlcmltZW50YWwuZHluYW1pY0lPKSxcbiAgICAgICAgICAgICAgICBhdXRoSW50ZXJydXB0czogQm9vbGVhbihuZXh0Q29uZmlnLmV4cGVyaW1lbnRhbC5hdXRoSW50ZXJydXB0cylcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzdXBwb3J0c0R5bmFtaWNSZXNwb25zZSxcbiAgICAgICAgICAgIGluY3JlbWVudGFsQ2FjaGU6IGdldFJlcXVlc3RNZXRhKHJlcSwgJ2luY3JlbWVudGFsQ2FjaGUnKSxcbiAgICAgICAgICAgIGNhY2hlTGlmZVByb2ZpbGVzOiAoX25leHRDb25maWdfZXhwZXJpbWVudGFsID0gbmV4dENvbmZpZy5leHBlcmltZW50YWwpID09IG51bGwgPyB2b2lkIDAgOiBfbmV4dENvbmZpZ19leHBlcmltZW50YWwuY2FjaGVMaWZlLFxuICAgICAgICAgICAgaXNSZXZhbGlkYXRlLFxuICAgICAgICAgICAgd2FpdFVudGlsOiBjdHgud2FpdFVudGlsLFxuICAgICAgICAgICAgb25DbG9zZTogKGNiKT0+e1xuICAgICAgICAgICAgICAgIHJlcy5vbignY2xvc2UnLCBjYik7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb25BZnRlclRhc2tFcnJvcjogdW5kZWZpbmVkLFxuICAgICAgICAgICAgb25JbnN0cnVtZW50YXRpb25SZXF1ZXN0RXJyb3I6IChlcnJvciwgX3JlcXVlc3QsIGVycm9yQ29udGV4dCk9PnJvdXRlTW9kdWxlLm9uUmVxdWVzdEVycm9yKHJlcSwgZXJyb3IsIGVycm9yQ29udGV4dCwgcm91dGVyU2VydmVyQ29udGV4dClcbiAgICAgICAgfSxcbiAgICAgICAgc2hhcmVkQ29udGV4dDoge1xuICAgICAgICAgICAgYnVpbGRJZFxuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBub2RlTmV4dFJlcSA9IG5ldyBOb2RlTmV4dFJlcXVlc3QocmVxKTtcbiAgICBjb25zdCBub2RlTmV4dFJlcyA9IG5ldyBOb2RlTmV4dFJlc3BvbnNlKHJlcyk7XG4gICAgY29uc3QgbmV4dFJlcSA9IE5leHRSZXF1ZXN0QWRhcHRlci5mcm9tTm9kZU5leHRSZXF1ZXN0KG5vZGVOZXh0UmVxLCBzaWduYWxGcm9tTm9kZVJlc3BvbnNlKHJlcykpO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGludm9rZVJvdXRlTW9kdWxlID0gYXN5bmMgKHNwYW4pPT57XG4gICAgICAgICAgICByZXR1cm4gcm91dGVNb2R1bGUuaGFuZGxlKG5leHRSZXEsIGNvbnRleHQpLmZpbmFsbHkoKCk9PntcbiAgICAgICAgICAgICAgICBpZiAoIXNwYW4pIHJldHVybjtcbiAgICAgICAgICAgICAgICBzcGFuLnNldEF0dHJpYnV0ZXMoe1xuICAgICAgICAgICAgICAgICAgICAnaHR0cC5zdGF0dXNfY29kZSc6IHJlcy5zdGF0dXNDb2RlLFxuICAgICAgICAgICAgICAgICAgICAnbmV4dC5yc2MnOiBmYWxzZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJvb3RTcGFuQXR0cmlidXRlcyA9IHRyYWNlci5nZXRSb290U3BhbkF0dHJpYnV0ZXMoKTtcbiAgICAgICAgICAgICAgICAvLyBXZSB3ZXJlIHVuYWJsZSB0byBnZXQgYXR0cmlidXRlcywgcHJvYmFibHkgT1RFTCBpcyBub3QgZW5hYmxlZFxuICAgICAgICAgICAgICAgIGlmICghcm9vdFNwYW5BdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHJvb3RTcGFuQXR0cmlidXRlcy5nZXQoJ25leHQuc3Bhbl90eXBlJykgIT09IEJhc2VTZXJ2ZXJTcGFuLmhhbmRsZVJlcXVlc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGBVbmV4cGVjdGVkIHJvb3Qgc3BhbiB0eXBlICcke3Jvb3RTcGFuQXR0cmlidXRlcy5nZXQoJ25leHQuc3Bhbl90eXBlJyl9Jy4gUGxlYXNlIHJlcG9ydCB0aGlzIE5leHQuanMgaXNzdWUgaHR0cHM6Ly9naXRodWIuY29tL3ZlcmNlbC9uZXh0LmpzYCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3Qgcm91dGUgPSByb290U3BhbkF0dHJpYnV0ZXMuZ2V0KCduZXh0LnJvdXRlJyk7XG4gICAgICAgICAgICAgICAgaWYgKHJvdXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBgJHttZXRob2R9ICR7cm91dGV9YDtcbiAgICAgICAgICAgICAgICAgICAgc3Bhbi5zZXRBdHRyaWJ1dGVzKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICduZXh0LnJvdXRlJzogcm91dGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAnaHR0cC5yb3V0ZSc6IHJvdXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ25leHQuc3Bhbl9uYW1lJzogbmFtZVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3Bhbi51cGRhdGVOYW1lKG5hbWUpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHNwYW4udXBkYXRlTmFtZShgJHttZXRob2R9ICR7cmVxLnVybH1gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgaGFuZGxlUmVzcG9uc2UgPSBhc3luYyAoY3VycmVudFNwYW4pPT57XG4gICAgICAgICAgICB2YXIgX2NhY2hlRW50cnlfdmFsdWU7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZUdlbmVyYXRvciA9IGFzeW5jICh7IHByZXZpb3VzQ2FjaGVFbnRyeSB9KT0+e1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghZ2V0UmVxdWVzdE1ldGEocmVxLCAnbWluaW1hbE1vZGUnKSAmJiBpc09uRGVtYW5kUmV2YWxpZGF0ZSAmJiByZXZhbGlkYXRlT25seUdlbmVyYXRlZCAmJiAhcHJldmlvdXNDYWNoZUVudHJ5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXMuc3RhdHVzQ29kZSA9IDQwNDtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9uLWRlbWFuZCByZXZhbGlkYXRlIGFsd2F5cyBzZXRzIHRoaXMgaGVhZGVyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXMuc2V0SGVhZGVyKCd4LW5leHRqcy1jYWNoZScsICdSRVZBTElEQVRFRCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzLmVuZCgnVGhpcyBwYWdlIGNvdWxkIG5vdCBiZSBmb3VuZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBpbnZva2VSb3V0ZU1vZHVsZShjdXJyZW50U3Bhbik7XG4gICAgICAgICAgICAgICAgICAgIHJlcS5mZXRjaE1ldHJpY3MgPSBjb250ZXh0LnJlbmRlck9wdHMuZmV0Y2hNZXRyaWNzO1xuICAgICAgICAgICAgICAgICAgICBsZXQgcGVuZGluZ1dhaXRVbnRpbCA9IGNvbnRleHQucmVuZGVyT3B0cy5wZW5kaW5nV2FpdFVudGlsO1xuICAgICAgICAgICAgICAgICAgICAvLyBBdHRlbXB0IHVzaW5nIHByb3ZpZGVkIHdhaXRVbnRpbCBpZiBhdmFpbGFibGVcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgaXQncyBub3Qgd2UgZmFsbGJhY2sgdG8gc2VuZFJlc3BvbnNlJ3MgaGFuZGxpbmdcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBlbmRpbmdXYWl0VW50aWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdHgud2FpdFVudGlsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LndhaXRVbnRpbChwZW5kaW5nV2FpdFVudGlsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZW5kaW5nV2FpdFVudGlsID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhY2hlVGFncyA9IGNvbnRleHQucmVuZGVyT3B0cy5jb2xsZWN0ZWRUYWdzO1xuICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGUgcmVxdWVzdCBpcyBmb3IgYSBzdGF0aWMgcmVzcG9uc2UsIHdlIGNhbiBjYWNoZSBpdCBzbyBsb25nXG4gICAgICAgICAgICAgICAgICAgIC8vIGFzIGl0J3Mgbm90IGVkZ2UuXG4gICAgICAgICAgICAgICAgICAgIGlmIChpc0lzcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYmxvYiA9IGF3YWl0IHJlc3BvbnNlLmJsb2IoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENvcHkgdGhlIGhlYWRlcnMgZnJvbSB0aGUgcmVzcG9uc2UuXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBoZWFkZXJzID0gdG9Ob2RlT3V0Z29pbmdIdHRwSGVhZGVycyhyZXNwb25zZS5oZWFkZXJzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjYWNoZVRhZ3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzW05FWFRfQ0FDSEVfVEFHU19IRUFERVJdID0gY2FjaGVUYWdzO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFoZWFkZXJzWydjb250ZW50LXR5cGUnXSAmJiBibG9iLnR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzWydjb250ZW50LXR5cGUnXSA9IGJsb2IudHlwZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJldmFsaWRhdGUgPSB0eXBlb2YgY29udGV4dC5yZW5kZXJPcHRzLmNvbGxlY3RlZFJldmFsaWRhdGUgPT09ICd1bmRlZmluZWQnIHx8IGNvbnRleHQucmVuZGVyT3B0cy5jb2xsZWN0ZWRSZXZhbGlkYXRlID49IElORklOSVRFX0NBQ0hFID8gZmFsc2UgOiBjb250ZXh0LnJlbmRlck9wdHMuY29sbGVjdGVkUmV2YWxpZGF0ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGV4cGlyZSA9IHR5cGVvZiBjb250ZXh0LnJlbmRlck9wdHMuY29sbGVjdGVkRXhwaXJlID09PSAndW5kZWZpbmVkJyB8fCBjb250ZXh0LnJlbmRlck9wdHMuY29sbGVjdGVkRXhwaXJlID49IElORklOSVRFX0NBQ0hFID8gdW5kZWZpbmVkIDogY29udGV4dC5yZW5kZXJPcHRzLmNvbGxlY3RlZEV4cGlyZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENyZWF0ZSB0aGUgY2FjaGUgZW50cnkgZm9yIHRoZSByZXNwb25zZS5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhY2hlRW50cnkgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2luZDogQ2FjaGVkUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiByZXNwb25zZS5zdGF0dXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvZHk6IEJ1ZmZlci5mcm9tKGF3YWl0IGJsb2IuYXJyYXlCdWZmZXIoKSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlQ29udHJvbDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXZhbGlkYXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBpcmVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhY2hlRW50cnk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBzZW5kIHJlc3BvbnNlIHdpdGhvdXQgY2FjaGluZyBpZiBub3QgSVNSXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBzZW5kUmVzcG9uc2Uobm9kZU5leHRSZXEsIG5vZGVOZXh0UmVzLCByZXNwb25zZSwgY29udGV4dC5yZW5kZXJPcHRzLnBlbmRpbmdXYWl0VW50aWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgdGhpcyBpcyBhIGJhY2tncm91bmQgcmV2YWxpZGF0ZSB3ZSBuZWVkIHRvIHJlcG9ydFxuICAgICAgICAgICAgICAgICAgICAvLyB0aGUgcmVxdWVzdCBlcnJvciBoZXJlIGFzIGl0IHdvbid0IGJlIGJ1YmJsZWRcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByZXZpb3VzQ2FjaGVFbnRyeSA9PSBudWxsID8gdm9pZCAwIDogcHJldmlvdXNDYWNoZUVudHJ5LmlzU3RhbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHJvdXRlTW9kdWxlLm9uUmVxdWVzdEVycm9yKHJlcSwgZXJyLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm91dGVyS2luZDogJ0FwcCBSb3V0ZXInLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvdXRlUGF0aDogc3JjUGFnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3V0ZVR5cGU6ICdyb3V0ZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV2YWxpZGF0ZVJlYXNvbjogZ2V0UmV2YWxpZGF0ZVJlYXNvbih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzUmV2YWxpZGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNPbkRlbWFuZFJldmFsaWRhdGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgcm91dGVyU2VydmVyQ29udGV4dCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBjYWNoZUVudHJ5ID0gYXdhaXQgcm91dGVNb2R1bGUuaGFuZGxlUmVzcG9uc2Uoe1xuICAgICAgICAgICAgICAgIHJlcSxcbiAgICAgICAgICAgICAgICBuZXh0Q29uZmlnLFxuICAgICAgICAgICAgICAgIGNhY2hlS2V5LFxuICAgICAgICAgICAgICAgIHJvdXRlS2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgICAgICAgICBpc0ZhbGxiYWNrOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBwcmVyZW5kZXJNYW5pZmVzdCxcbiAgICAgICAgICAgICAgICBpc1JvdXRlUFBSRW5hYmxlZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgaXNPbkRlbWFuZFJldmFsaWRhdGUsXG4gICAgICAgICAgICAgICAgcmV2YWxpZGF0ZU9ubHlHZW5lcmF0ZWQsXG4gICAgICAgICAgICAgICAgcmVzcG9uc2VHZW5lcmF0b3IsXG4gICAgICAgICAgICAgICAgd2FpdFVudGlsOiBjdHgud2FpdFVudGlsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIHdlIGRvbid0IGNyZWF0ZSBhIGNhY2hlRW50cnkgZm9yIElTUlxuICAgICAgICAgICAgaWYgKCFpc0lzcikge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKChjYWNoZUVudHJ5ID09IG51bGwgPyB2b2lkIDAgOiAoX2NhY2hlRW50cnlfdmFsdWUgPSBjYWNoZUVudHJ5LnZhbHVlKSA9PSBudWxsID8gdm9pZCAwIDogX2NhY2hlRW50cnlfdmFsdWUua2luZCkgIT09IENhY2hlZFJvdXRlS2luZC5BUFBfUk9VVEUpIHtcbiAgICAgICAgICAgICAgICB2YXIgX2NhY2hlRW50cnlfdmFsdWUxO1xuICAgICAgICAgICAgICAgIHRocm93IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuZXcgRXJyb3IoYEludmFyaWFudDogYXBwLXJvdXRlIHJlY2VpdmVkIGludmFsaWQgY2FjaGUgZW50cnkgJHtjYWNoZUVudHJ5ID09IG51bGwgPyB2b2lkIDAgOiAoX2NhY2hlRW50cnlfdmFsdWUxID0gY2FjaGVFbnRyeS52YWx1ZSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9jYWNoZUVudHJ5X3ZhbHVlMS5raW5kfWApLCBcIl9fTkVYVF9FUlJPUl9DT0RFXCIsIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IFwiRTcwMVwiLFxuICAgICAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWdldFJlcXVlc3RNZXRhKHJlcSwgJ21pbmltYWxNb2RlJykpIHtcbiAgICAgICAgICAgICAgICByZXMuc2V0SGVhZGVyKCd4LW5leHRqcy1jYWNoZScsIGlzT25EZW1hbmRSZXZhbGlkYXRlID8gJ1JFVkFMSURBVEVEJyA6IGNhY2hlRW50cnkuaXNNaXNzID8gJ01JU1MnIDogY2FjaGVFbnRyeS5pc1N0YWxlID8gJ1NUQUxFJyA6ICdISVQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIERyYWZ0IG1vZGUgc2hvdWxkIG5ldmVyIGJlIGNhY2hlZFxuICAgICAgICAgICAgaWYgKGlzRHJhZnRNb2RlKSB7XG4gICAgICAgICAgICAgICAgcmVzLnNldEhlYWRlcignQ2FjaGUtQ29udHJvbCcsICdwcml2YXRlLCBuby1jYWNoZSwgbm8tc3RvcmUsIG1heC1hZ2U9MCwgbXVzdC1yZXZhbGlkYXRlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBoZWFkZXJzID0gZnJvbU5vZGVPdXRnb2luZ0h0dHBIZWFkZXJzKGNhY2hlRW50cnkudmFsdWUuaGVhZGVycyk7XG4gICAgICAgICAgICBpZiAoIShnZXRSZXF1ZXN0TWV0YShyZXEsICdtaW5pbWFsTW9kZScpICYmIGlzSXNyKSkge1xuICAgICAgICAgICAgICAgIGhlYWRlcnMuZGVsZXRlKE5FWFRfQ0FDSEVfVEFHU19IRUFERVIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gSWYgY2FjaGUgY29udHJvbCBpcyBhbHJlYWR5IHNldCBvbiB0aGUgcmVzcG9uc2Ugd2UgZG9uJ3RcbiAgICAgICAgICAgIC8vIG92ZXJyaWRlIGl0IHRvIGFsbG93IHVzZXJzIHRvIGN1c3RvbWl6ZSBpdCB2aWEgbmV4dC5jb25maWdcbiAgICAgICAgICAgIGlmIChjYWNoZUVudHJ5LmNhY2hlQ29udHJvbCAmJiAhcmVzLmdldEhlYWRlcignQ2FjaGUtQ29udHJvbCcpICYmICFoZWFkZXJzLmdldCgnQ2FjaGUtQ29udHJvbCcpKSB7XG4gICAgICAgICAgICAgICAgaGVhZGVycy5zZXQoJ0NhY2hlLUNvbnRyb2wnLCBnZXRDYWNoZUNvbnRyb2xIZWFkZXIoY2FjaGVFbnRyeS5jYWNoZUNvbnRyb2wpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGF3YWl0IHNlbmRSZXNwb25zZShub2RlTmV4dFJlcSwgbm9kZU5leHRSZXMsIG5ldyBSZXNwb25zZShjYWNoZUVudHJ5LnZhbHVlLmJvZHksIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIHN0YXR1czogY2FjaGVFbnRyeS52YWx1ZS5zdGF0dXMgfHwgMjAwXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfTtcbiAgICAgICAgLy8gVE9ETzogYWN0aXZlU3BhbiBjb2RlIHBhdGggaXMgZm9yIHdoZW4gd3JhcHBlZCBieVxuICAgICAgICAvLyBuZXh0LXNlcnZlciBjYW4gYmUgcmVtb3ZlZCB3aGVuIHRoaXMgaXMgbm8gbG9uZ2VyIHVzZWRcbiAgICAgICAgaWYgKGFjdGl2ZVNwYW4pIHtcbiAgICAgICAgICAgIGF3YWl0IGhhbmRsZVJlc3BvbnNlKGFjdGl2ZVNwYW4pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYXdhaXQgdHJhY2VyLndpdGhQcm9wYWdhdGVkQ29udGV4dChyZXEuaGVhZGVycywgKCk9PnRyYWNlci50cmFjZShCYXNlU2VydmVyU3Bhbi5oYW5kbGVSZXF1ZXN0LCB7XG4gICAgICAgICAgICAgICAgICAgIHNwYW5OYW1lOiBgJHttZXRob2R9ICR7cmVxLnVybH1gLFxuICAgICAgICAgICAgICAgICAgICBraW5kOiBTcGFuS2luZC5TRVJWRVIsXG4gICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICdodHRwLm1ldGhvZCc6IG1ldGhvZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICdodHRwLnRhcmdldCc6IHJlcS51cmxcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIGhhbmRsZVJlc3BvbnNlKSk7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgLy8gaWYgd2UgYXJlbid0IHdyYXBwZWQgYnkgYmFzZS1zZXJ2ZXIgaGFuZGxlIGhlcmVcbiAgICAgICAgaWYgKCFhY3RpdmVTcGFuICYmICEoZXJyIGluc3RhbmNlb2YgTm9GYWxsYmFja0Vycm9yKSkge1xuICAgICAgICAgICAgYXdhaXQgcm91dGVNb2R1bGUub25SZXF1ZXN0RXJyb3IocmVxLCBlcnIsIHtcbiAgICAgICAgICAgICAgICByb3V0ZXJLaW5kOiAnQXBwIFJvdXRlcicsXG4gICAgICAgICAgICAgICAgcm91dGVQYXRoOiBub3JtYWxpemVkU3JjUGFnZSxcbiAgICAgICAgICAgICAgICByb3V0ZVR5cGU6ICdyb3V0ZScsXG4gICAgICAgICAgICAgICAgcmV2YWxpZGF0ZVJlYXNvbjogZ2V0UmV2YWxpZGF0ZVJlYXNvbih7XG4gICAgICAgICAgICAgICAgICAgIGlzUmV2YWxpZGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgaXNPbkRlbWFuZFJldmFsaWRhdGVcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gcmV0aHJvdyBzbyB0aGF0IHdlIGNhbiBoYW5kbGUgc2VydmluZyBlcnJvciBwYWdlXG4gICAgICAgIC8vIElmIHRoaXMgaXMgZHVyaW5nIHN0YXRpYyBnZW5lcmF0aW9uLCB0aHJvdyB0aGUgZXJyb3IgYWdhaW4uXG4gICAgICAgIGlmIChpc0lzcikgdGhyb3cgZXJyO1xuICAgICAgICAvLyBPdGhlcndpc2UsIHNlbmQgYSA1MDAgcmVzcG9uc2UuXG4gICAgICAgIGF3YWl0IHNlbmRSZXNwb25zZShub2RlTmV4dFJlcSwgbm9kZU5leHRSZXMsIG5ldyBSZXNwb25zZShudWxsLCB7XG4gICAgICAgICAgICBzdGF0dXM6IDUwMFxuICAgICAgICB9KSk7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Forders%2Froute&page=%2Fapi%2Forders%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Forders%2Froute.ts&appDir=C%3A%5CUsers%5CImang%5CDocuments%5CGitHub%5Cself-claim-link%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CImang%5CDocuments%5CGitHub%5Cself-claim-link&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "../app-render/after-task-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist/server/app-render/after-task-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ "../app-render/work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("events");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("https");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "next/dist/shared/lib/no-fallback-error.external":
/*!******************************************************************!*\
  !*** external "next/dist/shared/lib/no-fallback-error.external" ***!
  \******************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/no-fallback-error.external");

/***/ }),

/***/ "next/dist/shared/lib/router/utils/app-paths":
/*!**************************************************************!*\
  !*** external "next/dist/shared/lib/router/utils/app-paths" ***!
  \**************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/app-paths");

/***/ }),

/***/ "os":
/*!*********************!*\
  !*** external "os" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("os");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ }),

/***/ "pg":
/*!*********************!*\
  !*** external "pg" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = import("pg");;

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "string_decoder":
/*!*********************************!*\
  !*** external "string_decoder" ***!
  \*********************************/
/***/ ((module) => {

"use strict";
module.exports = require("string_decoder");

/***/ }),

/***/ "tty":
/*!**********************!*\
  !*** external "tty" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("tty");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/winston","vendor-chunks/winston-transport","vendor-chunks/bcryptjs","vendor-chunks/colorspace","vendor-chunks/async","vendor-chunks/logform","vendor-chunks/safe-stable-stringify","vendor-chunks/@colors","vendor-chunks/fecha","vendor-chunks/string_decoder","vendor-chunks/@dabh","vendor-chunks/color-string","vendor-chunks/color-name","vendor-chunks/stack-trace","vendor-chunks/triple-beam","vendor-chunks/ms","vendor-chunks/kuler","vendor-chunks/one-time","vendor-chunks/inherits","vendor-chunks/fn.name","vendor-chunks/enabled","vendor-chunks/is-stream","vendor-chunks/simple-swizzle","vendor-chunks/text-hex","vendor-chunks/is-arrayish","vendor-chunks/util-deprecate","vendor-chunks/date-fns","vendor-chunks/@babel"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Forders%2Froute&page=%2Fapi%2Forders%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Forders%2Froute.ts&appDir=C%3A%5CUsers%5CImang%5CDocuments%5CGitHub%5Cself-claim-link%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CImang%5CDocuments%5CGitHub%5Cself-claim-link&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!")));
module.exports = __webpack_exports__;

})();